# 	5 GIT

## 1. git教程

代码托管平台：[git.acwing.com](git.acwing.com)

### 1.1. git基本概念

* 工作区：仓库的目录。工作区是独立于各个分支的。
* 暂存区：数据暂时存放的区域，类似于工作区写入版本库前的缓存区。暂存区是独立于各个分支的。
* 版本库：存放所有已经提交到本地仓库的代码版本
* 版本结构：树结构，树中每个节点代表一个代码版本。

### 1.2 git常用命令

1. `git config --global user.name xxx`：设置全局用户名，信息记录在`~/.gitconfig`文件中
2. `git config --global user.email xxx@xxx.com`：设置全局邮箱地址，信息记录在`~/.gitconfig`文件中
3. `git init`：将当前目录配置成git仓库，信息记录在隐藏的`.git`文件夹中
4. `git add XX`：将XX文件添加到暂存区

   * `git add .`：将所有待加入暂存区的文件加入暂存区
5. `git rm --cached XX`：将文件从仓库索引目录中删掉
6. `git commit -m "给自己看的备注信息"`：将暂存区的内容提交到当前分支
7. `git status`：查看仓库状态
8. `git diff XX`：查看XX文件相对于暂存区修改了哪些内容
9. `git log`：查看当前分支的所有版本 
10. `git reflog`：查看HEAD指针的移动历史（包括被回滚的版本）
11. `git reset --hard HEAD^ 或 git reset --hard HEAD~`：将代码库回滚到上一个版本

    * `git reset --hard HEAD^^`：往上回滚两次，以此类推

    * `git reset --hard HEAD~100`：往上回滚100个版本

    * `git reset --hard 版本号`：回滚到某一特定版本
12. `git checkout — XX或git restore XX`：将XX文件尚未加入暂存区的修改全部撤销
13. `git remote add origin git@git.acwing.com:xxx/XXX.git`：将本地仓库关联到远程仓库
14. `git push -u` (第一次需要-u以后不需要)：将当前分支推送到远程仓库
<<<<<<< HEAD
* ·
15. `git clone git@git.acwing.com:xxx/XXX.git`：将远程仓库XXX下载到当前目录下
16. `git checkout -b branch_name`：创建并切换到`branch_name`这个分支
17. `git branch`：查看所有分支和当前所处分支
18. `git checkout branch_name`：切换到`branch_name`这个分支
19. `git merge branch_name`：将分支`branch_name`合并到当前分支上
20. `git branch -d branch_name`：删除本地仓库的`branch_name`分支
21. `git branch branch_name`：创建新分支
22. `git push --set-upstream origin branch_name`：设置本地的`branch_name`分支对应远程仓库的`branch_name`分支
23. `git push -d origin branch_name`：删除远程仓库的`branch_name`分支
24. `git pull`：将远程仓库的当前分支与本地仓库的当前分支合并
* `git pull origin branch_name`：将远程仓库的`branch_name`分支与本地仓库的当前分支合并
25. `git branch --set-upstream-to=origin/branch_name1 branch_name2`：将远程的`branch_name1`分支与本地的`branch_name2`分支对应
26. `git checkout -t origin/branch_name` 将远程的`branch_name`分支拉取到本地
27. `git stash`：将工作区和暂存区中尚未提交的修改存入栈中
28. `git stash apply`：将栈顶存储的修改恢复到当前分支，但不删除栈顶元素
29. `git stash drop`：删除栈顶存储的修改
30. `git stash pop`：将栈顶存储的修改恢复到当前分支，同时删除栈顶元素
31. `git stash list`：查看栈中所有元素
=======
    * `git push origin branch_name`：将本地的某个分支推送到远程仓库
15. `git clone git@git.acwing.com:xxx/XXX.git`：将远程仓库XXX下载到当前目录下
16. `git checkout -b branch_name`：创建并切换到`branch_name`这个分支
17. `git branch`：查看所有分支和当前所处分支
18. `git branch -m master main`：将master分支改名为main
19. `git checkout branch_name`：切换到`branch_name`这个分支
20. `git merge branch_name`：将分支`branch_name`合并到当前分支上
21. `git branch -d branch_name`：删除本地仓库的`branch_name`分支
22. `git branch branch_name`：创建新分支
23. `git push --set-upstream origin branch_name`：设置本地的`branch_name`分支对应远程仓库的`branch_name`分支
24. `git push -d origin branch_name`：删除远程仓库的`branch_name`分支
25. `git pull`：将远程仓库的当前分支与本地仓库的当前分支合并
    * `git pull origin branch_name`：将远程仓库的`branch_name`分支与本地仓库的当前分支合并
26. `git branch --set-upstream-to=origin/branch_name1 branch_name2`：将远程的`branch_name1`分支与本地的`branch_name2`分支对应
27. `git checkout -t origin/branch_name` 将远程的`branch_name`分支拉取到本地
28. `git stash`：将工作区和暂存区中尚未提交的修改存入栈中
29. `git stash apply`：将栈顶存储的修改恢复到当前分支，但不删除栈顶元素
30. `git stash drop`：删除栈顶存储的修改
31. `git stash pop`：将栈顶存储的修改恢复到当前分支，同时删除栈顶元素
32. `git stash list`：查看栈中所有元素
>>>>>>> 692a133c86ba0c267d958f7df0c0ed57254f6942

### 1.3 git笔记

1. `git rm`命令：

   1. `git rm xxx.file`:将暂存区和文件区的文佳全部删掉 ，要求两个文件没有更改 不然需要加-f 例如：`git rm -f xxx.file`
   2. `git rm --cached xxx.file`:将文件从暂存区删除

2. `git restore`命令：

   1. `git restore xxx.file`:将文件区的文件恢复到暂存区的样子
   2. `git restore --staged xxx.file`:将版本库文件恢复到暂存区
   
3. `git`如何删除版本库文件
	
	1. 方法一：直接删除暂存区，然后提交
	
	   ```
	   git rm --cached main.c
	   git commit -m "delete main.c"
	   ```
	
	2. 方法二：先在工作目录中删除，然后进行add操作，再提交
	
	   ```
	   delete main.c
	   git add -u
	   git commit --m "delete main.c"
	   ```
	
4. [`git`的分支管理](https://www.liaoxuefeng.com/wiki/896043488029600/900005860592480):

5. 在本地电脑拉取git远端的步骤（希望关联）：
	1. `git init`:初始化`git`仓库。
	2. `git remote add origin ...git`：和远程仓库关联。
	3. 随便新开一个文件，并且`add`,`commit`.这个是为了出现`branch`。([为什么新建仓库的时候没有第一次`commit`文件看不见并且新建不了`branch`](https://blog.csdn.net/Lakers2015/article/details/112320092))
	4. `git branch --set-upstream-to=origin/master master`:因为使用git在本地新建一个分支后，需要做远程分支关联。如果没有关联，git会在下面的操作中提示你显示的添加关联。关联目的是在执行git pull, git push操作时就不需要指定对应的远程分支，你只要没有显示指定，`git pull`的时候，就会提示你。解决方法就是按照提示添加一下呗：
	5. `git pull origin master --allow-unrelated-histories`:如果合并了两个不同的开始提交的仓库，在新的 `git` 会发现这两个仓库可能不是同一个，为了防止开发者上传错误，于是就给下面的提示`fatal: refusing to merge unrelated histories`如我在`Github`新建一个仓库，写了`License`，然后把本地一个写了很久仓库上传。这时会发现 `github` 的仓库和本地的没有一个共同的 `commit` 所以 `git` 不让提交，认为是写错了 `origin` ，如果开发者确定是这个 origin 就可以使用 `--allow-unrelated-histories` 告诉 `git` 自己确定


​    

​    

​    

​    



