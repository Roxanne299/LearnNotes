
<!DOCTYPE html>

<html lang="zh_CN">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="generator" content="Docutils 0.17: http://docutils.sourceforge.net/" />

    <title>os --- 多种操作系统接口 &#8212; Python 3.10.5 文档</title><meta name="viewport" content="width=device-width, initial-scale=1.0">
    
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pydoctheme.css?2022.1" type="text/css" />
    
    <script id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
    <script src="../_static/jquery.js"></script>
    <script src="../_static/underscore.js"></script>
    <script src="../_static/doctools.js"></script>
    <script src="../_static/translations.js"></script>
    
    <script src="../_static/sidebar.js"></script>
    
    <link rel="search" type="application/opensearchdescription+xml"
          title="在 Python 3.10.5 文档 中搜索"
          href="../_static/opensearch.xml"/>
    <link rel="author" title="关于这些文档" href="../about.html" />
    <link rel="index" title="索引" href="../genindex.html" />
    <link rel="search" title="搜索" href="../search.html" />
    <link rel="copyright" title="版权所有" href="../copyright.html" />
    <link rel="next" title="io --- 处理流的核心工具" href="io.html" />
    <link rel="prev" title="通用操作系统服务" href="allos.html" />
    <link rel="canonical" href="https://docs.python.org/3/library/os.html" />
    
      
    

    
    <style>
      @media only screen {
        table.full-width-table {
            width: 100%;
        }
      }
    </style>
<link rel="shortcut icon" type="image/png" href="../_static/py.svg" />
            <script type="text/javascript" src="../_static/copybutton.js"></script>
            <script type="text/javascript" src="../_static/menu.js"></script> 

  </head>
<body>
<div class="mobile-nav">
    <input type="checkbox" id="menuToggler" class="toggler__input" aria-controls="navigation"
           aria-pressed="false" aria-expanded="false" role="button" aria-label="Menu" />
    <label for="menuToggler" class="toggler__label">
        <span></span>
    </label>
    <nav class="nav-content" role="navigation">
         <a href="https://www.python.org/" class="nav-logo">
             <img src="../_static/py.svg" alt="Logo"/>
         </a>
        <div class="version_switcher_placeholder"></div>
        <form role="search" class="search" action="../search.html" method="get">
            <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" class="search-icon">
                <path fill-rule="nonzero"
                        d="M15.5 14h-.79l-.28-.27a6.5 6.5 0 001.48-5.34c-.47-2.78-2.79-5-5.59-5.34a6.505 6.505 0 00-7.27 7.27c.34 2.8 2.56 5.12 5.34 5.59a6.5 6.5 0 005.34-1.48l.27.28v.79l4.25 4.25c.41.41 1.08.41 1.49 0 .41-.41.41-1.08 0-1.49L15.5 14zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14z" fill="#444"></path>
            </svg>
            <input type="text" name="q" aria-label="快速搜索"/>
            <input type="submit" value="转向"/>
        </form>
    </nav>
    <div class="menu-wrapper">
        <nav class="menu" role="navigation" aria-label="main navigation">
            <div class="language_switcher_placeholder"></div>
  <h3><a href="../contents.html">目录</a></h3>
  <ul>
<li><a class="reference internal" href="#"><code class="xref py py-mod docutils literal notranslate"><span class="pre">os</span></code> --- 多种操作系统接口</a><ul>
<li><a class="reference internal" href="#file-names-command-line-arguments-and-environment-variables">文件名，命令行参数，以及环境变量。</a></li>
<li><a class="reference internal" href="#python-utf-8-mode">Python UTF-8 模式</a></li>
<li><a class="reference internal" href="#process-parameters">进程参数</a></li>
<li><a class="reference internal" href="#file-object-creation">创建文件对象</a></li>
<li><a class="reference internal" href="#file-descriptor-operations">文件描述符操作</a><ul>
<li><a class="reference internal" href="#querying-the-size-of-a-terminal">查询终端的尺寸</a></li>
<li><a class="reference internal" href="#inheritance-of-file-descriptors">文件描述符的继承</a></li>
</ul>
</li>
<li><a class="reference internal" href="#files-and-directories">文件和目录</a><ul>
<li><a class="reference internal" href="#linux-extended-attributes">Linux 扩展属性</a></li>
</ul>
</li>
<li><a class="reference internal" href="#process-management">进程管理</a></li>
<li><a class="reference internal" href="#interface-to-the-scheduler">调度器接口</a></li>
<li><a class="reference internal" href="#miscellaneous-system-information">其他系统信息</a></li>
<li><a class="reference internal" href="#random-numbers">随机数</a></li>
</ul>
</li>
</ul>

  <h4>上一个主题</h4>
  <p class="topless"><a href="allos.html"
                        title="上一章">通用操作系统服务</a></p>
  <h4>下一个主题</h4>
  <p class="topless"><a href="io.html"
                        title="下一章"><code class="xref py py-mod docutils literal notranslate"><span class="pre">io</span></code> --- 处理流的核心工具</a></p>
  <div role="note" aria-label="source link">
    <h3>当前页面</h3>
    <ul class="this-page-menu">
      <li><a href="../bugs.html">提交 Bug</a></li>
      <li>
        <a href="https://github.com/python/cpython/blob/3.10/Doc/library/os.rst"
            rel="nofollow">显示源码
        </a>
      </li>
    </ul>
  </div>
        </nav>
    </div>
</div>

  
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>导航</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="总目录"
             accesskey="I">索引</a></li>
        <li class="right" >
          <a href="../py-modindex.html" title="Python 模块索引"
             >模块</a> |</li>
        <li class="right" >
          <a href="io.html" title="io --- 处理流的核心工具"
             accesskey="N">下一页</a> |</li>
        <li class="right" >
          <a href="allos.html" title="通用操作系统服务"
             accesskey="P">上一页</a> |</li>

          <li><img src="../_static/py.svg" alt="python logo" style="vertical-align: middle; margin-top: -1px"/></li>
          <li><a href="https://www.python.org/">Python</a> &#187;</li>
          <li class="switchers">
            <div class="language_switcher_placeholder"></div>
            <div class="version_switcher_placeholder"></div>
          </li>
          <li>
              
          </li>
    <li id="cpython-language-and-version">
      <a href="../index.html">3.10.5 Documentation</a> &#187;
    </li>

          <li class="nav-item nav-item-1"><a href="index.html" >Python 标准库</a> &#187;</li>
          <li class="nav-item nav-item-2"><a href="allos.html" accesskey="U">通用操作系统服务</a> &#187;</li>
        <li class="nav-item nav-item-this"><a href=""><code class="xref py py-mod docutils literal notranslate"><span class="pre">os</span></code> --- 多种操作系统接口</a></li>
                <li class="right">
                    

    <div class="inline-search" role="search">
        <form class="inline-search" action="../search.html" method="get">
          <input placeholder="快速搜索" aria-label="快速搜索" type="text" name="q" />
          <input type="submit" value="转向" />
          <input type="hidden" name="check_keywords" value="yes" />
          <input type="hidden" name="area" value="default" />
        </form>
    </div>
                     |
                </li>
            
      </ul>
    </div>    

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <section id="module-os">
<span id="os-miscellaneous-operating-system-interfaces"></span><h1><a class="reference internal" href="#module-os" title="os: Miscellaneous operating system interfaces."><code class="xref py py-mod docutils literal notranslate"><span class="pre">os</span></code></a> --- 多种操作系统接口<a class="headerlink" href="#module-os" title="永久链接至标题">¶</a></h1>
<p><strong>源代码：</strong> <a class="reference external" href="https://github.com/python/cpython/tree/3.10/Lib/os.py">Lib/os.py</a></p>
<hr class="docutils" />
<p>本模块提供了一种使用与操作系统相关的功能的便捷式途径。 如果你只是想读写一个文件，请参阅 <a class="reference internal" href="functions.html#open" title="open"><code class="xref py py-func docutils literal notranslate"><span class="pre">open()</span></code></a>，如果你想操作文件路径，请参阅 <a class="reference internal" href="os.path.html#module-os.path" title="os.path: Operations on pathnames."><code class="xref py py-mod docutils literal notranslate"><span class="pre">os.path</span></code></a> 模块，如果你想读取通过命令行给出的所有文件中的所有行，请参阅 <a class="reference internal" href="fileinput.html#module-fileinput" title="fileinput: Loop over standard input or a list of files."><code class="xref py py-mod docutils literal notranslate"><span class="pre">fileinput</span></code></a> 模块。 为了创建临时文件和目录，请参阅 <a class="reference internal" href="tempfile.html#module-tempfile" title="tempfile: Generate temporary files and directories."><code class="xref py py-mod docutils literal notranslate"><span class="pre">tempfile</span></code></a> 模块，对于高级文件和目录处理，请参阅 <a class="reference internal" href="shutil.html#module-shutil" title="shutil: High-level file operations, including copying."><code class="xref py py-mod docutils literal notranslate"><span class="pre">shutil</span></code></a> 模块。</p>
<p>关于这些函数的适用性的说明：</p>
<ul class="simple">
<li><p>Python中所有依赖于操作系统的内置模块的设计都是这样，只要不同的操作系统某一相同的功能可用，它就使用相同的接口。例如，函数 <code class="docutils literal notranslate"><span class="pre">os.stat(path)</span></code> 以相同的格式返回关于 <em>path</em> 的状态信息（该格式源于 POSIX 接口）。</p></li>
<li><p>特定于某一操作系统的扩展通过操作 <a class="reference internal" href="#module-os" title="os: Miscellaneous operating system interfaces."><code class="xref py py-mod docutils literal notranslate"><span class="pre">os</span></code></a> 模块也是可用的，但是使用它们当然是对可移植性的一种威胁。</p></li>
<li><p>所有接受路径或文件名的函数都同时支持字节串和字符串对象，并在返回路径或文件名时使用相应类型的对象作为结果。</p></li>
<li><p>在 VxWorks 系统上，os.popen, os.fork, os.execv 和 os.spawn*p* 都未支持。</p></li>
</ul>
<div class="admonition note">
<p class="admonition-title">注解</p>
<p>如果使用无效或无法访问的文件名与路径，或者其他类型正确但操作系统不接受的参数，此模块的所有函数都抛出 <a class="reference internal" href="exceptions.html#OSError" title="OSError"><code class="xref py py-exc docutils literal notranslate"><span class="pre">OSError</span></code></a> （或者它的子类）。</p>
</div>
<dl class="py exception">
<dt id="os.error">
<em class="property">exception </em><code class="sig-prename descclassname">os.</code><code class="sig-name descname">error</code><a class="headerlink" href="#os.error" title="永久链接至目标">¶</a></dt>
<dd><p>内建的 <a class="reference internal" href="exceptions.html#OSError" title="OSError"><code class="xref py py-exc docutils literal notranslate"><span class="pre">OSError</span></code></a> 异常的一个别名。</p>
</dd></dl>

<dl class="py data">
<dt id="os.name">
<code class="sig-prename descclassname">os.</code><code class="sig-name descname">name</code><a class="headerlink" href="#os.name" title="永久链接至目标">¶</a></dt>
<dd><p>导入的依赖特定操作系统的模块的名称。以下名称目前已注册: <code class="docutils literal notranslate"><span class="pre">'posix'</span></code>, <code class="docutils literal notranslate"><span class="pre">'nt'</span></code>, <code class="docutils literal notranslate"><span class="pre">'java'</span></code>.</p>
<div class="admonition seealso">
<p class="admonition-title">参见</p>
<p><a class="reference internal" href="sys.html#sys.platform" title="sys.platform"><code class="xref py py-attr docutils literal notranslate"><span class="pre">sys.platform</span></code></a> 有更详细的描述. <a class="reference internal" href="#os.uname" title="os.uname"><code class="xref py py-func docutils literal notranslate"><span class="pre">os.uname()</span></code></a> 只给出系统提供的版本信息。</p>
<p><a class="reference internal" href="platform.html#module-platform" title="platform: Retrieves as much platform identifying data as possible."><code class="xref py py-mod docutils literal notranslate"><span class="pre">platform</span></code></a> 模块对系统的标识有更详细的检查。</p>
</div>
</dd></dl>

<section id="file-names-command-line-arguments-and-environment-variables">
<span id="filesystem-encoding"></span><span id="os-filenames"></span><h2>文件名，命令行参数，以及环境变量。<a class="headerlink" href="#file-names-command-line-arguments-and-environment-variables" title="永久链接至标题">¶</a></h2>
<p>在 Python 中，使用字符串类型表示文件名、命令行参数和环境变量。 在某些系统上，在将这些字符串传递给操作系统之前，必须将这些字符串解码为字节。 Python 使用 <a class="reference internal" href="../glossary.html#term-filesystem-encoding-and-error-handler"><span class="xref std std-term">filesystem encoding and error handler</span></a> 来执行此转换（请参阅 <a class="reference internal" href="sys.html#sys.getfilesystemencoding" title="sys.getfilesystemencoding"><code class="xref py py-func docutils literal notranslate"><span class="pre">sys.getfilesystemencoding()</span></code></a> ）。</p>
<p><a class="reference internal" href="../glossary.html#term-filesystem-encoding-and-error-handler"><span class="xref std std-term">filesystem encoding and error handler</span></a> 是在 Python 启动时通过 <code class="xref c c-func docutils literal notranslate"><span class="pre">PyConfig_Read()</span></code> 函数来配置的：请参阅 <a class="reference internal" href="../c-api/init_config.html#c.PyConfig" title="PyConfig"><code class="xref c c-type docutils literal notranslate"><span class="pre">PyConfig</span></code></a> 的 <a class="reference internal" href="../c-api/init_config.html#c.PyConfig.filesystem_encoding" title="PyConfig.filesystem_encoding"><code class="xref c c-member docutils literal notranslate"><span class="pre">filesystem_encoding</span></code></a> 和 <a class="reference internal" href="../c-api/init_config.html#c.PyConfig.filesystem_errors" title="PyConfig.filesystem_errors"><code class="xref c c-member docutils literal notranslate"><span class="pre">filesystem_errors</span></code></a> 等成员。</p>
<div class="versionchanged">
<p><span class="versionmodified changed">在 3.1 版更改: </span>在某些系统上，使用文件系统编码进行转换可能会失败。 在这种情况下，Python 会使用 <a class="reference internal" href="codecs.html#surrogateescape"><span class="std std-ref">代理转义编码错误处理器</span></a>，这意味着在解码时，不可解码的字节被 Unicode 字符 U+DCxx 替换，并且这些字节在编码时再次转换为原始字节。</p>
</div>
<p><a class="reference internal" href="../glossary.html#term-filesystem-encoding-and-error-handler"><span class="xref std std-term">文件系统编码器</span></a> 必须保证能成功解码所有 128 以内的字节。如果不能保证，API 函数可能触发 <a class="reference internal" href="exceptions.html#UnicodeError" title="UnicodeError"><code class="xref py py-exc docutils literal notranslate"><span class="pre">UnicodeError</span></code></a> 。</p>
<p>另请参见 <a class="reference internal" href="../glossary.html#term-locale-encoding"><span class="xref std std-term">locale encoding</span></a>。</p>
</section>
<section id="python-utf-8-mode">
<span id="utf8-mode"></span><h2>Python UTF-8 模式<a class="headerlink" href="#python-utf-8-mode" title="永久链接至标题">¶</a></h2>
<div class="versionadded">
<p><span class="versionmodified added">3.7 新版功能: </span>有关更多详细信息，请参阅 <span class="target" id="index-78"></span><a class="pep reference external" href="https://www.python.org/dev/peps/pep-0540"><strong>PEP 540</strong></a> 。</p>
</div>
<p>Python UTF-8 模式会忽略 <a class="reference internal" href="../glossary.html#term-locale-encoding"><span class="xref std std-term">locale encoding</span></a> 并强制使用 UTF-8 编码。</p>
<ul class="simple">
<li><p>用 UTF-8 作为 <a class="reference internal" href="../glossary.html#term-filesystem-encoding-and-error-handler"><span class="xref std std-term">文件系统编码</span></a>。</p></li>
<li><p><a class="reference internal" href="sys.html#sys.getfilesystemencoding" title="sys.getfilesystemencoding"><code class="xref py py-func docutils literal notranslate"><span class="pre">sys.getfilesystemencoding()</span></code></a> 返回 <code class="docutils literal notranslate"><span class="pre">'UTF-8'</span></code> 。</p></li>
<li><p><a class="reference internal" href="locale.html#locale.getpreferredencoding" title="locale.getpreferredencoding"><code class="xref py py-func docutils literal notranslate"><span class="pre">locale.getpreferredencoding()</span></code></a> 返回 <code class="docutils literal notranslate"><span class="pre">'UTF-8'</span></code> (<em>do_setlocale</em> 参数不起作用)。</p></li>
<li><p><a class="reference internal" href="sys.html#sys.stdin" title="sys.stdin"><code class="xref py py-data docutils literal notranslate"><span class="pre">sys.stdin</span></code></a>, <a class="reference internal" href="sys.html#sys.stdout" title="sys.stdout"><code class="xref py py-data docutils literal notranslate"><span class="pre">sys.stdout</span></code></a> 和 <a class="reference internal" href="sys.html#sys.stderr" title="sys.stderr"><code class="xref py py-data docutils literal notranslate"><span class="pre">sys.stderr</span></code></a> 都将 UTF-8 用作它们的文本编码，并且为 <a class="reference internal" href="sys.html#sys.stdin" title="sys.stdin"><code class="xref py py-data docutils literal notranslate"><span class="pre">sys.stdin</span></code></a> 和 <a class="reference internal" href="sys.html#sys.stdout" title="sys.stdout"><code class="xref py py-data docutils literal notranslate"><span class="pre">sys.stdout</span></code></a> 启用 <code class="docutils literal notranslate"><span class="pre">surrogateescape</span></code> <a class="reference internal" href="codecs.html#error-handlers"><span class="std std-ref">错误处理句柄</span></a> (<a class="reference internal" href="sys.html#sys.stderr" title="sys.stderr"><code class="xref py py-data docutils literal notranslate"><span class="pre">sys.stderr</span></code></a> 会继续使用 <code class="docutils literal notranslate"><span class="pre">backslashreplace</span></code> 如同在默认的局部感知模式下一样)</p></li>
<li><p>在 Unix 中，<a class="reference internal" href="#os.device_encoding" title="os.device_encoding"><code class="xref py py-func docutils literal notranslate"><span class="pre">os.device_encoding()</span></code></a> 返回 <code class="docutils literal notranslate"><span class="pre">'UTF-8'</span></code>。而不是设备的编码。</p></li>
</ul>
<p>请注意 UTF-8 模式下的标准流设置可以被 <span class="target" id="index-79"></span><a class="reference internal" href="../using/cmdline.html#envvar-PYTHONIOENCODING"><code class="xref std std-envvar docutils literal notranslate"><span class="pre">PYTHONIOENCODING</span></code></a> 所覆盖（在默认的区域感知模式下也同样如此）。</p>
<p>作为低层级 API 发生改变的结果，其他高层级 API 也会表现出不同的默认行为：</p>
<ul class="simple">
<li><p>命令行参数，环境变量和文件名会使用 UTF-8 编码来解码为文本。</p></li>
<li><p><a class="reference internal" href="#os.fsdecode" title="os.fsdecode"><code class="xref py py-func docutils literal notranslate"><span class="pre">os.fsdecode()</span></code></a> 和 <a class="reference internal" href="#os.fsencode" title="os.fsencode"><code class="xref py py-func docutils literal notranslate"><span class="pre">os.fsencode()</span></code></a> 会使用 UTF-8 编码。</p></li>
<li><p><a class="reference internal" href="functions.html#open" title="open"><code class="xref py py-func docutils literal notranslate"><span class="pre">open()</span></code></a>, <a class="reference internal" href="io.html#io.open" title="io.open"><code class="xref py py-func docutils literal notranslate"><span class="pre">io.open()</span></code></a> 和 <a class="reference internal" href="codecs.html#codecs.open" title="codecs.open"><code class="xref py py-func docutils literal notranslate"><span class="pre">codecs.open()</span></code></a> 默认会使用 UTF-8 编码。 但是，它们默认仍将使用严格错误处理句柄，因此试图在文本模式下打开二进制文件将可能引发异常，而不是生成无意义的数据。</p></li>
</ul>
<p>如果在 Python 启动时 LC_CTYPE 区域设为 <code class="docutils literal notranslate"><span class="pre">C</span></code> 或 <code class="docutils literal notranslate"><span class="pre">POSIX</span></code> ，则启用 <a class="reference internal" href="#utf8-mode"><span class="std std-ref">Python UTF-8 模式</span></a> (参见 <code class="xref c c-func docutils literal notranslate"><span class="pre">PyConfig_Read()</span></code> 函数)。</p>
<p>它可以通过命令行选项 <a class="reference internal" href="../using/cmdline.html#cmdoption-X"><code class="xref std std-option docutils literal notranslate"><span class="pre">-X</span> <span class="pre">utf8</span></code></a> 和环境变量 <span class="target" id="index-80"></span><a class="reference internal" href="../using/cmdline.html#envvar-PYTHONUTF8"><code class="xref std std-envvar docutils literal notranslate"><span class="pre">PYTHONUTF8</span></code></a>，来启用或禁用。</p>
<p>如果没有设置 <span class="target" id="index-81"></span><a class="reference internal" href="../using/cmdline.html#envvar-PYTHONUTF8"><code class="xref std std-envvar docutils literal notranslate"><span class="pre">PYTHONUTF8</span></code></a> 环境变量，那么解释器默认使用当前的地区设置，<em>除非</em> 当前地区识别为基于 ASCII 的传统地区（如 <span class="target" id="index-82"></span><a class="reference internal" href="../using/cmdline.html#envvar-PYTHONCOERCECLOCALE"><code class="xref std std-envvar docutils literal notranslate"><span class="pre">PYTHONCOERCECLOCALE</span></code></a> 所述），并且 locale coercion 被禁用或失败。在这种传统地区，除非显式指明不要如此，解释器将默认启用 UTF-8 模式。</p>
<p>Python UTF-8 模式只能在 Python 启动时启用。其值可以从 <a class="reference internal" href="sys.html#sys.flags" title="sys.flags"><code class="xref py py-data docutils literal notranslate"><span class="pre">sys.flags.utf8_mode</span></code></a> 读取。</p>
<p>另请参阅 <a class="reference internal" href="../using/windows.html#win-utf8-mode"><span class="std std-ref">在 Windows 中的 UTF-8 模式</span></a> 和 <a class="reference internal" href="../glossary.html#term-filesystem-encoding-and-error-handler"><span class="xref std std-term">filesystem encoding and error handler</span></a>。</p>
</section>
<section id="process-parameters">
<span id="os-procinfo"></span><h2>进程参数<a class="headerlink" href="#process-parameters" title="永久链接至标题">¶</a></h2>
<p>这些函数和数据项提供了操作当前进程和用户的信息。</p>
<dl class="py function">
<dt id="os.ctermid">
<code class="sig-prename descclassname">os.</code><code class="sig-name descname">ctermid</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#os.ctermid" title="永久链接至目标">¶</a></dt>
<dd><p>返回与进程控制终端对应的文件名。</p>
<p class="availability"><a class="reference internal" href="intro.html#availability"><span class="std std-ref">可用性</span></a>: Unix。</p>
</dd></dl>

<dl class="py data">
<dt id="os.environ">
<code class="sig-prename descclassname">os.</code><code class="sig-name descname">environ</code><a class="headerlink" href="#os.environ" title="永久链接至目标">¶</a></dt>
<dd><p>一个 <a class="reference internal" href="../glossary.html#term-mapping"><span class="xref std std-term">mapping</span></a> 对象，其中键值是代表进程环境的字符串。 例如，<code class="docutils literal notranslate"><span class="pre">environ['HOME']</span></code> 是你的主目录（在某些平台上）的路径名，相当于 C 中的 <code class="docutils literal notranslate"><span class="pre">getenv(&quot;HOME&quot;)</span></code>。</p>
<p>这个映射是在第一次导入 <a class="reference internal" href="#module-os" title="os: Miscellaneous operating system interfaces."><code class="xref py py-mod docutils literal notranslate"><span class="pre">os</span></code></a> 模块时捕获的，通常作为 Python 启动时处理 <code class="file docutils literal notranslate"><span class="pre">site.py</span></code> 的一部分。除了通过直接修改 <a class="reference internal" href="#os.environ" title="os.environ"><code class="xref py py-data docutils literal notranslate"><span class="pre">os.environ</span></code></a> 之外，在此之后对环境所做的更改不会反映在 <a class="reference internal" href="#os.environ" title="os.environ"><code class="xref py py-data docutils literal notranslate"><span class="pre">os.environ</span></code></a> 中。</p>
<p>该映射除了可以用于查询环境外，还能用于修改环境。当该映射被修改时，将自动调用 <a class="reference internal" href="#os.putenv" title="os.putenv"><code class="xref py py-func docutils literal notranslate"><span class="pre">putenv()</span></code></a>。</p>
<p>在Unix系统上，键和值会使用 <a class="reference internal" href="sys.html#sys.getfilesystemencoding" title="sys.getfilesystemencoding"><code class="xref py py-func docutils literal notranslate"><span class="pre">sys.getfilesystemencoding()</span></code></a> 和 <code class="docutils literal notranslate"><span class="pre">'surrogateescape'</span></code> 的错误处理。如果你想使用其他的编码，使用 <a class="reference internal" href="#os.environb" title="os.environb"><code class="xref py py-data docutils literal notranslate"><span class="pre">environb</span></code></a>。</p>
<div class="admonition note">
<p class="admonition-title">注解</p>
<p>直接调用 <a class="reference internal" href="#os.putenv" title="os.putenv"><code class="xref py py-func docutils literal notranslate"><span class="pre">putenv()</span></code></a> 并不会影响 <a class="reference internal" href="#os.environ" title="os.environ"><code class="xref py py-data docutils literal notranslate"><span class="pre">os.environ</span></code></a> ，所以推荐直接修改 <a class="reference internal" href="#os.environ" title="os.environ"><code class="xref py py-data docutils literal notranslate"><span class="pre">os.environ</span></code></a> 。</p>
</div>
<div class="admonition note">
<p class="admonition-title">注解</p>
<p>在某些平台上，包括 FreeBSD 和 macOS，设置 <code class="docutils literal notranslate"><span class="pre">environ</span></code> 可能导致内存泄漏。 请参阅 <code class="xref c c-func docutils literal notranslate"><span class="pre">putenv()</span></code> 的系统文档。</p>
</div>
<p>可以删除映射中的元素来删除对应的环境变量。当从 <a class="reference internal" href="#os.environ" title="os.environ"><code class="xref py py-data docutils literal notranslate"><span class="pre">os.environ</span></code></a> 删除元素时，以及调用 <code class="xref py py-meth docutils literal notranslate"><span class="pre">pop()</span></code> 或 <code class="xref py py-meth docutils literal notranslate"><span class="pre">clear()</span></code> 之一时，将自动调用 <a class="reference internal" href="#os.unsetenv" title="os.unsetenv"><code class="xref py py-func docutils literal notranslate"><span class="pre">unsetenv()</span></code></a>。</p>
<div class="versionchanged">
<p><span class="versionmodified changed">在 3.9 版更改: </span>已更新并支持了 <span class="target" id="index-83"></span><a class="pep reference external" href="https://www.python.org/dev/peps/pep-0584"><strong>PEP 584</strong></a> 的合并 (<code class="docutils literal notranslate"><span class="pre">|</span></code>) 和更新 (<code class="docutils literal notranslate"><span class="pre">|=</span></code>) 运算符。</p>
</div>
</dd></dl>

<dl class="py data">
<dt id="os.environb">
<code class="sig-prename descclassname">os.</code><code class="sig-name descname">environb</code><a class="headerlink" href="#os.environb" title="永久链接至目标">¶</a></dt>
<dd><p><a class="reference internal" href="#os.environ" title="os.environ"><code class="xref py py-data docutils literal notranslate"><span class="pre">environ</span></code></a> 的字节版本：一个 <a class="reference internal" href="../glossary.html#term-mapping"><span class="xref std std-term">mapping</span></a> 对象，其中键值都是 <a class="reference internal" href="stdtypes.html#bytes" title="bytes"><code class="xref py py-class docutils literal notranslate"><span class="pre">bytes</span></code></a> 对象，代表进程环境。 <a class="reference internal" href="#os.environ" title="os.environ"><code class="xref py py-data docutils literal notranslate"><span class="pre">environ</span></code></a> 和 <a class="reference internal" href="#os.environb" title="os.environb"><code class="xref py py-data docutils literal notranslate"><span class="pre">environb</span></code></a> 是同步的（修改 <a class="reference internal" href="#os.environb" title="os.environb"><code class="xref py py-data docutils literal notranslate"><span class="pre">environb</span></code></a> 会更新 <a class="reference internal" href="#os.environ" title="os.environ"><code class="xref py py-data docutils literal notranslate"><span class="pre">environ</span></code></a>，反之亦然）。</p>
<p>只有在 <a class="reference internal" href="#os.supports_bytes_environ" title="os.supports_bytes_environ"><code class="xref py py-data docutils literal notranslate"><span class="pre">supports_bytes_environ</span></code></a> 为 <code class="docutils literal notranslate"><span class="pre">True</span></code> 的时候 <a class="reference internal" href="#os.environb" title="os.environb"><code class="xref py py-data docutils literal notranslate"><span class="pre">environb</span></code></a> 才是可用的。</p>
<div class="versionadded">
<p><span class="versionmodified added">3.2 新版功能.</span></p>
</div>
<div class="versionchanged">
<p><span class="versionmodified changed">在 3.9 版更改: </span>已更新并支持了 <span class="target" id="index-84"></span><a class="pep reference external" href="https://www.python.org/dev/peps/pep-0584"><strong>PEP 584</strong></a> 的合并 (<code class="docutils literal notranslate"><span class="pre">|</span></code>) 和更新 (<code class="docutils literal notranslate"><span class="pre">|=</span></code>) 运算符。</p>
</div>
</dd></dl>

<dl class="py function">
<dt>
<code class="sig-prename descclassname">os.</code><code class="sig-name descname">chdir</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">path</span></em><span class="sig-paren">)</span></dt>
<dt>
<code class="sig-prename descclassname">os.</code><code class="sig-name descname">fchdir</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">fd</span></em><span class="sig-paren">)</span></dt>
<dt>
<code class="sig-prename descclassname">os.</code><code class="sig-name descname">getcwd</code><span class="sig-paren">(</span><span class="sig-paren">)</span></dt>
<dd><p>以上函数请参阅 <a class="reference internal" href="#os-file-dir"><span class="std std-ref">文件和目录</span></a> 。</p>
</dd></dl>

<dl class="py function">
<dt id="os.fsencode">
<code class="sig-prename descclassname">os.</code><code class="sig-name descname">fsencode</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">filename</span></em><span class="sig-paren">)</span><a class="headerlink" href="#os.fsencode" title="永久链接至目标">¶</a></dt>
<dd><p>将 <a class="reference internal" href="../glossary.html#term-path-like-object"><span class="xref std std-term">类似路径形式的</span></a> <em>filename</em> 编码为 <a class="reference internal" href="../glossary.html#term-filesystem-encoding-and-error-handler"><span class="xref std std-term">filesystem encoding and error handler</span></a>；原样返回 <a class="reference internal" href="stdtypes.html#bytes" title="bytes"><code class="xref py py-class docutils literal notranslate"><span class="pre">bytes</span></code></a>。</p>
<p><a class="reference internal" href="#os.fsdecode" title="os.fsdecode"><code class="xref py py-func docutils literal notranslate"><span class="pre">fsdecode()</span></code></a> 是此函数的逆向函数。</p>
<div class="versionadded">
<p><span class="versionmodified added">3.2 新版功能.</span></p>
</div>
<div class="versionchanged">
<p><span class="versionmodified changed">在 3.6 版更改: </span>增加对实现了 <a class="reference internal" href="#os.PathLike" title="os.PathLike"><code class="xref py py-class docutils literal notranslate"><span class="pre">os.PathLike</span></code></a> 接口的对象的支持。</p>
</div>
</dd></dl>

<dl class="py function">
<dt id="os.fsdecode">
<code class="sig-prename descclassname">os.</code><code class="sig-name descname">fsdecode</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">filename</span></em><span class="sig-paren">)</span><a class="headerlink" href="#os.fsdecode" title="永久链接至目标">¶</a></dt>
<dd><p>根据 <a class="reference internal" href="../glossary.html#term-filesystem-encoding-and-error-handler"><span class="xref std std-term">filesystem encoding and error handler</span></a> 来解码 <a class="reference internal" href="../glossary.html#term-path-like-object"><span class="xref std std-term">类似路径形式的</span></a> <em>filename</em>；原样返回 <a class="reference internal" href="stdtypes.html#str" title="str"><code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code></a>。</p>
<p><a class="reference internal" href="#os.fsencode" title="os.fsencode"><code class="xref py py-func docutils literal notranslate"><span class="pre">fsencode()</span></code></a> 是此函数的逆向函数。</p>
<div class="versionadded">
<p><span class="versionmodified added">3.2 新版功能.</span></p>
</div>
<div class="versionchanged">
<p><span class="versionmodified changed">在 3.6 版更改: </span>增加对实现了 <a class="reference internal" href="#os.PathLike" title="os.PathLike"><code class="xref py py-class docutils literal notranslate"><span class="pre">os.PathLike</span></code></a> 接口的对象的支持。</p>
</div>
</dd></dl>

<dl class="py function">
<dt id="os.fspath">
<code class="sig-prename descclassname">os.</code><code class="sig-name descname">fspath</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">path</span></em><span class="sig-paren">)</span><a class="headerlink" href="#os.fspath" title="永久链接至目标">¶</a></dt>
<dd><p>返回路径的文件系统表示。</p>
<p>如果传入的是 <a class="reference internal" href="stdtypes.html#str" title="str"><code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code></a> 或 <a class="reference internal" href="stdtypes.html#bytes" title="bytes"><code class="xref py py-class docutils literal notranslate"><span class="pre">bytes</span></code></a> 类型的字符串，将原样返回。否则 <a class="reference internal" href="#os.PathLike.__fspath__" title="os.PathLike.__fspath__"><code class="xref py py-meth docutils literal notranslate"><span class="pre">__fspath__()</span></code></a> 将被调用，如果得到的是一个 <a class="reference internal" href="stdtypes.html#str" title="str"><code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code></a> 或 <a class="reference internal" href="stdtypes.html#bytes" title="bytes"><code class="xref py py-class docutils literal notranslate"><span class="pre">bytes</span></code></a> 类型的对象，那就返回这个值。其他所有情况则会抛出 <a class="reference internal" href="exceptions.html#TypeError" title="TypeError"><code class="xref py py-exc docutils literal notranslate"><span class="pre">TypeError</span></code></a>  异常。</p>
<div class="versionadded">
<p><span class="versionmodified added">3.6 新版功能.</span></p>
</div>
</dd></dl>

<dl class="py class">
<dt id="os.PathLike">
<em class="property">class </em><code class="sig-prename descclassname">os.</code><code class="sig-name descname">PathLike</code><a class="headerlink" href="#os.PathLike" title="永久链接至目标">¶</a></dt>
<dd><p>某些对象用于表示文件系统中的路径（如 <a class="reference internal" href="pathlib.html#pathlib.PurePath" title="pathlib.PurePath"><code class="xref py py-class docutils literal notranslate"><span class="pre">pathlib.PurePath</span></code></a> 对象），本类是这些对象的 <a class="reference internal" href="../glossary.html#term-abstract-base-class"><span class="xref std std-term">抽象基类</span></a>。</p>
<div class="versionadded">
<p><span class="versionmodified added">3.6 新版功能.</span></p>
</div>
<dl class="py method">
<dt id="os.PathLike.__fspath__">
<em class="property">abstractmethod </em><code class="sig-name descname">__fspath__</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#os.PathLike.__fspath__" title="永久链接至目标">¶</a></dt>
<dd><p>返回当前对象的文件系统表示。</p>
<p>这个方法只应该返回一个 <a class="reference internal" href="stdtypes.html#str" title="str"><code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code></a> 字符串或 <a class="reference internal" href="stdtypes.html#bytes" title="bytes"><code class="xref py py-class docutils literal notranslate"><span class="pre">bytes</span></code></a> 字节串，请优先选择 <a class="reference internal" href="stdtypes.html#str" title="str"><code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code></a> 字符串。</p>
</dd></dl>

</dd></dl>

<dl class="py function">
<dt id="os.getenv">
<code class="sig-prename descclassname">os.</code><code class="sig-name descname">getenv</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">key</span></em>, <em class="sig-param"><span class="n">default</span><span class="o">=</span><span class="default_value">None</span></em><span class="sig-paren">)</span><a class="headerlink" href="#os.getenv" title="永久链接至目标">¶</a></dt>
<dd><p>如果环境变量 <em>key</em> 存在，则返回它的值；如果不存在，则返回 <em>default</em> 。<em>key</em> , <em>default</em> 和结果都是字符串。注意，由于 <a class="reference internal" href="#os.getenv" title="os.getenv"><code class="xref py py-func docutils literal notranslate"><span class="pre">getenv()</span></code></a> 使用了 <a class="reference internal" href="#os.environ" title="os.environ"><code class="xref py py-data docutils literal notranslate"><span class="pre">os.environ</span></code></a> ，所以 <a class="reference internal" href="#os.getenv" title="os.getenv"><code class="xref py py-func docutils literal notranslate"><span class="pre">getenv()</span></code></a> 的映射也同样在导入时被捕获，并且该函数可能无法反映未来的环境变化。</p>
<p>在Unix系统上，键和值会使用 <a class="reference internal" href="sys.html#sys.getfilesystemencoding" title="sys.getfilesystemencoding"><code class="xref py py-func docutils literal notranslate"><span class="pre">sys.getfilesystemencoding()</span></code></a> 和``'surrogateescape'`` 错误处理进行解码。如果你想使用其他的编码，使用 <a class="reference internal" href="#os.getenvb" title="os.getenvb"><code class="xref py py-func docutils literal notranslate"><span class="pre">os.getenvb()</span></code></a>。</p>
<p class="availability"><a class="reference internal" href="intro.html#availability"><span class="std std-ref">可用性</span></a>: 大部分的Unix系统，Windows。</p>
</dd></dl>

<dl class="py function">
<dt id="os.getenvb">
<code class="sig-prename descclassname">os.</code><code class="sig-name descname">getenvb</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">key</span></em>, <em class="sig-param"><span class="n">default</span><span class="o">=</span><span class="default_value">None</span></em><span class="sig-paren">)</span><a class="headerlink" href="#os.getenvb" title="永久链接至目标">¶</a></dt>
<dd><p>如果环境变量 <em>key</em> 存在，则返回它的值；如果不存在，则返回 <em>default</em> 。<em>key</em> , <em>default</em> 和结果都是字节。注意，由于 <a class="reference internal" href="#os.getenvb" title="os.getenvb"><code class="xref py py-func docutils literal notranslate"><span class="pre">getenvb()</span></code></a> 使用了 <a class="reference internal" href="#os.environb" title="os.environb"><code class="xref py py-data docutils literal notranslate"><span class="pre">os.environb</span></code></a> ，所以 <a class="reference internal" href="#os.getenvb" title="os.getenvb"><code class="xref py py-func docutils literal notranslate"><span class="pre">getenvb()</span></code></a> 的映射也同样在导入时被捕获，并且该函数可能无法反映未来的环境变化。</p>
<p><a class="reference internal" href="#os.getenvb" title="os.getenvb"><code class="xref py py-func docutils literal notranslate"><span class="pre">getenvb()</span></code></a> 仅在 <a class="reference internal" href="#os.supports_bytes_environ" title="os.supports_bytes_environ"><code class="xref py py-data docutils literal notranslate"><span class="pre">supports_bytes_environ</span></code></a> 为 <code class="docutils literal notranslate"><span class="pre">True</span></code> 时可用。</p>
<p class="availability"><a class="reference internal" href="intro.html#availability"><span class="std std-ref">可用性</span></a>: 大部分的Unix系统。</p>
<div class="versionadded">
<p><span class="versionmodified added">3.2 新版功能.</span></p>
</div>
</dd></dl>

<dl class="py function">
<dt id="os.get_exec_path">
<code class="sig-prename descclassname">os.</code><code class="sig-name descname">get_exec_path</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">env</span><span class="o">=</span><span class="default_value">None</span></em><span class="sig-paren">)</span><a class="headerlink" href="#os.get_exec_path" title="永久链接至目标">¶</a></dt>
<dd><p>返回将用于搜索可执行文件的目录列表，与在外壳程序中启动一个进程时相似。指定的 <em>env</em> 应为用于搜索 PATH 的环境变量字典。默认情况下，当 <em>env</em> 为 <code class="docutils literal notranslate"><span class="pre">None</span></code> 时，将会使用 <a class="reference internal" href="#os.environ" title="os.environ"><code class="xref py py-data docutils literal notranslate"><span class="pre">environ</span></code></a> 。</p>
<div class="versionadded">
<p><span class="versionmodified added">3.2 新版功能.</span></p>
</div>
</dd></dl>

<dl class="py function">
<dt id="os.getegid">
<code class="sig-prename descclassname">os.</code><code class="sig-name descname">getegid</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#os.getegid" title="永久链接至目标">¶</a></dt>
<dd><p>返回当前进程的有效组ID。对应当前进程执行文件的 &quot;set id&quot; 位。</p>
<p class="availability"><a class="reference internal" href="intro.html#availability"><span class="std std-ref">可用性</span></a>: Unix。</p>
</dd></dl>

<dl class="py function">
<dt id="os.geteuid">
<code class="sig-prename descclassname">os.</code><code class="sig-name descname">geteuid</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#os.geteuid" title="永久链接至目标">¶</a></dt>
<dd><p id="index-7">返回当前进程的有效用户ID。</p>
<p class="availability"><a class="reference internal" href="intro.html#availability"><span class="std std-ref">可用性</span></a>: Unix。</p>
</dd></dl>

<dl class="py function">
<dt id="os.getgid">
<code class="sig-prename descclassname">os.</code><code class="sig-name descname">getgid</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#os.getgid" title="永久链接至目标">¶</a></dt>
<dd><p id="index-8">返回当前进程的实际组ID。</p>
<p class="availability"><a class="reference internal" href="intro.html#availability"><span class="std std-ref">可用性</span></a>: Unix。</p>
</dd></dl>

<dl class="py function">
<dt id="os.getgrouplist">
<code class="sig-prename descclassname">os.</code><code class="sig-name descname">getgrouplist</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">user</span></em>, <em class="sig-param"><span class="n">group</span></em><span class="sig-paren">)</span><a class="headerlink" href="#os.getgrouplist" title="永久链接至目标">¶</a></dt>
<dd><p>返回该用户所在的组 ID 列表。可能 <em>group</em> 参数没有在返回的列表中，实际上用户应该也是属于该 <em>group</em>。<em>group</em> 参数一般可以从储存账户信息的密码记录文件中找到。</p>
<p class="availability"><a class="reference internal" href="intro.html#availability"><span class="std std-ref">可用性</span></a>: Unix。</p>
<div class="versionadded">
<p><span class="versionmodified added">3.3 新版功能.</span></p>
</div>
</dd></dl>

<dl class="py function">
<dt id="os.getgroups">
<code class="sig-prename descclassname">os.</code><code class="sig-name descname">getgroups</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#os.getgroups" title="永久链接至目标">¶</a></dt>
<dd><p>返回当前进程关联的附加组ID列表</p>
<p class="availability"><a class="reference internal" href="intro.html#availability"><span class="std std-ref">可用性</span></a>: Unix。</p>
<div class="admonition note">
<p class="admonition-title">注解</p>
<p>在 macOS 中，<a class="reference internal" href="#os.getgroups" title="os.getgroups"><code class="xref py py-func docutils literal notranslate"><span class="pre">getgroups()</span></code></a> 会和其他 Unix 平台有所不同。 如果 Python 解释器是在 <code class="xref py py-const docutils literal notranslate"><span class="pre">10.5</span></code> 或更早版本中部署的，则 <a class="reference internal" href="#os.getgroups" title="os.getgroups"><code class="xref py py-func docutils literal notranslate"><span class="pre">getgroups()</span></code></a> 会返回与当前用户进程相关联的有效组 ID 列表；该列表受限于系统预定义的条目数量，通常为 16，并且在适当的权限下还可通过调用 <a class="reference internal" href="#os.setgroups" title="os.setgroups"><code class="xref py py-func docutils literal notranslate"><span class="pre">setgroups()</span></code></a> 来修改。 如果是在高于 <code class="xref py py-const docutils literal notranslate"><span class="pre">10.5</span></code> 的版本中部署的，则  <a class="reference internal" href="#os.getgroups" title="os.getgroups"><code class="xref py py-func docutils literal notranslate"><span class="pre">getgroups()</span></code></a> 会返回与进程的有效用户 ID 相关联的当前组访问列表；组访问列表可能会在进程的生命周期之内发生改变，它不会受对 <a class="reference internal" href="#os.setgroups" title="os.setgroups"><code class="xref py py-func docutils literal notranslate"><span class="pre">setgroups()</span></code></a> 的调用影响，且其长度也不被限制为 16。 部署目标值 <code class="xref py py-const docutils literal notranslate"><span class="pre">MACOSX_DEPLOYMENT_TARGET</span></code> 可以通过 <a class="reference internal" href="sysconfig.html#sysconfig.get_config_var" title="sysconfig.get_config_var"><code class="xref py py-func docutils literal notranslate"><span class="pre">sysconfig.get_config_var()</span></code></a> 来获取。</p>
</div>
</dd></dl>

<dl class="py function">
<dt id="os.getlogin">
<code class="sig-prename descclassname">os.</code><code class="sig-name descname">getlogin</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#os.getlogin" title="永久链接至目标">¶</a></dt>
<dd><p>返回通过控制终端进程进行登录的用户名。在多数情况下，使用 <a class="reference internal" href="getpass.html#getpass.getuser" title="getpass.getuser"><code class="xref py py-func docutils literal notranslate"><span class="pre">getpass.getuser()</span></code></a> 会更有效，因为后者会通过检查环境变量 <span class="target" id="index-85"></span><code class="xref std std-envvar docutils literal notranslate"><span class="pre">LOGNAME</span></code> 或 <span class="target" id="index-86"></span><code class="xref std std-envvar docutils literal notranslate"><span class="pre">USERNAME</span></code> 来查找用户，再由 <code class="docutils literal notranslate"><span class="pre">pwd.getpwuid(os.getuid())[0]</span></code> 来获取当前用户 ID 的登录名。</p>
<p class="availability"><a class="reference internal" href="intro.html#availability"><span class="std std-ref">可用性</span></a>: Unix, Windows。</p>
</dd></dl>

<dl class="py function">
<dt id="os.getpgid">
<code class="sig-prename descclassname">os.</code><code class="sig-name descname">getpgid</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">pid</span></em><span class="sig-paren">)</span><a class="headerlink" href="#os.getpgid" title="永久链接至目标">¶</a></dt>
<dd><p>根据进程id <em>pid</em> 返回进程的组 ID 列表。如果 <em>pid</em> 为 0，则返回当前进程的进程组 ID 列表</p>
<p class="availability"><a class="reference internal" href="intro.html#availability"><span class="std std-ref">可用性</span></a>: Unix。</p>
</dd></dl>

<dl class="py function">
<dt id="os.getpgrp">
<code class="sig-prename descclassname">os.</code><code class="sig-name descname">getpgrp</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#os.getpgrp" title="永久链接至目标">¶</a></dt>
<dd><p id="index-11">返回当时进程组的ID</p>
<p class="availability"><a class="reference internal" href="intro.html#availability"><span class="std std-ref">可用性</span></a>: Unix。</p>
</dd></dl>

<dl class="py function">
<dt id="os.getpid">
<code class="sig-prename descclassname">os.</code><code class="sig-name descname">getpid</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#os.getpid" title="永久链接至目标">¶</a></dt>
<dd><p id="index-12">返回当前进程ID</p>
</dd></dl>

<dl class="py function">
<dt id="os.getppid">
<code class="sig-prename descclassname">os.</code><code class="sig-name descname">getppid</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#os.getppid" title="永久链接至目标">¶</a></dt>
<dd><p id="index-13">返回父进程ID。当父进程已经结束，在Unix中返回的ID是初始进程(1)中的一个，在Windows中仍然是同一个进程ID，该进程ID有可能已经被进行进程所占用。</p>
<p class="availability"><a class="reference internal" href="intro.html#availability"><span class="std std-ref">可用性</span></a>: Unix, Windows。</p>
<div class="versionchanged">
<p><span class="versionmodified changed">在 3.2 版更改: </span>添加WIndows的支持。</p>
</div>
</dd></dl>

<dl class="py function">
<dt id="os.getpriority">
<code class="sig-prename descclassname">os.</code><code class="sig-name descname">getpriority</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">which</span></em>, <em class="sig-param"><span class="n">who</span></em><span class="sig-paren">)</span><a class="headerlink" href="#os.getpriority" title="永久链接至目标">¶</a></dt>
<dd><p id="index-14">获取程序调度优先级。<em>which</em> 参数值可以是 <a class="reference internal" href="#os.PRIO_PROCESS" title="os.PRIO_PROCESS"><code class="xref py py-const docutils literal notranslate"><span class="pre">PRIO_PROCESS</span></code></a>，<a class="reference internal" href="#os.PRIO_PGRP" title="os.PRIO_PGRP"><code class="xref py py-const docutils literal notranslate"><span class="pre">PRIO_PGRP</span></code></a>，或 <a class="reference internal" href="#os.PRIO_USER" title="os.PRIO_USER"><code class="xref py py-const docutils literal notranslate"><span class="pre">PRIO_USER</span></code></a> 中的一个，<em>who</em> 是相对于 <em>which</em> (<a class="reference internal" href="#os.PRIO_PROCESS" title="os.PRIO_PROCESS"><code class="xref py py-const docutils literal notranslate"><span class="pre">PRIO_PROCESS</span></code></a> 的进程标识符，<a class="reference internal" href="#os.PRIO_PGRP" title="os.PRIO_PGRP"><code class="xref py py-const docutils literal notranslate"><span class="pre">PRIO_PGRP</span></code></a> 的进程组标识符和 <a class="reference internal" href="#os.PRIO_USER" title="os.PRIO_USER"><code class="xref py py-const docutils literal notranslate"><span class="pre">PRIO_USER</span></code></a> 的用户ID)。当 <em>who</em> 为 0 时（分别）表示调用的进程，调用进程的进程组或调用进程所属的真实用户 ID。</p>
<p class="availability"><a class="reference internal" href="intro.html#availability"><span class="std std-ref">可用性</span></a>: Unix。</p>
<div class="versionadded">
<p><span class="versionmodified added">3.3 新版功能.</span></p>
</div>
</dd></dl>

<dl class="py data">
<dt id="os.PRIO_PROCESS">
<code class="sig-prename descclassname">os.</code><code class="sig-name descname">PRIO_PROCESS</code><a class="headerlink" href="#os.PRIO_PROCESS" title="永久链接至目标">¶</a></dt>
<dt id="os.PRIO_PGRP">
<code class="sig-prename descclassname">os.</code><code class="sig-name descname">PRIO_PGRP</code><a class="headerlink" href="#os.PRIO_PGRP" title="永久链接至目标">¶</a></dt>
<dt id="os.PRIO_USER">
<code class="sig-prename descclassname">os.</code><code class="sig-name descname">PRIO_USER</code><a class="headerlink" href="#os.PRIO_USER" title="永久链接至目标">¶</a></dt>
<dd><p>函数 <a class="reference internal" href="#os.getpriority" title="os.getpriority"><code class="xref py py-func docutils literal notranslate"><span class="pre">getpriority()</span></code></a> 和 <a class="reference internal" href="#os.setpriority" title="os.setpriority"><code class="xref py py-func docutils literal notranslate"><span class="pre">setpriority()</span></code></a> 的参数。</p>
<p class="availability"><a class="reference internal" href="intro.html#availability"><span class="std std-ref">可用性</span></a>: Unix。</p>
<div class="versionadded">
<p><span class="versionmodified added">3.3 新版功能.</span></p>
</div>
</dd></dl>

<dl class="py function">
<dt id="os.getresuid">
<code class="sig-prename descclassname">os.</code><code class="sig-name descname">getresuid</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#os.getresuid" title="永久链接至目标">¶</a></dt>
<dd><p>返回一个由 (ruid, euid, suid) 所组成的元组，分别表示当前进程的真实用户ID，有效用户ID和暂存用户ID。</p>
<p class="availability"><a class="reference internal" href="intro.html#availability"><span class="std std-ref">可用性</span></a>: Unix。</p>
<div class="versionadded">
<p><span class="versionmodified added">3.2 新版功能.</span></p>
</div>
</dd></dl>

<dl class="py function">
<dt id="os.getresgid">
<code class="sig-prename descclassname">os.</code><code class="sig-name descname">getresgid</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#os.getresgid" title="永久链接至目标">¶</a></dt>
<dd><p>返回一个由 (rgid, egid, sgid) 所组成的元组，分别表示当前进程的真实组ID，有效组ID和暂存组ID。</p>
<p class="availability"><a class="reference internal" href="intro.html#availability"><span class="std std-ref">可用性</span></a>: Unix。</p>
<div class="versionadded">
<p><span class="versionmodified added">3.2 新版功能.</span></p>
</div>
</dd></dl>

<dl class="py function">
<dt id="os.getuid">
<code class="sig-prename descclassname">os.</code><code class="sig-name descname">getuid</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#os.getuid" title="永久链接至目标">¶</a></dt>
<dd><p id="index-15">返回当前进程的真实用户ID。</p>
<p class="availability"><a class="reference internal" href="intro.html#availability"><span class="std std-ref">可用性</span></a>: Unix。</p>
</dd></dl>

<dl class="py function">
<dt id="os.initgroups">
<code class="sig-prename descclassname">os.</code><code class="sig-name descname">initgroups</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">username</span></em>, <em class="sig-param"><span class="n">gid</span></em><span class="sig-paren">)</span><a class="headerlink" href="#os.initgroups" title="永久链接至目标">¶</a></dt>
<dd><p>调用系统 initgroups()，使用指定用户所在的所有值来初始化组访问列表，包括指定的组ID。</p>
<p class="availability"><a class="reference internal" href="intro.html#availability"><span class="std std-ref">可用性</span></a>: Unix。</p>
<div class="versionadded">
<p><span class="versionmodified added">3.2 新版功能.</span></p>
</div>
</dd></dl>

<dl class="py function">
<dt id="os.putenv">
<code class="sig-prename descclassname">os.</code><code class="sig-name descname">putenv</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">key</span></em>, <em class="sig-param"><span class="n">value</span></em><span class="sig-paren">)</span><a class="headerlink" href="#os.putenv" title="永久链接至目标">¶</a></dt>
<dd><p id="index-16">将名为 <em>key</em> 的环境变量值设置为 <em>value</em>。该变量名修改会影响由 <a class="reference internal" href="#os.system" title="os.system"><code class="xref py py-func docutils literal notranslate"><span class="pre">os.system()</span></code></a>， <a class="reference internal" href="#os.popen" title="os.popen"><code class="xref py py-func docutils literal notranslate"><span class="pre">popen()</span></code></a> ，<a class="reference internal" href="#os.fork" title="os.fork"><code class="xref py py-func docutils literal notranslate"><span class="pre">fork()</span></code></a> 和 <a class="reference internal" href="#os.execv" title="os.execv"><code class="xref py py-func docutils literal notranslate"><span class="pre">execv()</span></code></a> 发起的子进程。</p>
<p>对 <a class="reference internal" href="#os.environ" title="os.environ"><code class="xref py py-data docutils literal notranslate"><span class="pre">os.environ</span></code></a> 中的项目的赋值会自动转化为对 <a class="reference internal" href="#os.putenv" title="os.putenv"><code class="xref py py-func docutils literal notranslate"><span class="pre">putenv()</span></code></a> 的相应调用；然而，对 <a class="reference internal" href="#os.putenv" title="os.putenv"><code class="xref py py-func docutils literal notranslate"><span class="pre">putenv()</span></code></a> 的调用并不更新 <a class="reference internal" href="#os.environ" title="os.environ"><code class="xref py py-data docutils literal notranslate"><span class="pre">os.environ</span></code></a> ，所以实际上最好是赋值到 <a class="reference internal" href="#os.environ" title="os.environ"><code class="xref py py-data docutils literal notranslate"><span class="pre">os.environ</span></code></a> 的项目。这也适用于 <a class="reference internal" href="#os.getenv" title="os.getenv"><code class="xref py py-func docutils literal notranslate"><span class="pre">getenv()</span></code></a> 和 <a class="reference internal" href="#os.getenvb" title="os.getenvb"><code class="xref py py-func docutils literal notranslate"><span class="pre">getenvb()</span></code></a> ，它们分别使用 <a class="reference internal" href="#os.environ" title="os.environ"><code class="xref py py-data docutils literal notranslate"><span class="pre">os.environ</span></code></a> 和 <a class="reference internal" href="#os.environb" title="os.environb"><code class="xref py py-data docutils literal notranslate"><span class="pre">os.environb</span></code></a> 在它们的实现中。</p>
<div class="admonition note">
<p class="admonition-title">注解</p>
<p>在某些平台上，包括 FreeBSD 和 macOS，设置 <code class="docutils literal notranslate"><span class="pre">environ</span></code> 可能导致内存泄漏。 请参阅 <code class="xref c c-func docutils literal notranslate"><span class="pre">putenv()</span></code> 的系统文档。</p>
</div>
<p class="audit-hook">引发一个 <a class="reference internal" href="sys.html#auditing"><span class="std std-ref">审计事件</span></a> <code class="docutils literal notranslate"><span class="pre">os.putenv</span></code>，附带参数 <code class="docutils literal notranslate"><span class="pre">key</span></code>, <code class="docutils literal notranslate"><span class="pre">value</span></code>。</p>
<div class="versionchanged">
<p><span class="versionmodified changed">在 3.9 版更改: </span>该函数现在总是可用。</p>
</div>
</dd></dl>

<dl class="py function">
<dt id="os.setegid">
<code class="sig-prename descclassname">os.</code><code class="sig-name descname">setegid</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">egid</span></em><span class="sig-paren">)</span><a class="headerlink" href="#os.setegid" title="永久链接至目标">¶</a></dt>
<dd><p>设置当前进程的有效组ID。</p>
<p class="availability"><a class="reference internal" href="intro.html#availability"><span class="std std-ref">可用性</span></a>: Unix。</p>
</dd></dl>

<dl class="py function">
<dt id="os.seteuid">
<code class="sig-prename descclassname">os.</code><code class="sig-name descname">seteuid</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">euid</span></em><span class="sig-paren">)</span><a class="headerlink" href="#os.seteuid" title="永久链接至目标">¶</a></dt>
<dd><p>设置当前进程的有效用户ID。</p>
<p class="availability"><a class="reference internal" href="intro.html#availability"><span class="std std-ref">可用性</span></a>: Unix。</p>
</dd></dl>

<dl class="py function">
<dt id="os.setgid">
<code class="sig-prename descclassname">os.</code><code class="sig-name descname">setgid</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">gid</span></em><span class="sig-paren">)</span><a class="headerlink" href="#os.setgid" title="永久链接至目标">¶</a></dt>
<dd><p>设置当前进程的组ID。</p>
<p class="availability"><a class="reference internal" href="intro.html#availability"><span class="std std-ref">可用性</span></a>: Unix。</p>
</dd></dl>

<dl class="py function">
<dt id="os.setgroups">
<code class="sig-prename descclassname">os.</code><code class="sig-name descname">setgroups</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">groups</span></em><span class="sig-paren">)</span><a class="headerlink" href="#os.setgroups" title="永久链接至目标">¶</a></dt>
<dd><p>将 <em>group</em> 参数值设置为与当进程相关联的附加组ID列表。<em>group</em> 参数必须为一个序列，每个元素应为每个组的数字ID。该操作通常只适用于超级用户。</p>
<p class="availability"><a class="reference internal" href="intro.html#availability"><span class="std std-ref">可用性</span></a>: Unix。</p>
<div class="admonition note">
<p class="admonition-title">注解</p>
<p>在 macOS 中，<em>groups</em> 的长度不能超过系统定义的最大有效组 ID 数量，通常为 16。 对于未返回与调用 setgroups() 产生的相同组列表的情况，请参阅 <a class="reference internal" href="#os.getgroups" title="os.getgroups"><code class="xref py py-func docutils literal notranslate"><span class="pre">getgroups()</span></code></a> 的文档。</p>
</div>
</dd></dl>

<dl class="py function">
<dt id="os.setpgrp">
<code class="sig-prename descclassname">os.</code><code class="sig-name descname">setpgrp</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#os.setpgrp" title="永久链接至目标">¶</a></dt>
<dd><p>根据已实现的版本（如果有）来调用系统 <code class="xref c c-func docutils literal notranslate"><span class="pre">setpgrp()</span></code> 或 <code class="docutils literal notranslate"><span class="pre">setpgrp(0,</span> <span class="pre">0)</span></code> 。相关说明，请参考 Unix 手册。</p>
<p class="availability"><a class="reference internal" href="intro.html#availability"><span class="std std-ref">可用性</span></a>: Unix。</p>
</dd></dl>

<dl class="py function">
<dt id="os.setpgid">
<code class="sig-prename descclassname">os.</code><code class="sig-name descname">setpgid</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">pid</span></em>, <em class="sig-param"><span class="n">pgrp</span></em><span class="sig-paren">)</span><a class="headerlink" href="#os.setpgid" title="永久链接至目标">¶</a></dt>
<dd><p>使用系统调用 <code class="xref c c-func docutils literal notranslate"><span class="pre">setpgid()</span></code>，将 <em>pid</em> 对应进程的组ID设置为 <em>pgrp</em>。相关说明，请参考 Unix 手册。</p>
<p class="availability"><a class="reference internal" href="intro.html#availability"><span class="std std-ref">可用性</span></a>: Unix。</p>
</dd></dl>

<dl class="py function">
<dt id="os.setpriority">
<code class="sig-prename descclassname">os.</code><code class="sig-name descname">setpriority</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">which</span></em>, <em class="sig-param"><span class="n">who</span></em>, <em class="sig-param"><span class="n">priority</span></em><span class="sig-paren">)</span><a class="headerlink" href="#os.setpriority" title="永久链接至目标">¶</a></dt>
<dd><p id="index-17">设置程序调度优先级。 <em>which</em> 的值为 <a class="reference internal" href="#os.PRIO_PROCESS" title="os.PRIO_PROCESS"><code class="xref py py-const docutils literal notranslate"><span class="pre">PRIO_PROCESS</span></code></a>, <a class="reference internal" href="#os.PRIO_PGRP" title="os.PRIO_PGRP"><code class="xref py py-const docutils literal notranslate"><span class="pre">PRIO_PGRP</span></code></a> 或 <a class="reference internal" href="#os.PRIO_USER" title="os.PRIO_USER"><code class="xref py py-const docutils literal notranslate"><span class="pre">PRIO_USER</span></code></a> 之一，而 <em>who</em> 会相对于 <em>which</em> (<a class="reference internal" href="#os.PRIO_PROCESS" title="os.PRIO_PROCESS"><code class="xref py py-const docutils literal notranslate"><span class="pre">PRIO_PROCESS</span></code></a> 的进程标识符, <a class="reference internal" href="#os.PRIO_PGRP" title="os.PRIO_PGRP"><code class="xref py py-const docutils literal notranslate"><span class="pre">PRIO_PGRP</span></code></a> 的进程组标识符和 <a class="reference internal" href="#os.PRIO_USER" title="os.PRIO_USER"><code class="xref py py-const docutils literal notranslate"><span class="pre">PRIO_USER</span></code></a> 的用户 ID) 被解析。 <em>who</em> 值为零 (分别) 表示调用进程，调用进程的进程组或调用进程的真实用户 ID。 <em>priority</em> 是范围在 -20 至 19 的值。 默认优先级为 0；较小的优先级数值会更优先被调度。</p>
<p class="availability"><a class="reference internal" href="intro.html#availability"><span class="std std-ref">可用性</span></a>: Unix。</p>
<div class="versionadded">
<p><span class="versionmodified added">3.3 新版功能.</span></p>
</div>
</dd></dl>

<dl class="py function">
<dt id="os.setregid">
<code class="sig-prename descclassname">os.</code><code class="sig-name descname">setregid</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">rgid</span></em>, <em class="sig-param"><span class="n">egid</span></em><span class="sig-paren">)</span><a class="headerlink" href="#os.setregid" title="永久链接至目标">¶</a></dt>
<dd><p>设置当前进程的真实和有效组ID。</p>
<p class="availability"><a class="reference internal" href="intro.html#availability"><span class="std std-ref">可用性</span></a>: Unix。</p>
</dd></dl>

<dl class="py function">
<dt id="os.setresgid">
<code class="sig-prename descclassname">os.</code><code class="sig-name descname">setresgid</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">rgid</span></em>, <em class="sig-param"><span class="n">egid</span></em>, <em class="sig-param"><span class="n">sgid</span></em><span class="sig-paren">)</span><a class="headerlink" href="#os.setresgid" title="永久链接至目标">¶</a></dt>
<dd><p>设置当前进程的真实，有效和暂存组ID。</p>
<p class="availability"><a class="reference internal" href="intro.html#availability"><span class="std std-ref">可用性</span></a>: Unix。</p>
<div class="versionadded">
<p><span class="versionmodified added">3.2 新版功能.</span></p>
</div>
</dd></dl>

<dl class="py function">
<dt id="os.setresuid">
<code class="sig-prename descclassname">os.</code><code class="sig-name descname">setresuid</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">ruid</span></em>, <em class="sig-param"><span class="n">euid</span></em>, <em class="sig-param"><span class="n">suid</span></em><span class="sig-paren">)</span><a class="headerlink" href="#os.setresuid" title="永久链接至目标">¶</a></dt>
<dd><p>设置当前进程的真实，有效和暂存用户ID。</p>
<p class="availability"><a class="reference internal" href="intro.html#availability"><span class="std std-ref">可用性</span></a>: Unix。</p>
<div class="versionadded">
<p><span class="versionmodified added">3.2 新版功能.</span></p>
</div>
</dd></dl>

<dl class="py function">
<dt id="os.setreuid">
<code class="sig-prename descclassname">os.</code><code class="sig-name descname">setreuid</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">ruid</span></em>, <em class="sig-param"><span class="n">euid</span></em><span class="sig-paren">)</span><a class="headerlink" href="#os.setreuid" title="永久链接至目标">¶</a></dt>
<dd><p>设置当前进程的真实和有效用户ID。</p>
<p class="availability"><a class="reference internal" href="intro.html#availability"><span class="std std-ref">可用性</span></a>: Unix。</p>
</dd></dl>

<dl class="py function">
<dt id="os.getsid">
<code class="sig-prename descclassname">os.</code><code class="sig-name descname">getsid</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">pid</span></em><span class="sig-paren">)</span><a class="headerlink" href="#os.getsid" title="永久链接至目标">¶</a></dt>
<dd><p>调用系统调用 <code class="xref c c-func docutils literal notranslate"><span class="pre">getsid()</span></code>。相关说明，请参考 Unix 手册。</p>
<p class="availability"><a class="reference internal" href="intro.html#availability"><span class="std std-ref">可用性</span></a>: Unix。</p>
</dd></dl>

<dl class="py function">
<dt id="os.setsid">
<code class="sig-prename descclassname">os.</code><code class="sig-name descname">setsid</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#os.setsid" title="永久链接至目标">¶</a></dt>
<dd><p>使用系统调用 <code class="xref c c-func docutils literal notranslate"><span class="pre">getsid()</span></code>。相关说明，请参考 Unix 手册。</p>
<p class="availability"><a class="reference internal" href="intro.html#availability"><span class="std std-ref">可用性</span></a>: Unix。</p>
</dd></dl>

<dl class="py function">
<dt id="os.setuid">
<code class="sig-prename descclassname">os.</code><code class="sig-name descname">setuid</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">uid</span></em><span class="sig-paren">)</span><a class="headerlink" href="#os.setuid" title="永久链接至目标">¶</a></dt>
<dd><p id="index-18">设置当前进程的用户ID。</p>
<p class="availability"><a class="reference internal" href="intro.html#availability"><span class="std std-ref">可用性</span></a>: Unix。</p>
</dd></dl>

<dl class="py function">
<dt id="os.strerror">
<code class="sig-prename descclassname">os.</code><code class="sig-name descname">strerror</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">code</span></em><span class="sig-paren">)</span><a class="headerlink" href="#os.strerror" title="永久链接至目标">¶</a></dt>
<dd><p>根据 <em>code</em> 中的错误码返回错误消息。 在某些平台上当给出未知错误码时 <code class="xref c c-func docutils literal notranslate"><span class="pre">strerror()</span></code> 将返回 <code class="docutils literal notranslate"><span class="pre">NULL</span></code> 并会引发 <a class="reference internal" href="exceptions.html#ValueError" title="ValueError"><code class="xref py py-exc docutils literal notranslate"><span class="pre">ValueError</span></code></a>。</p>
</dd></dl>

<dl class="py data">
<dt id="os.supports_bytes_environ">
<code class="sig-prename descclassname">os.</code><code class="sig-name descname">supports_bytes_environ</code><a class="headerlink" href="#os.supports_bytes_environ" title="永久链接至目标">¶</a></dt>
<dd><p>如果操作系统上原生环境类型是字节型则为 <code class="docutils literal notranslate"><span class="pre">True</span></code> (例如在 Windows 上为 <code class="docutils literal notranslate"><span class="pre">False</span></code>)。</p>
<div class="versionadded">
<p><span class="versionmodified added">3.2 新版功能.</span></p>
</div>
</dd></dl>

<dl class="py function">
<dt id="os.umask">
<code class="sig-prename descclassname">os.</code><code class="sig-name descname">umask</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">mask</span></em><span class="sig-paren">)</span><a class="headerlink" href="#os.umask" title="永久链接至目标">¶</a></dt>
<dd><p>设定当前数值掩码并返回之前的掩码。</p>
</dd></dl>

<dl class="py function">
<dt id="os.uname">
<code class="sig-prename descclassname">os.</code><code class="sig-name descname">uname</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#os.uname" title="永久链接至目标">¶</a></dt>
<dd><p id="index-19">返回当前操作系统的识别信息。返回值是一个有5个属性的对象：</p>
<ul class="simple">
<li><p><code class="xref py py-attr docutils literal notranslate"><span class="pre">sysname</span></code> - 操作系统名</p></li>
<li><p><code class="xref py py-attr docutils literal notranslate"><span class="pre">nodename</span></code> - 机器在网络上的名称（需要先设定）</p></li>
<li><p><code class="xref py py-attr docutils literal notranslate"><span class="pre">release</span></code> - 操作系统发行信息</p></li>
<li><p><code class="xref py py-attr docutils literal notranslate"><span class="pre">version</span></code> - 操作系统版本信息</p></li>
<li><p><code class="xref py py-attr docutils literal notranslate"><span class="pre">machine</span></code> - 硬件标识符</p></li>
</ul>
<p>为了向后兼容，该对象也是可迭代的，像是一个按照 <code class="xref py py-attr docutils literal notranslate"><span class="pre">sysname</span></code>，<code class="xref py py-attr docutils literal notranslate"><span class="pre">nodename</span></code>，<code class="xref py py-attr docutils literal notranslate"><span class="pre">release</span></code>，<code class="xref py py-attr docutils literal notranslate"><span class="pre">version</span></code>，和 <code class="xref py py-attr docutils literal notranslate"><span class="pre">machine</span></code> 顺序组成的元组。</p>
<p>有些系统会将 <code class="xref py py-attr docutils literal notranslate"><span class="pre">nodename</span></code> 截短为 8 个字符或截短至前缀部分；获取主机名的一个更好方式是 <a class="reference internal" href="socket.html#socket.gethostname" title="socket.gethostname"><code class="xref py py-func docutils literal notranslate"><span class="pre">socket.gethostname()</span></code></a>  或甚至可以用 <code class="docutils literal notranslate"><span class="pre">socket.gethostbyaddr(socket.gethostname())</span></code>。</p>
<p class="availability"><a class="reference internal" href="intro.html#availability"><span class="std std-ref">可用性</span></a>: 较新的 Unix 版本。</p>
<div class="versionchanged">
<p><span class="versionmodified changed">在 3.3 版更改: </span>返回结果的类型由元组变成一个类似元组的对象，同时具有命名的属性。</p>
</div>
</dd></dl>

<dl class="py function">
<dt id="os.unsetenv">
<code class="sig-prename descclassname">os.</code><code class="sig-name descname">unsetenv</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">key</span></em><span class="sig-paren">)</span><a class="headerlink" href="#os.unsetenv" title="永久链接至目标">¶</a></dt>
<dd><p id="index-20">取消设置（删除）名为 <em>key</em> 的环境变量。变量名的改变会影响由 <a class="reference internal" href="#os.system" title="os.system"><code class="xref py py-func docutils literal notranslate"><span class="pre">os.system()</span></code></a>，<a class="reference internal" href="#os.popen" title="os.popen"><code class="xref py py-func docutils literal notranslate"><span class="pre">popen()</span></code></a>，<a class="reference internal" href="#os.fork" title="os.fork"><code class="xref py py-func docutils literal notranslate"><span class="pre">fork()</span></code></a> 和 <a class="reference internal" href="#os.execv" title="os.execv"><code class="xref py py-func docutils literal notranslate"><span class="pre">execv()</span></code></a> 触发的子进程。</p>
<p>删除 <a class="reference internal" href="#os.environ" title="os.environ"><code class="xref py py-data docutils literal notranslate"><span class="pre">os.environ</span></code></a> 中的项目会自动转化为对 <a class="reference internal" href="#os.unsetenv" title="os.unsetenv"><code class="xref py py-func docutils literal notranslate"><span class="pre">unsetenv()</span></code></a> 的相应调用；然而，对 <a class="reference internal" href="#os.unsetenv" title="os.unsetenv"><code class="xref py py-func docutils literal notranslate"><span class="pre">unsetenv()</span></code></a> 的调用并不更新 <a class="reference internal" href="#os.environ" title="os.environ"><code class="xref py py-data docutils literal notranslate"><span class="pre">os.environ</span></code></a> ，所以实际上最好是删除 <a class="reference internal" href="#os.environ" title="os.environ"><code class="xref py py-data docutils literal notranslate"><span class="pre">os.environ</span></code></a> 的项目。</p>
<p class="audit-hook">引发一个 <a class="reference internal" href="sys.html#auditing"><span class="std std-ref">审计事件</span></a> <code class="docutils literal notranslate"><span class="pre">os.unsetenv</span></code>，附带参数 <code class="docutils literal notranslate"><span class="pre">key</span></code>。</p>
<div class="versionchanged">
<p><span class="versionmodified changed">在 3.9 版更改: </span>该函数现在总是可用，并且在 Windows 上也可用。</p>
</div>
</dd></dl>

</section>
<section id="file-object-creation">
<span id="os-newstreams"></span><h2>创建文件对象<a class="headerlink" href="#file-object-creation" title="永久链接至标题">¶</a></h2>
<p>这些函数创建新的 <a class="reference internal" href="../glossary.html#term-file-object"><span class="xref std std-term">file objects</span></a> 。（参见 <a class="reference internal" href="#os.open" title="os.open"><code class="xref py py-func docutils literal notranslate"><span class="pre">open()</span></code></a> 以获取打开文件描述符的相关信息。）</p>
<dl class="py function">
<dt id="os.fdopen">
<code class="sig-prename descclassname">os.</code><code class="sig-name descname">fdopen</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">fd</span></em>, <em class="sig-param"><span class="o">*</span><span class="n">args</span></em>, <em class="sig-param"><span class="o">**</span><span class="n">kwargs</span></em><span class="sig-paren">)</span><a class="headerlink" href="#os.fdopen" title="永久链接至目标">¶</a></dt>
<dd><p>返回打开文件描述符 <em>fd</em> 对应文件的对象。类似内建 <a class="reference internal" href="functions.html#open" title="open"><code class="xref py py-func docutils literal notranslate"><span class="pre">open()</span></code></a> 函数，二者接受同样的参数。不同之处在于 <a class="reference internal" href="#os.fdopen" title="os.fdopen"><code class="xref py py-func docutils literal notranslate"><span class="pre">fdopen()</span></code></a> 第一个参数应该为整数。</p>
</dd></dl>

</section>
<section id="file-descriptor-operations">
<span id="os-fd-ops"></span><h2>文件描述符操作<a class="headerlink" href="#file-descriptor-operations" title="永久链接至标题">¶</a></h2>
<p>这些函数对文件描述符所引用的 I/O 流进行操作。</p>
<p>文件描述符是一些小的整数，对应于当前进程所打开的文件。例如，标准输入的文件描述符通常是0，标准输出是1，标准错误是2。之后被进程打开的文件的文件描述符会被依次指定为3，4，5等。“文件描述符”这个词有点误导性，在 Unix 平台中套接字和管道也被文件描述符所引用。</p>
<p>当需要时，可以用 <a class="reference internal" href="io.html#io.IOBase.fileno" title="io.IOBase.fileno"><code class="xref py py-meth docutils literal notranslate"><span class="pre">fileno()</span></code></a> 可以获得 <a class="reference internal" href="../glossary.html#term-file-object"><span class="xref std std-term">file object</span></a> 所对应的文件描述符。需要注意的是，直接使用文件描述符会绕过文件对象的方法，会忽略如数据内部缓冲等情况。</p>
<dl class="py function">
<dt id="os.close">
<code class="sig-prename descclassname">os.</code><code class="sig-name descname">close</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">fd</span></em><span class="sig-paren">)</span><a class="headerlink" href="#os.close" title="永久链接至目标">¶</a></dt>
<dd><p>关闭文件描述符 <em>fd</em>。</p>
<div class="admonition note">
<p class="admonition-title">注解</p>
<p>该功能适用于低级 I/O 操作，必须用于 <a class="reference internal" href="#os.open" title="os.open"><code class="xref py py-func docutils literal notranslate"><span class="pre">os.open()</span></code></a> 或 <a class="reference internal" href="#os.pipe" title="os.pipe"><code class="xref py py-func docutils literal notranslate"><span class="pre">pipe()</span></code></a> 返回的文件描述符。若要关闭由内建函数 <a class="reference internal" href="functions.html#open" title="open"><code class="xref py py-func docutils literal notranslate"><span class="pre">open()</span></code></a>、<a class="reference internal" href="#os.popen" title="os.popen"><code class="xref py py-func docutils literal notranslate"><span class="pre">popen()</span></code></a> 或 <a class="reference internal" href="#os.fdopen" title="os.fdopen"><code class="xref py py-func docutils literal notranslate"><span class="pre">fdopen()</span></code></a> 返回的 &quot;文件对象&quot;，则应使用其相应的 <a class="reference internal" href="io.html#io.IOBase.close" title="io.IOBase.close"><code class="xref py py-meth docutils literal notranslate"><span class="pre">close()</span></code></a> 方法。</p>
</div>
</dd></dl>

<dl class="py function">
<dt id="os.closerange">
<code class="sig-prename descclassname">os.</code><code class="sig-name descname">closerange</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">fd_low</span></em>, <em class="sig-param"><span class="n">fd_high</span></em><span class="sig-paren">)</span><a class="headerlink" href="#os.closerange" title="永久链接至目标">¶</a></dt>
<dd><p>关闭从 <em>fd_low</em> （包括）到 <em>fd_high</em> （排除）间的文件描述符，并忽略错误。类似（但快于）:</p>
<div class="highlight-python3 notranslate"><div class="highlight"><pre><span></span><span class="k">for</span> <span class="n">fd</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">fd_low</span><span class="p">,</span> <span class="n">fd_high</span><span class="p">):</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="n">os</span><span class="o">.</span><span class="n">close</span><span class="p">(</span><span class="n">fd</span><span class="p">)</span>
    <span class="k">except</span> <span class="ne">OSError</span><span class="p">:</span>
        <span class="k">pass</span>
</pre></div>
</div>
</dd></dl>

<dl class="py function">
<dt id="os.copy_file_range">
<code class="sig-prename descclassname">os.</code><code class="sig-name descname">copy_file_range</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">src</span></em>, <em class="sig-param"><span class="n">dst</span></em>, <em class="sig-param"><span class="n">count</span></em>, <em class="sig-param"><span class="n">offset_src</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">offset_dst</span><span class="o">=</span><span class="default_value">None</span></em><span class="sig-paren">)</span><a class="headerlink" href="#os.copy_file_range" title="永久链接至目标">¶</a></dt>
<dd><p>从文件描述符 <em>src</em> 复制 <em>count</em> 字节，从偏移量 <em>offset_src</em> 开始读取，到文件描述符 <em>dst</em>，从偏移量 <em>offset_dst</em> 开始写入。如果 <em>offset_src</em> 为 None，则 <em>src</em> 将从当前位置开始读取；<em>offset_dst</em> 同理。<em>src</em> 和 <em>dst</em> 指向的文件必须处于相同的文件系统，否则将会抛出一个 <a class="reference internal" href="exceptions.html#OSError.errno" title="OSError.errno"><code class="xref py py-attr docutils literal notranslate"><span class="pre">errno</span></code></a> 被设为 <a class="reference internal" href="errno.html#errno.EXDEV" title="errno.EXDEV"><code class="xref py py-data docutils literal notranslate"><span class="pre">errno.EXDEV</span></code></a> 的 <a class="reference internal" href="exceptions.html#OSError" title="OSError"><code class="xref py py-exc docutils literal notranslate"><span class="pre">OSError</span></code></a> 。</p>
<p>此复制的完成没有额外的从内核到用户空间再回到内核的数据转移花费。另外，一些文件系统可能实现额外的优化。完成复制就如同打开两个二进制文件一样。</p>
<p>返回值是复制的字节的数目。这可能低于需求的数目。</p>
<p class="availability"><a class="reference internal" href="intro.html#availability"><span class="std std-ref">Availability</span></a>: Linux kernel &gt;= 4.5 或 glibc &gt;= 2.27。</p>
<div class="versionadded">
<p><span class="versionmodified added">3.8 新版功能.</span></p>
</div>
</dd></dl>

<dl class="py function">
<dt id="os.device_encoding">
<code class="sig-prename descclassname">os.</code><code class="sig-name descname">device_encoding</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">fd</span></em><span class="sig-paren">)</span><a class="headerlink" href="#os.device_encoding" title="永久链接至目标">¶</a></dt>
<dd><p>如果连接到终端，则返回一个与 <em>fd</em> 关联的设备描述字符，否则返回 <a class="reference internal" href="constants.html#None" title="None"><code class="xref py py-const docutils literal notranslate"><span class="pre">None</span></code></a>。</p>
<p>在 Unix 上，如果启用了 <a class="reference internal" href="#utf8-mode"><span class="std std-ref">Python UTF-8 模式</span></a>，则返回 <code class="docutils literal notranslate"><span class="pre">'UTF-8'</span></code> 而不是设备的编码格式。</p>
<div class="versionchanged">
<p><span class="versionmodified changed">在 3.10 版更改: </span>在 Unix 上，该函数现在实现了 Python UTF-8 模式。</p>
</div>
</dd></dl>

<dl class="py function">
<dt id="os.dup">
<code class="sig-prename descclassname">os.</code><code class="sig-name descname">dup</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">fd</span></em><span class="sig-paren">)</span><a class="headerlink" href="#os.dup" title="永久链接至目标">¶</a></dt>
<dd><p>返回一个文件描述符 <em>fd</em> 的副本。该文件描述符的副本是 <a class="reference internal" href="#fd-inheritance"><span class="std std-ref">不可继承的</span></a>。</p>
<p>在 Windows 中，当复制一个标准流（0: stdin, 1: stdout, 2: stderr）时，新的文件描述符是 <a class="reference internal" href="#fd-inheritance"><span class="std std-ref">可继承的</span></a>。</p>
<div class="versionchanged">
<p><span class="versionmodified changed">在 3.4 版更改: </span>新的文件描述符现在是不可继承的。</p>
</div>
</dd></dl>

<dl class="py function">
<dt id="os.dup2">
<code class="sig-prename descclassname">os.</code><code class="sig-name descname">dup2</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">fd</span></em>, <em class="sig-param"><span class="n">fd2</span></em>, <em class="sig-param"><span class="n">inheritable</span><span class="o">=</span><span class="default_value">True</span></em><span class="sig-paren">)</span><a class="headerlink" href="#os.dup2" title="永久链接至目标">¶</a></dt>
<dd><p>把文件描述符 <em>fd</em> 复制为 <em>fd2</em>，必要时先关闭后者。返回 <em>fd2</em>。新的文件描述符默认是 <a class="reference internal" href="#fd-inheritance"><span class="std std-ref">可继承的</span></a>，除非在 <em>inheritable</em> 为 <code class="docutils literal notranslate"><span class="pre">False</span></code> 时，是不可继承的。</p>
<div class="versionchanged">
<p><span class="versionmodified changed">在 3.4 版更改: </span>添加可选参数 <em>inheritable</em>。</p>
</div>
<div class="versionchanged">
<p><span class="versionmodified changed">在 3.7 版更改: </span>成功时返回 <em>fd2</em>，以过去的版本中，总是返回 <code class="docutils literal notranslate"><span class="pre">None</span></code>。</p>
</div>
</dd></dl>

<dl class="py function">
<dt id="os.fchmod">
<code class="sig-prename descclassname">os.</code><code class="sig-name descname">fchmod</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">fd</span></em>, <em class="sig-param"><span class="n">mode</span></em><span class="sig-paren">)</span><a class="headerlink" href="#os.fchmod" title="永久链接至目标">¶</a></dt>
<dd><p>将 <em>fd</em> 指定文件的权限状态修改为 <em>mode</em>。可以参考 <a class="reference internal" href="#os.chmod" title="os.chmod"><code class="xref py py-func docutils literal notranslate"><span class="pre">chmod()</span></code></a> 中列出 <em>mode</em> 的可用值。从Python 3.3开始，这相当于 <code class="docutils literal notranslate"><span class="pre">os.chmod(fd,</span> <span class="pre">mode)</span></code>。</p>
<p class="audit-hook">引发一个 <a class="reference internal" href="sys.html#auditing"><span class="std std-ref">审计事件</span></a> <code class="docutils literal notranslate"><span class="pre">os.chmod</span></code>，附带参数 <code class="docutils literal notranslate"><span class="pre">path</span></code>、<code class="docutils literal notranslate"><span class="pre">mode</span></code>、<code class="docutils literal notranslate"><span class="pre">dir_fd</span></code>。</p>
<p class="availability"><a class="reference internal" href="intro.html#availability"><span class="std std-ref">可用性</span></a>: Unix。</p>
</dd></dl>

<dl class="py function">
<dt id="os.fchown">
<code class="sig-prename descclassname">os.</code><code class="sig-name descname">fchown</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">fd</span></em>, <em class="sig-param"><span class="n">uid</span></em>, <em class="sig-param"><span class="n">gid</span></em><span class="sig-paren">)</span><a class="headerlink" href="#os.fchown" title="永久链接至目标">¶</a></dt>
<dd><p>分别将 <em>fd</em> 指定文件的所有者和组 ID 修改为 <em>uid</em> 和 <em>gid</em> 的值。若不想变更其中的某个 ID，可将相应值设为 -1。参考  <a class="reference internal" href="#os.chown" title="os.chown"><code class="xref py py-func docutils literal notranslate"><span class="pre">chown()</span></code></a>。从 Python 3.3 开始，这相当于 <code class="docutils literal notranslate"><span class="pre">os.chown(fd,</span> <span class="pre">uid,</span> <span class="pre">gid)</span></code>。</p>
<p class="audit-hook">引发一个 <a class="reference internal" href="sys.html#auditing"><span class="std std-ref">审计事件</span></a> <code class="docutils literal notranslate"><span class="pre">os.chown</span></code>，附带参数 <code class="docutils literal notranslate"><span class="pre">path</span></code>、<code class="docutils literal notranslate"><span class="pre">uid</span></code>、<code class="docutils literal notranslate"><span class="pre">gid</span></code>、<code class="docutils literal notranslate"><span class="pre">dir_fd</span></code>。</p>
<p class="availability"><a class="reference internal" href="intro.html#availability"><span class="std std-ref">可用性</span></a>: Unix。</p>
</dd></dl>

<dl class="py function">
<dt id="os.fdatasync">
<code class="sig-prename descclassname">os.</code><code class="sig-name descname">fdatasync</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">fd</span></em><span class="sig-paren">)</span><a class="headerlink" href="#os.fdatasync" title="永久链接至目标">¶</a></dt>
<dd><p>强制将文件描述符 <em>fd</em> 指定文件写入磁盘。不强制更新元数据。</p>
<p class="availability"><a class="reference internal" href="intro.html#availability"><span class="std std-ref">可用性</span></a>: Unix。</p>
<div class="admonition note">
<p class="admonition-title">注解</p>
<p>该功能在 MacOS 中不可用。</p>
</div>
</dd></dl>

<dl class="py function">
<dt id="os.fpathconf">
<code class="sig-prename descclassname">os.</code><code class="sig-name descname">fpathconf</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">fd</span></em>, <em class="sig-param"><span class="n">name</span></em><span class="sig-paren">)</span><a class="headerlink" href="#os.fpathconf" title="永久链接至目标">¶</a></dt>
<dd><p>返回与打开的文件有关的系统配置信息。<em>name</em> 指定要查找的配置名称，它可以是字符串，是一个系统已定义的名称，这些名称定义在不同标准（POSIX.1，Unix 95，Unix 98 等）中。一些平台还定义了额外的其他名称。当前操作系统已定义的名称在 <code class="docutils literal notranslate"><span class="pre">pathconf_names</span></code> 字典中给出。对于未包含在该映射中的配置名称，也可以传递一个整数作为 <em>name</em>。</p>
<p>如果 <em>name</em> 是一个字符串且不是已定义的名称，将抛出 <a class="reference internal" href="exceptions.html#ValueError" title="ValueError"><code class="xref py py-exc docutils literal notranslate"><span class="pre">ValueError</span></code></a> 异常。如果当前系统不支持 <em>name</em> 指定的配置名称，即使该名称存在于 <code class="docutils literal notranslate"><span class="pre">pathconf_names</span></code>，也会抛出 <a class="reference internal" href="exceptions.html#OSError" title="OSError"><code class="xref py py-exc docutils literal notranslate"><span class="pre">OSError</span></code></a> 异常，错误码为 <a class="reference internal" href="errno.html#errno.EINVAL" title="errno.EINVAL"><code class="xref py py-const docutils literal notranslate"><span class="pre">errno.EINVAL</span></code></a>。</p>
<p>从 Python 3.3 起，此功能等价于 <code class="docutils literal notranslate"><span class="pre">os.pathconf(fd,</span> <span class="pre">name)</span></code>。</p>
<p class="availability"><a class="reference internal" href="intro.html#availability"><span class="std std-ref">可用性</span></a>: Unix。</p>
</dd></dl>

<dl class="py function">
<dt id="os.fstat">
<code class="sig-prename descclassname">os.</code><code class="sig-name descname">fstat</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">fd</span></em><span class="sig-paren">)</span><a class="headerlink" href="#os.fstat" title="永久链接至目标">¶</a></dt>
<dd><p>获取文件描述符 <em>fd</em> 的状态. 返回一个 <a class="reference internal" href="#os.stat_result" title="os.stat_result"><code class="xref py py-class docutils literal notranslate"><span class="pre">stat_result</span></code></a> 对象。</p>
<p>从 Python 3.3 起，此功能等价于 <code class="docutils literal notranslate"><span class="pre">os.stat(fd)</span></code>。</p>
<div class="admonition seealso">
<p class="admonition-title">参见</p>
<p><a class="reference internal" href="#os.stat" title="os.stat"><code class="xref py py-func docutils literal notranslate"><span class="pre">stat()</span></code></a> 函数。</p>
</div>
</dd></dl>

<dl class="py function">
<dt id="os.fstatvfs">
<code class="sig-prename descclassname">os.</code><code class="sig-name descname">fstatvfs</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">fd</span></em><span class="sig-paren">)</span><a class="headerlink" href="#os.fstatvfs" title="永久链接至目标">¶</a></dt>
<dd><p>返回文件系统的信息，该文件系统是文件描述符 <em>fd</em> 指向的文件所在的文件系统，与 <a class="reference internal" href="#os.statvfs" title="os.statvfs"><code class="xref py py-func docutils literal notranslate"><span class="pre">statvfs()</span></code></a> 一样。从 Python 3.3 开始，它等效于 <code class="docutils literal notranslate"><span class="pre">os.statvfs(fd)</span></code>。</p>
<p class="availability"><a class="reference internal" href="intro.html#availability"><span class="std std-ref">可用性</span></a>: Unix。</p>
</dd></dl>

<dl class="py function">
<dt id="os.fsync">
<code class="sig-prename descclassname">os.</code><code class="sig-name descname">fsync</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">fd</span></em><span class="sig-paren">)</span><a class="headerlink" href="#os.fsync" title="永久链接至目标">¶</a></dt>
<dd><p>强制将文件描述符 <em>fd</em> 指向的文件写入磁盘。在 Unix，这将调用原生 <code class="xref c c-func docutils literal notranslate"><span class="pre">fsync()</span></code> 函数；在 Windows，则是 MS <code class="xref c c-func docutils literal notranslate"><span class="pre">_commit()</span></code> 函数。</p>
<p>如果要写入的是缓冲区内的 Python <a class="reference internal" href="../glossary.html#term-file-object"><span class="xref std std-term">文件对象</span></a> <em>f</em>，请先执行 <code class="docutils literal notranslate"><span class="pre">f.flush()</span></code>，然后执行 <code class="docutils literal notranslate"><span class="pre">os.fsync(f.fileno())</span></code>，以确保与 <em>f</em> 关联的所有内部缓冲区都写入磁盘。</p>
<p class="availability"><a class="reference internal" href="intro.html#availability"><span class="std std-ref">可用性</span></a>: Unix, Windows。</p>
</dd></dl>

<dl class="py function">
<dt id="os.ftruncate">
<code class="sig-prename descclassname">os.</code><code class="sig-name descname">ftruncate</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">fd</span></em>, <em class="sig-param"><span class="n">length</span></em><span class="sig-paren">)</span><a class="headerlink" href="#os.ftruncate" title="永久链接至目标">¶</a></dt>
<dd><p>截断文件描述符 <em>fd</em> 指向的文件，以使其最大为 <em>length</em> 字节。从 Python 3.3 开始，它等效于 <code class="docutils literal notranslate"><span class="pre">os.truncate(fd,</span> <span class="pre">length)</span></code>。</p>
<p class="audit-hook">引发一个 <a class="reference internal" href="sys.html#auditing"><span class="std std-ref">审计事件</span></a> <code class="docutils literal notranslate"><span class="pre">os.truncate</span></code>，附带参数 <code class="docutils literal notranslate"><span class="pre">fd</span></code>, <code class="docutils literal notranslate"><span class="pre">length</span></code>。</p>
<p class="availability"><a class="reference internal" href="intro.html#availability"><span class="std std-ref">可用性</span></a>: Unix, Windows。</p>
<div class="versionchanged">
<p><span class="versionmodified changed">在 3.5 版更改: </span>添加了 Windows 支持</p>
</div>
</dd></dl>

<dl class="py function">
<dt id="os.get_blocking">
<code class="sig-prename descclassname">os.</code><code class="sig-name descname">get_blocking</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">fd</span></em><span class="sig-paren">)</span><a class="headerlink" href="#os.get_blocking" title="永久链接至目标">¶</a></dt>
<dd><p>获取文件描述符的阻塞模式：如果设置了 <a class="reference internal" href="#os.O_NONBLOCK" title="os.O_NONBLOCK"><code class="xref py py-data docutils literal notranslate"><span class="pre">O_NONBLOCK</span></code></a> 标志位，返回 <code class="docutils literal notranslate"><span class="pre">False</span></code>，如果该标志位被清除，返回 <code class="docutils literal notranslate"><span class="pre">True</span></code>。</p>
<p>参见 <a class="reference internal" href="#os.set_blocking" title="os.set_blocking"><code class="xref py py-func docutils literal notranslate"><span class="pre">set_blocking()</span></code></a> 和 <a class="reference internal" href="socket.html#socket.socket.setblocking" title="socket.socket.setblocking"><code class="xref py py-meth docutils literal notranslate"><span class="pre">socket.socket.setblocking()</span></code></a>。</p>
<p class="availability"><a class="reference internal" href="intro.html#availability"><span class="std std-ref">可用性</span></a>: Unix。</p>
<div class="versionadded">
<p><span class="versionmodified added">3.5 新版功能.</span></p>
</div>
</dd></dl>

<dl class="py function">
<dt id="os.isatty">
<code class="sig-prename descclassname">os.</code><code class="sig-name descname">isatty</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">fd</span></em><span class="sig-paren">)</span><a class="headerlink" href="#os.isatty" title="永久链接至目标">¶</a></dt>
<dd><p>如果文件描述符 <em>fd</em> 打开且已连接至 tty 设备（或类 tty 设备），返回 <code class="docutils literal notranslate"><span class="pre">True</span></code>，否则返回 <code class="docutils literal notranslate"><span class="pre">False</span></code>。</p>
</dd></dl>

<dl class="py function">
<dt id="os.lockf">
<code class="sig-prename descclassname">os.</code><code class="sig-name descname">lockf</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">fd</span></em>, <em class="sig-param"><span class="n">cmd</span></em>, <em class="sig-param"><span class="n">len</span></em><span class="sig-paren">)</span><a class="headerlink" href="#os.lockf" title="永久链接至目标">¶</a></dt>
<dd><p>在打开的文件描述符上，使用、测试或删除 POSIX 锁。<em>fd</em> 是一个打开的文件描述符。<em>cmd</em> 指定要进行的操作，它们是 <a class="reference internal" href="#os.F_LOCK" title="os.F_LOCK"><code class="xref py py-data docutils literal notranslate"><span class="pre">F_LOCK</span></code></a>、<a class="reference internal" href="#os.F_TLOCK" title="os.F_TLOCK"><code class="xref py py-data docutils literal notranslate"><span class="pre">F_TLOCK</span></code></a>、<a class="reference internal" href="#os.F_ULOCK" title="os.F_ULOCK"><code class="xref py py-data docutils literal notranslate"><span class="pre">F_ULOCK</span></code></a> 或 <a class="reference internal" href="#os.F_TEST" title="os.F_TEST"><code class="xref py py-data docutils literal notranslate"><span class="pre">F_TEST</span></code></a> 中的一个。<em>len</em> 指定哪部分文件需要锁定。</p>
<p class="audit-hook">引发一个 <a class="reference internal" href="sys.html#auditing"><span class="std std-ref">审计事件</span></a> <code class="docutils literal notranslate"><span class="pre">os.lockf</span></code>，附带参数 <code class="docutils literal notranslate"><span class="pre">fd</span></code>、<code class="docutils literal notranslate"><span class="pre">cmd</span></code>、<code class="docutils literal notranslate"><span class="pre">len</span></code>。</p>
<p class="availability"><a class="reference internal" href="intro.html#availability"><span class="std std-ref">可用性</span></a>: Unix。</p>
<div class="versionadded">
<p><span class="versionmodified added">3.3 新版功能.</span></p>
</div>
</dd></dl>

<dl class="py data">
<dt id="os.F_LOCK">
<code class="sig-prename descclassname">os.</code><code class="sig-name descname">F_LOCK</code><a class="headerlink" href="#os.F_LOCK" title="永久链接至目标">¶</a></dt>
<dt id="os.F_TLOCK">
<code class="sig-prename descclassname">os.</code><code class="sig-name descname">F_TLOCK</code><a class="headerlink" href="#os.F_TLOCK" title="永久链接至目标">¶</a></dt>
<dt id="os.F_ULOCK">
<code class="sig-prename descclassname">os.</code><code class="sig-name descname">F_ULOCK</code><a class="headerlink" href="#os.F_ULOCK" title="永久链接至目标">¶</a></dt>
<dt id="os.F_TEST">
<code class="sig-prename descclassname">os.</code><code class="sig-name descname">F_TEST</code><a class="headerlink" href="#os.F_TEST" title="永久链接至目标">¶</a></dt>
<dd><p>标志位，用于指定 <a class="reference internal" href="#os.lockf" title="os.lockf"><code class="xref py py-func docutils literal notranslate"><span class="pre">lockf()</span></code></a> 进行哪一种操作。</p>
<p class="availability"><a class="reference internal" href="intro.html#availability"><span class="std std-ref">可用性</span></a>: Unix。</p>
<div class="versionadded">
<p><span class="versionmodified added">3.3 新版功能.</span></p>
</div>
</dd></dl>

<dl class="py function">
<dt id="os.lseek">
<code class="sig-prename descclassname">os.</code><code class="sig-name descname">lseek</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">fd</span></em>, <em class="sig-param"><span class="n">pos</span></em>, <em class="sig-param"><span class="n">how</span></em><span class="sig-paren">)</span><a class="headerlink" href="#os.lseek" title="永久链接至目标">¶</a></dt>
<dd><p>将文件描述符 <em>fd</em> 的当前位置设置为 <em>pos</em>，位置的计算方式 <em>how</em> 如下：设置为 <a class="reference internal" href="#os.SEEK_SET" title="os.SEEK_SET"><code class="xref py py-const docutils literal notranslate"><span class="pre">SEEK_SET</span></code></a> 或 <code class="docutils literal notranslate"><span class="pre">0</span></code> 表示从文件开头计算，设置为 <a class="reference internal" href="#os.SEEK_CUR" title="os.SEEK_CUR"><code class="xref py py-const docutils literal notranslate"><span class="pre">SEEK_CUR</span></code></a> 或 <code class="docutils literal notranslate"><span class="pre">1</span></code> 表示从文件当前位置计算，设置为 <a class="reference internal" href="#os.SEEK_END" title="os.SEEK_END"><code class="xref py py-const docutils literal notranslate"><span class="pre">SEEK_END</span></code></a> 或 <code class="docutils literal notranslate"><span class="pre">2</span></code> 表示文件末尾计算。返回新指针位置，这个位置是从文件开头计算的，单位是字节。</p>
</dd></dl>

<dl class="py data">
<dt id="os.SEEK_SET">
<code class="sig-prename descclassname">os.</code><code class="sig-name descname">SEEK_SET</code><a class="headerlink" href="#os.SEEK_SET" title="永久链接至目标">¶</a></dt>
<dt id="os.SEEK_CUR">
<code class="sig-prename descclassname">os.</code><code class="sig-name descname">SEEK_CUR</code><a class="headerlink" href="#os.SEEK_CUR" title="永久链接至目标">¶</a></dt>
<dt id="os.SEEK_END">
<code class="sig-prename descclassname">os.</code><code class="sig-name descname">SEEK_END</code><a class="headerlink" href="#os.SEEK_END" title="永久链接至目标">¶</a></dt>
<dd><p><a class="reference internal" href="#os.lseek" title="os.lseek"><code class="xref py py-func docutils literal notranslate"><span class="pre">lseek()</span></code></a> 函数的参数，它们的值分别为 0、1 和 2。</p>
<div class="versionadded">
<p><span class="versionmodified added">3.3 新版功能: </span>某些操作系统可能支持其他值，例如 <code class="xref py py-data docutils literal notranslate"><span class="pre">os.SEEK_HOLE</span></code> 或 <code class="xref py py-data docutils literal notranslate"><span class="pre">os.SEEK_DATA</span></code>。</p>
</div>
</dd></dl>

<dl class="py function">
<dt id="os.open">
<code class="sig-prename descclassname">os.</code><code class="sig-name descname">open</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">path</span></em>, <em class="sig-param"><span class="n">flags</span></em>, <em class="sig-param"><span class="n">mode</span><span class="o">=</span><span class="default_value">0o777</span></em>, <em class="sig-param"><span class="o">*</span></em>, <em class="sig-param"><span class="n">dir_fd</span><span class="o">=</span><span class="default_value">None</span></em><span class="sig-paren">)</span><a class="headerlink" href="#os.open" title="永久链接至目标">¶</a></dt>
<dd><p>打开文件 <em>path</em>，根据 <em>flags</em> 设置各种标志位，并根据 <em>mode</em> 设置其权限状态。当计算 <em>mode</em> 时，会首先根据当前 umask 值将部分权限去除。本方法返回新文件的描述符。新的文件描述符是 <a class="reference internal" href="#fd-inheritance"><span class="std std-ref">不可继承</span></a> 的。</p>
<p>有关 flag 和 mode 取值的说明，请参见 C 运行时文档。标志位常量（如 <a class="reference internal" href="#os.O_RDONLY" title="os.O_RDONLY"><code class="xref py py-const docutils literal notranslate"><span class="pre">O_RDONLY</span></code></a> 和 <a class="reference internal" href="#os.O_WRONLY" title="os.O_WRONLY"><code class="xref py py-const docutils literal notranslate"><span class="pre">O_WRONLY</span></code></a>）在 <a class="reference internal" href="#module-os" title="os: Miscellaneous operating system interfaces."><code class="xref py py-mod docutils literal notranslate"><span class="pre">os</span></code></a> 模块中定义。特别地，在 Windows 上需要添加 <a class="reference internal" href="#os.O_BINARY" title="os.O_BINARY"><code class="xref py py-const docutils literal notranslate"><span class="pre">O_BINARY</span></code></a> 才能以二进制模式打开文件。</p>
<p>本函数带有 <em>dir_fd</em> 参数，支持 <a class="reference internal" href="#dir-fd"><span class="std std-ref">基于目录描述符的相对路径</span></a>。</p>
<p class="audit-hook"><code class="docutils literal notranslate"><span class="pre">open</span></code> 附带参数 <code class="docutils literal notranslate"><span class="pre">path</span></code>、<code class="docutils literal notranslate"><span class="pre">mode</span></code>、<code class="docutils literal notranslate"><span class="pre">flags</span></code> 会引发 <a class="reference internal" href="sys.html#auditing"><span class="std std-ref">审计事件</span></a>。</p>
<div class="versionchanged">
<p><span class="versionmodified changed">在 3.4 版更改: </span>新的文件描述符现在是不可继承的。</p>
</div>
<div class="admonition note">
<p class="admonition-title">注解</p>
<p>本函数适用于底层的 I/O。常规用途请使用内置函数 <a class="reference internal" href="functions.html#open" title="open"><code class="xref py py-func docutils literal notranslate"><span class="pre">open()</span></code></a>，该函数的 <code class="xref py py-meth docutils literal notranslate"><span class="pre">read()</span></code> 和 <code class="xref py py-meth docutils literal notranslate"><span class="pre">write()</span></code> 方法（及其他方法）会返回 <a class="reference internal" href="../glossary.html#term-file-object"><span class="xref std std-term">文件对象</span></a>。要将文件描述符包装在文件对象中，请使用 <a class="reference internal" href="#os.fdopen" title="os.fdopen"><code class="xref py py-func docutils literal notranslate"><span class="pre">fdopen()</span></code></a>。</p>
</div>
<div class="versionadded">
<p><span class="versionmodified added">3.3 新版功能: </span><em>dir_fd</em> 参数。</p>
</div>
<div class="versionchanged">
<p><span class="versionmodified changed">在 3.5 版更改: </span>如果系统调用被中断，但信号处理程序没有触发异常，此函数现在会重试系统调用，而不是触发 <a class="reference internal" href="exceptions.html#InterruptedError" title="InterruptedError"><code class="xref py py-exc docutils literal notranslate"><span class="pre">InterruptedError</span></code></a> 异常 (原因详见 <span class="target" id="index-87"></span><a class="pep reference external" href="https://www.python.org/dev/peps/pep-0475"><strong>PEP 475</strong></a>)。</p>
</div>
<div class="versionchanged">
<p><span class="versionmodified changed">在 3.6 版更改: </span>接受一个 <a class="reference internal" href="../glossary.html#term-path-like-object"><span class="xref std std-term">path-like object</span></a>。</p>
</div>
</dd></dl>

<p>以下常量是 <a class="reference internal" href="#os.open" title="os.open"><code class="xref py py-func docutils literal notranslate"><span class="pre">open()</span></code></a> 函数 <em>flags</em> 参数的选项。可以用按位或运算符 <code class="docutils literal notranslate"><span class="pre">|</span></code> 将它们组合使用。部分常量并非在所有平台上都可用。有关其可用性和用法的说明，请参阅 <em class="manpage"><a class="manpage reference external" href="https://manpages.debian.org/open(2)">open(2)</a></em> 手册（Unix 上）或 <a class="reference external" href="https://msdn.microsoft.com/en-us/library/z0kc8e3z.aspx">MSDN</a> （Windows 上）。</p>
<dl class="py data">
<dt id="os.O_RDONLY">
<code class="sig-prename descclassname">os.</code><code class="sig-name descname">O_RDONLY</code><a class="headerlink" href="#os.O_RDONLY" title="永久链接至目标">¶</a></dt>
<dt id="os.O_WRONLY">
<code class="sig-prename descclassname">os.</code><code class="sig-name descname">O_WRONLY</code><a class="headerlink" href="#os.O_WRONLY" title="永久链接至目标">¶</a></dt>
<dt id="os.O_RDWR">
<code class="sig-prename descclassname">os.</code><code class="sig-name descname">O_RDWR</code><a class="headerlink" href="#os.O_RDWR" title="永久链接至目标">¶</a></dt>
<dt id="os.O_APPEND">
<code class="sig-prename descclassname">os.</code><code class="sig-name descname">O_APPEND</code><a class="headerlink" href="#os.O_APPEND" title="永久链接至目标">¶</a></dt>
<dt id="os.O_CREAT">
<code class="sig-prename descclassname">os.</code><code class="sig-name descname">O_CREAT</code><a class="headerlink" href="#os.O_CREAT" title="永久链接至目标">¶</a></dt>
<dt id="os.O_EXCL">
<code class="sig-prename descclassname">os.</code><code class="sig-name descname">O_EXCL</code><a class="headerlink" href="#os.O_EXCL" title="永久链接至目标">¶</a></dt>
<dt id="os.O_TRUNC">
<code class="sig-prename descclassname">os.</code><code class="sig-name descname">O_TRUNC</code><a class="headerlink" href="#os.O_TRUNC" title="永久链接至目标">¶</a></dt>
<dd><p>上述常量在 Unix 和 Windows 上均可用。</p>
</dd></dl>

<dl class="py data">
<dt id="os.O_DSYNC">
<code class="sig-prename descclassname">os.</code><code class="sig-name descname">O_DSYNC</code><a class="headerlink" href="#os.O_DSYNC" title="永久链接至目标">¶</a></dt>
<dt id="os.O_RSYNC">
<code class="sig-prename descclassname">os.</code><code class="sig-name descname">O_RSYNC</code><a class="headerlink" href="#os.O_RSYNC" title="永久链接至目标">¶</a></dt>
<dt id="os.O_SYNC">
<code class="sig-prename descclassname">os.</code><code class="sig-name descname">O_SYNC</code><a class="headerlink" href="#os.O_SYNC" title="永久链接至目标">¶</a></dt>
<dt id="os.O_NDELAY">
<code class="sig-prename descclassname">os.</code><code class="sig-name descname">O_NDELAY</code><a class="headerlink" href="#os.O_NDELAY" title="永久链接至目标">¶</a></dt>
<dt id="os.O_NONBLOCK">
<code class="sig-prename descclassname">os.</code><code class="sig-name descname">O_NONBLOCK</code><a class="headerlink" href="#os.O_NONBLOCK" title="永久链接至目标">¶</a></dt>
<dt id="os.O_NOCTTY">
<code class="sig-prename descclassname">os.</code><code class="sig-name descname">O_NOCTTY</code><a class="headerlink" href="#os.O_NOCTTY" title="永久链接至目标">¶</a></dt>
<dt id="os.O_CLOEXEC">
<code class="sig-prename descclassname">os.</code><code class="sig-name descname">O_CLOEXEC</code><a class="headerlink" href="#os.O_CLOEXEC" title="永久链接至目标">¶</a></dt>
<dd><p>这个常数仅在 Unix 系统中可用。</p>
<div class="versionchanged">
<p><span class="versionmodified changed">在 3.3 版更改: </span>增加 <a class="reference internal" href="#os.O_CLOEXEC" title="os.O_CLOEXEC"><code class="xref py py-data docutils literal notranslate"><span class="pre">O_CLOEXEC</span></code></a> 常量。</p>
</div>
</dd></dl>

<dl class="py data">
<dt id="os.O_BINARY">
<code class="sig-prename descclassname">os.</code><code class="sig-name descname">O_BINARY</code><a class="headerlink" href="#os.O_BINARY" title="永久链接至目标">¶</a></dt>
<dt id="os.O_NOINHERIT">
<code class="sig-prename descclassname">os.</code><code class="sig-name descname">O_NOINHERIT</code><a class="headerlink" href="#os.O_NOINHERIT" title="永久链接至目标">¶</a></dt>
<dt id="os.O_SHORT_LIVED">
<code class="sig-prename descclassname">os.</code><code class="sig-name descname">O_SHORT_LIVED</code><a class="headerlink" href="#os.O_SHORT_LIVED" title="永久链接至目标">¶</a></dt>
<dt id="os.O_TEMPORARY">
<code class="sig-prename descclassname">os.</code><code class="sig-name descname">O_TEMPORARY</code><a class="headerlink" href="#os.O_TEMPORARY" title="永久链接至目标">¶</a></dt>
<dt id="os.O_RANDOM">
<code class="sig-prename descclassname">os.</code><code class="sig-name descname">O_RANDOM</code><a class="headerlink" href="#os.O_RANDOM" title="永久链接至目标">¶</a></dt>
<dt id="os.O_SEQUENTIAL">
<code class="sig-prename descclassname">os.</code><code class="sig-name descname">O_SEQUENTIAL</code><a class="headerlink" href="#os.O_SEQUENTIAL" title="永久链接至目标">¶</a></dt>
<dt id="os.O_TEXT">
<code class="sig-prename descclassname">os.</code><code class="sig-name descname">O_TEXT</code><a class="headerlink" href="#os.O_TEXT" title="永久链接至目标">¶</a></dt>
<dd><p>这个常数仅在 Windows 系统中可用。</p>
</dd></dl>

<dl class="py data">
<dt id="os.O_EVTONLY">
<code class="sig-prename descclassname">os.</code><code class="sig-name descname">O_EVTONLY</code><a class="headerlink" href="#os.O_EVTONLY" title="永久链接至目标">¶</a></dt>
<dt id="os.O_FSYNC">
<code class="sig-prename descclassname">os.</code><code class="sig-name descname">O_FSYNC</code><a class="headerlink" href="#os.O_FSYNC" title="永久链接至目标">¶</a></dt>
<dt id="os.O_SYMLINK">
<code class="sig-prename descclassname">os.</code><code class="sig-name descname">O_SYMLINK</code><a class="headerlink" href="#os.O_SYMLINK" title="永久链接至目标">¶</a></dt>
<dt id="os.O_NOFOLLOW_ANY">
<code class="sig-prename descclassname">os.</code><code class="sig-name descname">O_NOFOLLOW_ANY</code><a class="headerlink" href="#os.O_NOFOLLOW_ANY" title="永久链接至目标">¶</a></dt>
<dd><p>以上常量仅适用于 macOS。</p>
<div class="versionchanged">
<p><span class="versionmodified changed">在 3.10 版更改: </span>加入 <a class="reference internal" href="#os.O_EVTONLY" title="os.O_EVTONLY"><code class="xref py py-data docutils literal notranslate"><span class="pre">O_EVTONLY</span></code></a> 、 <a class="reference internal" href="#os.O_FSYNC" title="os.O_FSYNC"><code class="xref py py-data docutils literal notranslate"><span class="pre">O_FSYNC</span></code></a> 、 <a class="reference internal" href="#os.O_SYMLINK" title="os.O_SYMLINK"><code class="xref py py-data docutils literal notranslate"><span class="pre">O_SYMLINK</span></code></a> 和 <a class="reference internal" href="#os.O_NOFOLLOW_ANY" title="os.O_NOFOLLOW_ANY"><code class="xref py py-data docutils literal notranslate"><span class="pre">O_NOFOLLOW_ANY</span></code></a> 常量。</p>
</div>
</dd></dl>

<dl class="py data">
<dt id="os.O_ASYNC">
<code class="sig-prename descclassname">os.</code><code class="sig-name descname">O_ASYNC</code><a class="headerlink" href="#os.O_ASYNC" title="永久链接至目标">¶</a></dt>
<dt id="os.O_DIRECT">
<code class="sig-prename descclassname">os.</code><code class="sig-name descname">O_DIRECT</code><a class="headerlink" href="#os.O_DIRECT" title="永久链接至目标">¶</a></dt>
<dt id="os.O_DIRECTORY">
<code class="sig-prename descclassname">os.</code><code class="sig-name descname">O_DIRECTORY</code><a class="headerlink" href="#os.O_DIRECTORY" title="永久链接至目标">¶</a></dt>
<dt id="os.O_NOFOLLOW">
<code class="sig-prename descclassname">os.</code><code class="sig-name descname">O_NOFOLLOW</code><a class="headerlink" href="#os.O_NOFOLLOW" title="永久链接至目标">¶</a></dt>
<dt id="os.O_NOATIME">
<code class="sig-prename descclassname">os.</code><code class="sig-name descname">O_NOATIME</code><a class="headerlink" href="#os.O_NOATIME" title="永久链接至目标">¶</a></dt>
<dt id="os.O_PATH">
<code class="sig-prename descclassname">os.</code><code class="sig-name descname">O_PATH</code><a class="headerlink" href="#os.O_PATH" title="永久链接至目标">¶</a></dt>
<dt id="os.O_TMPFILE">
<code class="sig-prename descclassname">os.</code><code class="sig-name descname">O_TMPFILE</code><a class="headerlink" href="#os.O_TMPFILE" title="永久链接至目标">¶</a></dt>
<dt id="os.O_SHLOCK">
<code class="sig-prename descclassname">os.</code><code class="sig-name descname">O_SHLOCK</code><a class="headerlink" href="#os.O_SHLOCK" title="永久链接至目标">¶</a></dt>
<dt id="os.O_EXLOCK">
<code class="sig-prename descclassname">os.</code><code class="sig-name descname">O_EXLOCK</code><a class="headerlink" href="#os.O_EXLOCK" title="永久链接至目标">¶</a></dt>
<dd><p>上述常量是扩展常量，如果 C 库未定义它们，则不存在。</p>
<div class="versionchanged">
<p><span class="versionmodified changed">在 3.4 版更改: </span>在支持的系统上增加 <a class="reference internal" href="#os.O_PATH" title="os.O_PATH"><code class="xref py py-data docutils literal notranslate"><span class="pre">O_PATH</span></code></a>。增加 <a class="reference internal" href="#os.O_TMPFILE" title="os.O_TMPFILE"><code class="xref py py-data docutils literal notranslate"><span class="pre">O_TMPFILE</span></code></a>，仅在 Linux Kernel 3.11 或更高版本可用。</p>
</div>
</dd></dl>

<dl class="py function">
<dt id="os.openpty">
<code class="sig-prename descclassname">os.</code><code class="sig-name descname">openpty</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#os.openpty" title="永久链接至目标">¶</a></dt>
<dd><p id="index-22">打开一对新的伪终端，返回一对文件描述符 <code class="docutils literal notranslate"><span class="pre">（主，从）</span></code>，分别为 pty 和 tty。新的文件描述符是 <a class="reference internal" href="#fd-inheritance"><span class="std std-ref">不可继承</span></a> 的。对于（稍微）轻量一些的方法，请使用 <a class="reference internal" href="pty.html#module-pty" title="pty: Pseudo-Terminal Handling for Unix. (Unix)"><code class="xref py py-mod docutils literal notranslate"><span class="pre">pty</span></code></a> 模块。</p>
<p class="availability"><a class="reference internal" href="intro.html#availability"><span class="std std-ref">可用性</span></a>: 某些 Unix。</p>
<div class="versionchanged">
<p><span class="versionmodified changed">在 3.4 版更改: </span>新的文件描述符不再可继承。</p>
</div>
</dd></dl>

<dl class="py function">
<dt id="os.pipe">
<code class="sig-prename descclassname">os.</code><code class="sig-name descname">pipe</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#os.pipe" title="永久链接至目标">¶</a></dt>
<dd><p>创建一个管道，返回一对分别用于读取和写入的文件描述符 <code class="docutils literal notranslate"><span class="pre">(r,</span> <span class="pre">w)</span></code>。新的文件描述符是 <a class="reference internal" href="#fd-inheritance"><span class="std std-ref">不可继承</span></a> 的。</p>
<p class="availability"><a class="reference internal" href="intro.html#availability"><span class="std std-ref">可用性</span></a>: Unix, Windows。</p>
<div class="versionchanged">
<p><span class="versionmodified changed">在 3.4 版更改: </span>新的文件描述符不再可继承。</p>
</div>
</dd></dl>

<dl class="py function">
<dt id="os.pipe2">
<code class="sig-prename descclassname">os.</code><code class="sig-name descname">pipe2</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">flags</span></em><span class="sig-paren">)</span><a class="headerlink" href="#os.pipe2" title="永久链接至目标">¶</a></dt>
<dd><p>创建带有 <em>flags</em> 标志位的管道。可通过对以下一个或多个值进行“或”运算来构造这些 <em>flags</em>：<a class="reference internal" href="#os.O_NONBLOCK" title="os.O_NONBLOCK"><code class="xref py py-data docutils literal notranslate"><span class="pre">O_NONBLOCK</span></code></a>、<a class="reference internal" href="#os.O_CLOEXEC" title="os.O_CLOEXEC"><code class="xref py py-data docutils literal notranslate"><span class="pre">O_CLOEXEC</span></code></a>。返回一对分别用于读取和写入的文件描述符 <code class="docutils literal notranslate"><span class="pre">(r,</span> <span class="pre">w)</span></code>。</p>
<p class="availability"><a class="reference internal" href="intro.html#availability"><span class="std std-ref">可用性</span></a>: 某些 Unix。</p>
<div class="versionadded">
<p><span class="versionmodified added">3.3 新版功能.</span></p>
</div>
</dd></dl>

<dl class="py function">
<dt id="os.posix_fallocate">
<code class="sig-prename descclassname">os.</code><code class="sig-name descname">posix_fallocate</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">fd</span></em>, <em class="sig-param"><span class="n">offset</span></em>, <em class="sig-param"><span class="n">len</span></em><span class="sig-paren">)</span><a class="headerlink" href="#os.posix_fallocate" title="永久链接至目标">¶</a></dt>
<dd><p>确保为 <em>fd</em> 指向的文件分配了足够的磁盘空间，该空间从偏移量 <em>offset</em> 开始，到 <em>len</em> 字节为止。</p>
<p class="availability"><a class="reference internal" href="intro.html#availability"><span class="std std-ref">可用性</span></a>: Unix。</p>
<div class="versionadded">
<p><span class="versionmodified added">3.3 新版功能.</span></p>
</div>
</dd></dl>

<dl class="py function">
<dt id="os.posix_fadvise">
<code class="sig-prename descclassname">os.</code><code class="sig-name descname">posix_fadvise</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">fd</span></em>, <em class="sig-param"><span class="n">offset</span></em>, <em class="sig-param"><span class="n">len</span></em>, <em class="sig-param"><span class="n">advice</span></em><span class="sig-paren">)</span><a class="headerlink" href="#os.posix_fadvise" title="永久链接至目标">¶</a></dt>
<dd><p>声明即将以特定模式访问数据，使内核可以提前进行优化。数据范围是从 <em>fd</em> 所指向文件的 <em>offset</em> 开始，持续 <em>len</em> 个字节。<em>advice</em> 的取值是如下之一：<a class="reference internal" href="#os.POSIX_FADV_NORMAL" title="os.POSIX_FADV_NORMAL"><code class="xref py py-data docutils literal notranslate"><span class="pre">POSIX_FADV_NORMAL</span></code></a>, <a class="reference internal" href="#os.POSIX_FADV_SEQUENTIAL" title="os.POSIX_FADV_SEQUENTIAL"><code class="xref py py-data docutils literal notranslate"><span class="pre">POSIX_FADV_SEQUENTIAL</span></code></a>, <a class="reference internal" href="#os.POSIX_FADV_RANDOM" title="os.POSIX_FADV_RANDOM"><code class="xref py py-data docutils literal notranslate"><span class="pre">POSIX_FADV_RANDOM</span></code></a>, <a class="reference internal" href="#os.POSIX_FADV_NOREUSE" title="os.POSIX_FADV_NOREUSE"><code class="xref py py-data docutils literal notranslate"><span class="pre">POSIX_FADV_NOREUSE</span></code></a>, <a class="reference internal" href="#os.POSIX_FADV_WILLNEED" title="os.POSIX_FADV_WILLNEED"><code class="xref py py-data docutils literal notranslate"><span class="pre">POSIX_FADV_WILLNEED</span></code></a> 或 <a class="reference internal" href="#os.POSIX_FADV_DONTNEED" title="os.POSIX_FADV_DONTNEED"><code class="xref py py-data docutils literal notranslate"><span class="pre">POSIX_FADV_DONTNEED</span></code></a>。</p>
<p class="availability"><a class="reference internal" href="intro.html#availability"><span class="std std-ref">可用性</span></a>: Unix。</p>
<div class="versionadded">
<p><span class="versionmodified added">3.3 新版功能.</span></p>
</div>
</dd></dl>

<dl class="py data">
<dt id="os.POSIX_FADV_NORMAL">
<code class="sig-prename descclassname">os.</code><code class="sig-name descname">POSIX_FADV_NORMAL</code><a class="headerlink" href="#os.POSIX_FADV_NORMAL" title="永久链接至目标">¶</a></dt>
<dt id="os.POSIX_FADV_SEQUENTIAL">
<code class="sig-prename descclassname">os.</code><code class="sig-name descname">POSIX_FADV_SEQUENTIAL</code><a class="headerlink" href="#os.POSIX_FADV_SEQUENTIAL" title="永久链接至目标">¶</a></dt>
<dt id="os.POSIX_FADV_RANDOM">
<code class="sig-prename descclassname">os.</code><code class="sig-name descname">POSIX_FADV_RANDOM</code><a class="headerlink" href="#os.POSIX_FADV_RANDOM" title="永久链接至目标">¶</a></dt>
<dt id="os.POSIX_FADV_NOREUSE">
<code class="sig-prename descclassname">os.</code><code class="sig-name descname">POSIX_FADV_NOREUSE</code><a class="headerlink" href="#os.POSIX_FADV_NOREUSE" title="永久链接至目标">¶</a></dt>
<dt id="os.POSIX_FADV_WILLNEED">
<code class="sig-prename descclassname">os.</code><code class="sig-name descname">POSIX_FADV_WILLNEED</code><a class="headerlink" href="#os.POSIX_FADV_WILLNEED" title="永久链接至目标">¶</a></dt>
<dt id="os.POSIX_FADV_DONTNEED">
<code class="sig-prename descclassname">os.</code><code class="sig-name descname">POSIX_FADV_DONTNEED</code><a class="headerlink" href="#os.POSIX_FADV_DONTNEED" title="永久链接至目标">¶</a></dt>
<dd><p>用于 <a class="reference internal" href="#os.posix_fadvise" title="os.posix_fadvise"><code class="xref py py-func docutils literal notranslate"><span class="pre">posix_fadvise()</span></code></a> 的 <em>advice</em> 参数的标志位，指定可能使用的访问模式。</p>
<p class="availability"><a class="reference internal" href="intro.html#availability"><span class="std std-ref">可用性</span></a>: Unix。</p>
<div class="versionadded">
<p><span class="versionmodified added">3.3 新版功能.</span></p>
</div>
</dd></dl>

<dl class="py function">
<dt id="os.pread">
<code class="sig-prename descclassname">os.</code><code class="sig-name descname">pread</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">fd</span></em>, <em class="sig-param"><span class="n">n</span></em>, <em class="sig-param"><span class="n">offset</span></em><span class="sig-paren">)</span><a class="headerlink" href="#os.pread" title="永久链接至目标">¶</a></dt>
<dd><p>从文件描述符 <em>fd</em> 所指向文件的偏移位置 <em>offset</em> 开始，读取至多 <em>n</em> 个字节，而保持文件偏移量不变。</p>
<p>返回所读取字节的字节串 (bytestring)。如果到达了 <em>fd</em> 指向的文件末尾，则返回空字节对象。</p>
<p class="availability"><a class="reference internal" href="intro.html#availability"><span class="std std-ref">可用性</span></a>: Unix。</p>
<div class="versionadded">
<p><span class="versionmodified added">3.3 新版功能.</span></p>
</div>
</dd></dl>

<dl class="py function">
<dt id="os.preadv">
<code class="sig-prename descclassname">os.</code><code class="sig-name descname">preadv</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">fd</span></em>, <em class="sig-param"><span class="n">buffers</span></em>, <em class="sig-param"><span class="n">offset</span></em>, <em class="sig-param"><span class="n">flags</span><span class="o">=</span><span class="default_value">0</span></em><span class="sig-paren">)</span><a class="headerlink" href="#os.preadv" title="永久链接至目标">¶</a></dt>
<dd><p>从文件描述符 <em>fd</em> 所指向文件的偏移位置 <em>offset</em> 开始，将数据读取至可变 <a class="reference internal" href="../glossary.html#term-bytes-like-object"><span class="xref std std-term">字节类对象</span></a> 缓冲区 <em>buffers</em> 中，保持文件偏移量不变。将数据依次存放到每个缓冲区中，填满一个后继续存放到序列中的下一个缓冲区，来保存其余数据。</p>
<p>flags 参数可以由零个或多个标志位进行按位或运算来得到：</p>
<ul class="simple">
<li><p><a class="reference internal" href="#os.RWF_HIPRI" title="os.RWF_HIPRI"><code class="xref py py-data docutils literal notranslate"><span class="pre">RWF_HIPRI</span></code></a></p></li>
<li><p><a class="reference internal" href="#os.RWF_NOWAIT" title="os.RWF_NOWAIT"><code class="xref py py-data docutils literal notranslate"><span class="pre">RWF_NOWAIT</span></code></a></p></li>
</ul>
<p>返回实际读取的字节总数，该总数可以小于所有对象的总容量。</p>
<p>操作系统可能对允许使用的缓冲区数量有限制（使用 <a class="reference internal" href="#os.sysconf" title="os.sysconf"><code class="xref py py-func docutils literal notranslate"><span class="pre">sysconf()</span></code></a> 获取 <code class="docutils literal notranslate"><span class="pre">'SC_IOV_MAX'</span></code> 值）。</p>
<p>本方法结合了 <a class="reference internal" href="#os.readv" title="os.readv"><code class="xref py py-func docutils literal notranslate"><span class="pre">os.readv()</span></code></a> 和 <a class="reference internal" href="#os.pread" title="os.pread"><code class="xref py py-func docutils literal notranslate"><span class="pre">os.pread()</span></code></a> 的功能。</p>
<p class="availability"><a class="reference internal" href="intro.html#availability"><span class="std std-ref">可用性</span></a>：Linux 2.6.30 或更高版本，FreeBSD 6.0 或更高版本，OpenBSD 2.7 或更高版本，AIX 7.1 或更高版本。使用标志位需要 Linux 4.6 或更高版本。</p>
<div class="versionadded">
<p><span class="versionmodified added">3.7 新版功能.</span></p>
</div>
</dd></dl>

<dl class="py data">
<dt id="os.RWF_NOWAIT">
<code class="sig-prename descclassname">os.</code><code class="sig-name descname">RWF_NOWAIT</code><a class="headerlink" href="#os.RWF_NOWAIT" title="永久链接至目标">¶</a></dt>
<dd><p>不要等待无法立即获得的数据。如果指定了此标志，那么当需要从后备存储器中读取数据，或等待文件锁时，系统调用将立即返回。</p>
<p>如果成功读取数据，则返回读取的字节数。如果未读取到数据，则返回 <code class="docutils literal notranslate"><span class="pre">-1</span></code>，并将错误码 errno 置为 <a class="reference internal" href="errno.html#errno.EAGAIN" title="errno.EAGAIN"><code class="xref py py-data docutils literal notranslate"><span class="pre">errno.EAGAIN</span></code></a>。</p>
<p class="availability"><a class="reference internal" href="intro.html#availability"><span class="std std-ref">可用性</span></a>：Linux 4.14 或更高版本。</p>
<div class="versionadded">
<p><span class="versionmodified added">3.7 新版功能.</span></p>
</div>
</dd></dl>

<dl class="py data">
<dt id="os.RWF_HIPRI">
<code class="sig-prename descclassname">os.</code><code class="sig-name descname">RWF_HIPRI</code><a class="headerlink" href="#os.RWF_HIPRI" title="永久链接至目标">¶</a></dt>
<dd><p>高优先级读/写。允许基于块的文件系统对设备进行轮询，这样可以降低延迟，但可能会占用更多资源。</p>
<p>目前在 Linux 上，此功能仅在使用 <a class="reference internal" href="#os.O_DIRECT" title="os.O_DIRECT"><code class="xref py py-data docutils literal notranslate"><span class="pre">O_DIRECT</span></code></a> 标志打开的文件描述符上可用。</p>
<p class="availability"><a class="reference internal" href="intro.html#availability"><span class="std std-ref">可用性</span></a>：Linux 4.6 或更高版本。</p>
<div class="versionadded">
<p><span class="versionmodified added">3.7 新版功能.</span></p>
</div>
</dd></dl>

<dl class="py function">
<dt id="os.pwrite">
<code class="sig-prename descclassname">os.</code><code class="sig-name descname">pwrite</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">fd</span></em>, <em class="sig-param"><span class="n">str</span></em>, <em class="sig-param"><span class="n">offset</span></em><span class="sig-paren">)</span><a class="headerlink" href="#os.pwrite" title="永久链接至目标">¶</a></dt>
<dd><p>将 <em>str</em> 中的字节串 (bytestring) 写入文件描述符 <em>fd</em> 的偏移位置 <em>offset</em> 处，保持文件偏移量不变。</p>
<p>返回实际写入的字节数。</p>
<p class="availability"><a class="reference internal" href="intro.html#availability"><span class="std std-ref">可用性</span></a>: Unix。</p>
<div class="versionadded">
<p><span class="versionmodified added">3.3 新版功能.</span></p>
</div>
</dd></dl>

<dl class="py function">
<dt id="os.pwritev">
<code class="sig-prename descclassname">os.</code><code class="sig-name descname">pwritev</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">fd</span></em>, <em class="sig-param"><span class="n">buffers</span></em>, <em class="sig-param"><span class="n">offset</span></em>, <em class="sig-param"><span class="n">flags</span><span class="o">=</span><span class="default_value">0</span></em><span class="sig-paren">)</span><a class="headerlink" href="#os.pwritev" title="永久链接至目标">¶</a></dt>
<dd><p>将缓冲区 <em>buffers</em> 的内容写入文件描述符 <em>fd</em> 的偏移位置 <em>offset</em> 处，保持文件偏移量不变。缓冲区 <em>buffers</em> 必须是由 <a class="reference internal" href="../glossary.html#term-bytes-like-object"><span class="xref std std-term">字节类对象</span></a> 组成的序列。缓冲区以数组顺序处理。先写入第一个缓冲区的全部内容，再写入第二个缓冲区，照此继续。</p>
<p>flags 参数可以由零个或多个标志位进行按位或运算来得到：</p>
<ul class="simple">
<li><p><a class="reference internal" href="#os.RWF_DSYNC" title="os.RWF_DSYNC"><code class="xref py py-data docutils literal notranslate"><span class="pre">RWF_DSYNC</span></code></a></p></li>
<li><p><a class="reference internal" href="#os.RWF_SYNC" title="os.RWF_SYNC"><code class="xref py py-data docutils literal notranslate"><span class="pre">RWF_SYNC</span></code></a></p></li>
<li><p><a class="reference internal" href="#os.RWF_APPEND" title="os.RWF_APPEND"><code class="xref py py-data docutils literal notranslate"><span class="pre">RWF_APPEND</span></code></a></p></li>
</ul>
<p>返回实际写入的字节总数。</p>
<p>操作系统可能对允许使用的缓冲区数量有限制（使用 <a class="reference internal" href="#os.sysconf" title="os.sysconf"><code class="xref py py-func docutils literal notranslate"><span class="pre">sysconf()</span></code></a> 获取 <code class="docutils literal notranslate"><span class="pre">'SC_IOV_MAX'</span></code> 值）。</p>
<p>本方法结合了 <a class="reference internal" href="#os.writev" title="os.writev"><code class="xref py py-func docutils literal notranslate"><span class="pre">os.writev()</span></code></a> 和 <a class="reference internal" href="#os.pwrite" title="os.pwrite"><code class="xref py py-func docutils literal notranslate"><span class="pre">os.pwrite()</span></code></a> 的功能。</p>
<p class="availability"><a class="reference internal" href="intro.html#availability"><span class="std std-ref">可用性</span></a>：Linux 2.6.30 或更高版本，FreeBSD 6.0 或更高版本，OpenBSD 2.7 或更高版本，AIX 7.1 或更高版本。使用标志位需要 Linux 4.7 或更高版本。</p>
<div class="versionadded">
<p><span class="versionmodified added">3.7 新版功能.</span></p>
</div>
</dd></dl>

<dl class="py data">
<dt id="os.RWF_DSYNC">
<code class="sig-prename descclassname">os.</code><code class="sig-name descname">RWF_DSYNC</code><a class="headerlink" href="#os.RWF_DSYNC" title="永久链接至目标">¶</a></dt>
<dd><p>提供预写功能，等效于带 <a class="reference internal" href="#os.O_DSYNC" title="os.O_DSYNC"><code class="xref py py-data docutils literal notranslate"><span class="pre">O_DSYNC</span></code></a> 标志的 <a class="reference internal" href="#os.open" title="os.open"><code class="xref py py-func docutils literal notranslate"><span class="pre">os.open()</span></code></a> 。本标志只作用于通过系统调用写入的数据。</p>
<p class="availability"><a class="reference internal" href="intro.html#availability"><span class="std std-ref">可用性</span></a>：Linux 4.7 或更高版本。</p>
<div class="versionadded">
<p><span class="versionmodified added">3.7 新版功能.</span></p>
</div>
</dd></dl>

<dl class="py data">
<dt id="os.RWF_SYNC">
<code class="sig-prename descclassname">os.</code><code class="sig-name descname">RWF_SYNC</code><a class="headerlink" href="#os.RWF_SYNC" title="永久链接至目标">¶</a></dt>
<dd><p>提供预写功能，等效于带 <a class="reference internal" href="#os.O_SYNC" title="os.O_SYNC"><code class="xref py py-data docutils literal notranslate"><span class="pre">O_SYNC</span></code></a> 标志的 <a class="reference internal" href="#os.open" title="os.open"><code class="xref py py-func docutils literal notranslate"><span class="pre">os.open()</span></code></a> 。本标志只作用于通过系统调用写入的数据。</p>
<p class="availability"><a class="reference internal" href="intro.html#availability"><span class="std std-ref">可用性</span></a>：Linux 4.7 或更高版本。</p>
<div class="versionadded">
<p><span class="versionmodified added">3.7 新版功能.</span></p>
</div>
</dd></dl>

<dl class="py data">
<dt id="os.RWF_APPEND">
<code class="sig-prename descclassname">os.</code><code class="sig-name descname">RWF_APPEND</code><a class="headerlink" href="#os.RWF_APPEND" title="永久链接至目标">¶</a></dt>
<dd><p>提供预写功能，等效于带 <a class="reference internal" href="#os.O_APPEND" title="os.O_APPEND"><code class="xref py py-data docutils literal notranslate"><span class="pre">O_APPEND</span></code></a> 标志的 <a class="reference internal" href="#os.open" title="os.open"><code class="xref py py-func docutils literal notranslate"><span class="pre">os.open()</span></code></a> 。本标志只对 <a class="reference internal" href="#os.pwritev" title="os.pwritev"><code class="xref py py-func docutils literal notranslate"><span class="pre">os.pwritev()</span></code></a> 有意义，只作用于通过系统调用写入的数据。参数 <em>offset</em> 对写入操作无效；数据总是会添加到文件的末尾。但如果 <em>offset</em> 参数为 <code class="docutils literal notranslate"><span class="pre">-1</span></code>，则会刷新当前文件的 <em>offset</em> 。</p>
<p class="availability"><a class="reference internal" href="intro.html#availability"><span class="std std-ref">可用性</span></a>：Linux 4.16 以上版本。</p>
<div class="versionadded">
<p><span class="versionmodified added">3.10 新版功能.</span></p>
</div>
</dd></dl>

<dl class="py function">
<dt id="os.read">
<code class="sig-prename descclassname">os.</code><code class="sig-name descname">read</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">fd</span></em>, <em class="sig-param"><span class="n">n</span></em><span class="sig-paren">)</span><a class="headerlink" href="#os.read" title="永久链接至目标">¶</a></dt>
<dd><p>从文件描述符 <em>fd</em> 中读取至多 <em>n</em> 个字节。</p>
<p>返回所读取字节的字节串 (bytestring)。如果到达了 <em>fd</em> 指向的文件末尾，则返回空字节对象。</p>
<div class="admonition note">
<p class="admonition-title">注解</p>
<p>该功能适用于低级 I/O 操作，必须用于 <a class="reference internal" href="#os.open" title="os.open"><code class="xref py py-func docutils literal notranslate"><span class="pre">os.open()</span></code></a> 或 <a class="reference internal" href="#os.pipe" title="os.pipe"><code class="xref py py-func docutils literal notranslate"><span class="pre">pipe()</span></code></a> 返回的文件描述符。若要读取由内建函数 <a class="reference internal" href="functions.html#open" title="open"><code class="xref py py-func docutils literal notranslate"><span class="pre">open()</span></code></a>、<a class="reference internal" href="#os.popen" title="os.popen"><code class="xref py py-func docutils literal notranslate"><span class="pre">popen()</span></code></a>、<a class="reference internal" href="#os.fdopen" title="os.fdopen"><code class="xref py py-func docutils literal notranslate"><span class="pre">fdopen()</span></code></a> 或 <a class="reference internal" href="sys.html#sys.stdin" title="sys.stdin"><code class="xref py py-data docutils literal notranslate"><span class="pre">sys.stdin</span></code></a> 返回的 &quot;文件对象&quot;，则应使用其相应的 <code class="xref py py-meth docutils literal notranslate"><span class="pre">read()</span></code> 或 <code class="xref py py-meth docutils literal notranslate"><span class="pre">readline()</span></code> 方法。</p>
</div>
<div class="versionchanged">
<p><span class="versionmodified changed">在 3.5 版更改: </span>如果系统调用被中断，但信号处理程序没有触发异常，此函数现在会重试系统调用，而不是触发 <a class="reference internal" href="exceptions.html#InterruptedError" title="InterruptedError"><code class="xref py py-exc docutils literal notranslate"><span class="pre">InterruptedError</span></code></a> 异常 (原因详见 <span class="target" id="index-88"></span><a class="pep reference external" href="https://www.python.org/dev/peps/pep-0475"><strong>PEP 475</strong></a>)。</p>
</div>
</dd></dl>

<dl class="py function">
<dt id="os.sendfile">
<code class="sig-prename descclassname">os.</code><code class="sig-name descname">sendfile</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">out_fd</span></em>, <em class="sig-param"><span class="n">in_fd</span></em>, <em class="sig-param"><span class="n">offset</span></em>, <em class="sig-param"><span class="n">count</span></em><span class="sig-paren">)</span><a class="headerlink" href="#os.sendfile" title="永久链接至目标">¶</a></dt>
<dt>
<code class="sig-prename descclassname">os.</code><code class="sig-name descname">sendfile</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">out_fd</span></em>, <em class="sig-param"><span class="n">in_fd</span></em>, <em class="sig-param"><span class="n">offset</span></em>, <em class="sig-param"><span class="n">count</span></em>, <em class="sig-param"><span class="n">headers</span><span class="o">=</span><span class="default_value">()</span></em>, <em class="sig-param"><span class="n">trailers</span><span class="o">=</span><span class="default_value">()</span></em>, <em class="sig-param"><span class="n">flags</span><span class="o">=</span><span class="default_value">0</span></em><span class="sig-paren">)</span></dt>
<dd><p>将文件描述符 <em>in_fd</em> 中的 <em>count</em> 字节复制到文件描述符 <em>out_fd</em> 的偏移位置 <em>offset</em> 处。返回复制的字节数，如果到达 EOF，返回 <code class="docutils literal notranslate"><span class="pre">0</span></code>。</p>
<p>定义了 <a class="reference internal" href="#os.sendfile" title="os.sendfile"><code class="xref py py-func docutils literal notranslate"><span class="pre">sendfile()</span></code></a> 的所有平台均支持第一种函数用法。</p>
<p>在 Linux 上，将 <em>offset</em> 设置为 <code class="docutils literal notranslate"><span class="pre">None</span></code>，则从 <em>in_fd</em> 的当前位置开始读取，并更新 <em>in_fd</em> 的位置。</p>
<p>第二种情况可以被用于 macOS 和 FreeBSD，其中 <em>headers</em> 和 <em>trailers</em> 是任意的缓冲区序列，它们会在写入来自 <em>in_fd</em> 的数据之前被写入。 它的返回内容与第一种情况相同。</p>
<p>在 macOS 和 FreeBSD 上，传入 <code class="docutils literal notranslate"><span class="pre">0</span></code> 值作为 <em>count</em> 将指定持续发送直至到达 <em>in_fd</em> 的末尾。</p>
<p>所有平台都支持将套接字作为 <em>out_fd</em> 文件描述符，有些平台也支持其他类型（如常规文件或管道）。</p>
<p>跨平台应用程序不应使用 <em>headers</em>、<em>trailers</em> 和 <em>flags</em> 参数。</p>
<p class="availability"><a class="reference internal" href="intro.html#availability"><span class="std std-ref">可用性</span></a>: Unix。</p>
<div class="admonition note">
<p class="admonition-title">注解</p>
<p>有关 <a class="reference internal" href="#os.sendfile" title="os.sendfile"><code class="xref py py-func docutils literal notranslate"><span class="pre">sendfile()</span></code></a> 的高级封装，参见 <a class="reference internal" href="socket.html#socket.socket.sendfile" title="socket.socket.sendfile"><code class="xref py py-meth docutils literal notranslate"><span class="pre">socket.socket.sendfile()</span></code></a>。</p>
</div>
<div class="versionadded">
<p><span class="versionmodified added">3.3 新版功能.</span></p>
</div>
<div class="versionchanged">
<p><span class="versionmodified changed">在 3.9 版更改: </span><em>out</em> 和 <em>in</em> 参数被重命名为 <em>out_fd</em> 和 <em>in_fd</em>。</p>
</div>
</dd></dl>

<dl class="py function">
<dt id="os.set_blocking">
<code class="sig-prename descclassname">os.</code><code class="sig-name descname">set_blocking</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">fd</span></em>, <em class="sig-param"><span class="n">blocking</span></em><span class="sig-paren">)</span><a class="headerlink" href="#os.set_blocking" title="永久链接至目标">¶</a></dt>
<dd><p>设置指定文件描述符的阻塞模式：如果 blocking 为 <code class="docutils literal notranslate"><span class="pre">False</span></code>，则为该描述符设置 <a class="reference internal" href="#os.O_NONBLOCK" title="os.O_NONBLOCK"><code class="xref py py-data docutils literal notranslate"><span class="pre">O_NONBLOCK</span></code></a> 标志位，反之则清除该标志位。</p>
<p>参见 <a class="reference internal" href="#os.get_blocking" title="os.get_blocking"><code class="xref py py-func docutils literal notranslate"><span class="pre">get_blocking()</span></code></a> 和 <a class="reference internal" href="socket.html#socket.socket.setblocking" title="socket.socket.setblocking"><code class="xref py py-meth docutils literal notranslate"><span class="pre">socket.socket.setblocking()</span></code></a>。</p>
<p class="availability"><a class="reference internal" href="intro.html#availability"><span class="std std-ref">可用性</span></a>: Unix。</p>
<div class="versionadded">
<p><span class="versionmodified added">3.5 新版功能.</span></p>
</div>
</dd></dl>

<dl class="py data">
<dt id="os.SF_NODISKIO">
<code class="sig-prename descclassname">os.</code><code class="sig-name descname">SF_NODISKIO</code><a class="headerlink" href="#os.SF_NODISKIO" title="永久链接至目标">¶</a></dt>
<dt id="os.SF_MNOWAIT">
<code class="sig-prename descclassname">os.</code><code class="sig-name descname">SF_MNOWAIT</code><a class="headerlink" href="#os.SF_MNOWAIT" title="永久链接至目标">¶</a></dt>
<dt id="os.SF_SYNC">
<code class="sig-prename descclassname">os.</code><code class="sig-name descname">SF_SYNC</code><a class="headerlink" href="#os.SF_SYNC" title="永久链接至目标">¶</a></dt>
<dd><p><a class="reference internal" href="#os.sendfile" title="os.sendfile"><code class="xref py py-func docutils literal notranslate"><span class="pre">sendfile()</span></code></a> 函数的参数（假设当前实现支持这些参数）。</p>
<p class="availability"><a class="reference internal" href="intro.html#availability"><span class="std std-ref">可用性</span></a>: Unix。</p>
<div class="versionadded">
<p><span class="versionmodified added">3.3 新版功能.</span></p>
</div>
</dd></dl>

<dl class="py function">
<dt id="os.splice">
<code class="sig-prename descclassname">os.</code><code class="sig-name descname">splice</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">src</span></em>, <em class="sig-param"><span class="n">dst</span></em>, <em class="sig-param"><span class="n">count</span></em>, <em class="sig-param"><span class="n">offset_src</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">offset_dst</span><span class="o">=</span><span class="default_value">None</span></em><span class="sig-paren">)</span><a class="headerlink" href="#os.splice" title="永久链接至目标">¶</a></dt>
<dd><p>由文件描述符 <em>src</em> 传输 <em>count</em> 字节，从偏移量 <em>offset_src</em> 开始读取，到文件描述符 <em>dst</em>，从偏移量 <em>offset_dst</em> 开始写入。至少得有一个文件描述符必须指向管道。如果 <em>offset_src</em> 为 None，则 <em>src</em> 将从当前位置开始读取；<em>offset_dst</em> 同理。指向管道的文件描述符，其偏移量必须为 <code class="docutils literal notranslate"><span class="pre">None</span></code>。 <em>src</em> 和 <em>dst</em> 指向的文件必须处于同一文件系统中，否则将会触发  <a class="reference internal" href="exceptions.html#OSError" title="OSError"><code class="xref py py-exc docutils literal notranslate"><span class="pre">OSError</span></code></a> ，其 <a class="reference internal" href="exceptions.html#OSError.errno" title="OSError.errno"><code class="xref py py-attr docutils literal notranslate"><span class="pre">errno</span></code></a> 将被设为 <a class="reference internal" href="errno.html#errno.EXDEV" title="errno.EXDEV"><code class="xref py py-data docutils literal notranslate"><span class="pre">errno.EXDEV</span></code></a> 。</p>
<p>此复制的完成没有额外的从内核到用户空间再回到内核的数据转移花费。另外，一些文件系统可能实现额外的优化。完成复制就如同打开两个二进制文件一样。</p>
<p>调用成功后，返回拼接到管道的字节数或从管道拼接出来的字节数。返回值为 0 意味着输入结束。如果 <em>src</em> 指向一个管道，则意味着没有数据需要传输，而且由于没有写入程序连到管道的写入端，所以将不会阻塞。</p>
<p class="availability"><a class="reference internal" href="intro.html#availability"><span class="std std-ref">可用性</span></a>： Linux &gt;= 2.6.27 且 glibc &gt;= 2.5。</p>
<div class="versionadded">
<p><span class="versionmodified added">3.10 新版功能.</span></p>
</div>
</dd></dl>

<dl class="py data">
<dt id="os.SPLICE_F_MOVE">
<code class="sig-prename descclassname">os.</code><code class="sig-name descname">SPLICE_F_MOVE</code><a class="headerlink" href="#os.SPLICE_F_MOVE" title="永久链接至目标">¶</a></dt>
<dt id="os.SPLICE_F_NONBLOCK">
<code class="sig-prename descclassname">os.</code><code class="sig-name descname">SPLICE_F_NONBLOCK</code><a class="headerlink" href="#os.SPLICE_F_NONBLOCK" title="永久链接至目标">¶</a></dt>
<dt id="os.SPLICE_F_MORE">
<code class="sig-prename descclassname">os.</code><code class="sig-name descname">SPLICE_F_MORE</code><a class="headerlink" href="#os.SPLICE_F_MORE" title="永久链接至目标">¶</a></dt>
<dd><div class="versionadded">
<p><span class="versionmodified added">3.10 新版功能.</span></p>
</div>
</dd></dl>

<dl class="py function">
<dt id="os.readv">
<code class="sig-prename descclassname">os.</code><code class="sig-name descname">readv</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">fd</span></em>, <em class="sig-param"><span class="n">buffers</span></em><span class="sig-paren">)</span><a class="headerlink" href="#os.readv" title="永久链接至目标">¶</a></dt>
<dd><p>从文件描述符 <em>fd</em> 将数据读取至多个可变的 <a class="reference internal" href="../glossary.html#term-bytes-like-object"><span class="xref std std-term">字节类对象</span></a> 缓冲区 <em>buffers</em> 中。将数据依次存放到每个缓冲区中，填满一个后继续存放到序列中的下一个缓冲区，来保存其余数据。</p>
<p>返回实际读取的字节总数，该总数可以小于所有对象的总容量。</p>
<p>操作系统可能对允许使用的缓冲区数量有限制（使用 <a class="reference internal" href="#os.sysconf" title="os.sysconf"><code class="xref py py-func docutils literal notranslate"><span class="pre">sysconf()</span></code></a> 获取 <code class="docutils literal notranslate"><span class="pre">'SC_IOV_MAX'</span></code> 值）。</p>
<p class="availability"><a class="reference internal" href="intro.html#availability"><span class="std std-ref">可用性</span></a>: Unix。</p>
<div class="versionadded">
<p><span class="versionmodified added">3.3 新版功能.</span></p>
</div>
</dd></dl>

<dl class="py function">
<dt id="os.tcgetpgrp">
<code class="sig-prename descclassname">os.</code><code class="sig-name descname">tcgetpgrp</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">fd</span></em><span class="sig-paren">)</span><a class="headerlink" href="#os.tcgetpgrp" title="永久链接至目标">¶</a></dt>
<dd><p>返回与 <em>fd</em> 指定的终端相关联的进程组（<em>fd</em> 是由 <a class="reference internal" href="#os.open" title="os.open"><code class="xref py py-func docutils literal notranslate"><span class="pre">os.open()</span></code></a> 返回的已打开的文件描述符）。</p>
<p class="availability"><a class="reference internal" href="intro.html#availability"><span class="std std-ref">可用性</span></a>: Unix。</p>
</dd></dl>

<dl class="py function">
<dt id="os.tcsetpgrp">
<code class="sig-prename descclassname">os.</code><code class="sig-name descname">tcsetpgrp</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">fd</span></em>, <em class="sig-param"><span class="n">pg</span></em><span class="sig-paren">)</span><a class="headerlink" href="#os.tcsetpgrp" title="永久链接至目标">¶</a></dt>
<dd><p>设置与 <em>fd</em> 指定的终端相关联的进程组为 <em>pg*（*fd</em> 是由 <a class="reference internal" href="#os.open" title="os.open"><code class="xref py py-func docutils literal notranslate"><span class="pre">os.open()</span></code></a> 返回的已打开的文件描述符）。</p>
<p class="availability"><a class="reference internal" href="intro.html#availability"><span class="std std-ref">可用性</span></a>: Unix。</p>
</dd></dl>

<dl class="py function">
<dt id="os.ttyname">
<code class="sig-prename descclassname">os.</code><code class="sig-name descname">ttyname</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">fd</span></em><span class="sig-paren">)</span><a class="headerlink" href="#os.ttyname" title="永久链接至目标">¶</a></dt>
<dd><p>返回一个字符串，该字符串表示与文件描述符 <em>fd</em> 关联的终端。如果 <em>fd</em> 没有与终端关联，则抛出异常。</p>
<p class="availability"><a class="reference internal" href="intro.html#availability"><span class="std std-ref">可用性</span></a>: Unix。</p>
</dd></dl>

<dl class="py function">
<dt id="os.write">
<code class="sig-prename descclassname">os.</code><code class="sig-name descname">write</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">fd</span></em>, <em class="sig-param"><span class="n">str</span></em><span class="sig-paren">)</span><a class="headerlink" href="#os.write" title="永久链接至目标">¶</a></dt>
<dd><p>将 <em>str</em> 中的字节串 (bytestring) 写入文件描述符 <em>fd</em>。</p>
<p>返回实际写入的字节数。</p>
<div class="admonition note">
<p class="admonition-title">注解</p>
<p>该功能适用于低级 I/O 操作，必须用于 <a class="reference internal" href="#os.open" title="os.open"><code class="xref py py-func docutils literal notranslate"><span class="pre">os.open()</span></code></a> 或 <a class="reference internal" href="#os.pipe" title="os.pipe"><code class="xref py py-func docutils literal notranslate"><span class="pre">pipe()</span></code></a> 返回的文件描述符。若要写入由内建函数 <a class="reference internal" href="functions.html#open" title="open"><code class="xref py py-func docutils literal notranslate"><span class="pre">open()</span></code></a>、<a class="reference internal" href="#os.popen" title="os.popen"><code class="xref py py-func docutils literal notranslate"><span class="pre">popen()</span></code></a>、<a class="reference internal" href="#os.fdopen" title="os.fdopen"><code class="xref py py-func docutils literal notranslate"><span class="pre">fdopen()</span></code></a>、<a class="reference internal" href="sys.html#sys.stdout" title="sys.stdout"><code class="xref py py-data docutils literal notranslate"><span class="pre">sys.stdout</span></code></a> 或 <a class="reference internal" href="sys.html#sys.stderr" title="sys.stderr"><code class="xref py py-data docutils literal notranslate"><span class="pre">sys.stderr</span></code></a> 返回的 &quot;文件对象&quot;，则应使用其相应的 <code class="xref py py-meth docutils literal notranslate"><span class="pre">write()</span></code> 方法。</p>
</div>
<div class="versionchanged">
<p><span class="versionmodified changed">在 3.5 版更改: </span>如果系统调用被中断，但信号处理程序没有触发异常，此函数现在会重试系统调用，而不是触发 <a class="reference internal" href="exceptions.html#InterruptedError" title="InterruptedError"><code class="xref py py-exc docutils literal notranslate"><span class="pre">InterruptedError</span></code></a> 异常 (原因详见 <span class="target" id="index-89"></span><a class="pep reference external" href="https://www.python.org/dev/peps/pep-0475"><strong>PEP 475</strong></a>)。</p>
</div>
</dd></dl>

<dl class="py function">
<dt id="os.writev">
<code class="sig-prename descclassname">os.</code><code class="sig-name descname">writev</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">fd</span></em>, <em class="sig-param"><span class="n">buffers</span></em><span class="sig-paren">)</span><a class="headerlink" href="#os.writev" title="永久链接至目标">¶</a></dt>
<dd><p>将缓冲区 <em>buffers</em> 的内容写入文件描述符 <em>fd</em>。缓冲区 <em>buffers</em> 必须是由 <a class="reference internal" href="../glossary.html#term-bytes-like-object"><span class="xref std std-term">字节类对象</span></a> 组成的序列。缓冲区以数组顺序处理。先写入第一个缓冲区的全部内容，再写入第二个缓冲区，照此继续。</p>
<p>返回实际写入的字节总数。</p>
<p>操作系统可能对允许使用的缓冲区数量有限制（使用 <a class="reference internal" href="#os.sysconf" title="os.sysconf"><code class="xref py py-func docutils literal notranslate"><span class="pre">sysconf()</span></code></a> 获取 <code class="docutils literal notranslate"><span class="pre">'SC_IOV_MAX'</span></code> 值）。</p>
<p class="availability"><a class="reference internal" href="intro.html#availability"><span class="std std-ref">可用性</span></a>: Unix。</p>
<div class="versionadded">
<p><span class="versionmodified added">3.3 新版功能.</span></p>
</div>
</dd></dl>

<section id="querying-the-size-of-a-terminal">
<span id="terminal-size"></span><h3>查询终端的尺寸<a class="headerlink" href="#querying-the-size-of-a-terminal" title="永久链接至标题">¶</a></h3>
<div class="versionadded">
<p><span class="versionmodified added">3.3 新版功能.</span></p>
</div>
<dl class="py function">
<dt id="os.get_terminal_size">
<code class="sig-prename descclassname">os.</code><code class="sig-name descname">get_terminal_size</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">fd</span><span class="o">=</span><span class="default_value">STDOUT_FILENO</span></em><span class="sig-paren">)</span><a class="headerlink" href="#os.get_terminal_size" title="永久链接至目标">¶</a></dt>
<dd><p>返回终端窗口的尺寸，格式为 <code class="docutils literal notranslate"><span class="pre">(columns,</span> <span class="pre">lines)</span></code>，它是类型为 <a class="reference internal" href="#os.terminal_size" title="os.terminal_size"><code class="xref py py-class docutils literal notranslate"><span class="pre">terminal_size</span></code></a> 的元组。</p>
<p>可选参数 <code class="docutils literal notranslate"><span class="pre">fd</span></code> （默认为 <code class="docutils literal notranslate"><span class="pre">STDOUT_FILENO</span></code> 或标准输出）指定应查询的文件描述符。</p>
<p>如果文件描述符未连接到终端，则抛出 <a class="reference internal" href="exceptions.html#OSError" title="OSError"><code class="xref py py-exc docutils literal notranslate"><span class="pre">OSError</span></code></a> 异常。</p>
<p><a class="reference internal" href="shutil.html#shutil.get_terminal_size" title="shutil.get_terminal_size"><code class="xref py py-func docutils literal notranslate"><span class="pre">shutil.get_terminal_size()</span></code></a> 是供常规使用的高阶函数，<code class="docutils literal notranslate"><span class="pre">os.get_terminal_size</span></code> 是其底层的实现。</p>
<p class="availability"><a class="reference internal" href="intro.html#availability"><span class="std std-ref">可用性</span></a>: Unix, Windows。</p>
</dd></dl>

<dl class="py class">
<dt id="os.terminal_size">
<em class="property">class </em><code class="sig-prename descclassname">os.</code><code class="sig-name descname">terminal_size</code><a class="headerlink" href="#os.terminal_size" title="永久链接至目标">¶</a></dt>
<dd><p>元组的子类，存储终端窗口尺寸 <code class="docutils literal notranslate"><span class="pre">(columns,</span> <span class="pre">lines)</span></code>。</p>
<dl class="py attribute">
<dt id="os.terminal_size.columns">
<code class="sig-name descname">columns</code><a class="headerlink" href="#os.terminal_size.columns" title="永久链接至目标">¶</a></dt>
<dd><p>终端窗口的宽度，单位为字符。</p>
</dd></dl>

<dl class="py attribute">
<dt id="os.terminal_size.lines">
<code class="sig-name descname">lines</code><a class="headerlink" href="#os.terminal_size.lines" title="永久链接至目标">¶</a></dt>
<dd><p>终端窗口的高度，单位为字符。</p>
</dd></dl>

</dd></dl>

</section>
<section id="inheritance-of-file-descriptors">
<span id="fd-inheritance"></span><h3>文件描述符的继承<a class="headerlink" href="#inheritance-of-file-descriptors" title="永久链接至标题">¶</a></h3>
<div class="versionadded">
<p><span class="versionmodified added">3.4 新版功能.</span></p>
</div>
<p>每个文件描述符都有一个 &quot;inheritable&quot;（可继承）标志位，该标志位控制了文件描述符是否可以由子进程继承。从 Python 3.4 开始，由 Python 创建的文件描述符默认是不可继承的。</p>
<p>在 UNIX 上，执行新程序时，不可继承的文件描述符在子进程中是关闭的，其他文件描述符将被继承。</p>
<p>在 Windows 上，不可继承的句柄和文件描述符在子进程中是关闭的，但标准流（文件描述符 0、1 和 2 即标准输入、标准输出和标准错误）是始终继承的。如果使用 <a class="reference internal" href="#os.spawnl" title="os.spawnl"><code class="xref py py-func docutils literal notranslate"><span class="pre">spawn*</span></code></a> 函数，所有可继承的句柄和文件描述符都将被继承。如果使用 <a class="reference internal" href="subprocess.html#module-subprocess" title="subprocess: Subprocess management."><code class="xref py py-mod docutils literal notranslate"><span class="pre">subprocess</span></code></a> 模块，将关闭除标准流以外的所有文件描述符，并且仅当 <em>close_fds</em> 参数为 <code class="docutils literal notranslate"><span class="pre">False</span></code> 时才继承可继承的句柄。</p>
<dl class="py function">
<dt id="os.get_inheritable">
<code class="sig-prename descclassname">os.</code><code class="sig-name descname">get_inheritable</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">fd</span></em><span class="sig-paren">)</span><a class="headerlink" href="#os.get_inheritable" title="永久链接至目标">¶</a></dt>
<dd><p>获取指定文件描述符的“可继承”标志位（为布尔值）。</p>
</dd></dl>

<dl class="py function">
<dt id="os.set_inheritable">
<code class="sig-prename descclassname">os.</code><code class="sig-name descname">set_inheritable</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">fd</span></em>, <em class="sig-param"><span class="n">inheritable</span></em><span class="sig-paren">)</span><a class="headerlink" href="#os.set_inheritable" title="永久链接至目标">¶</a></dt>
<dd><p>设置指定文件描述符的“可继承”标志位。</p>
</dd></dl>

<dl class="py function">
<dt id="os.get_handle_inheritable">
<code class="sig-prename descclassname">os.</code><code class="sig-name descname">get_handle_inheritable</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">handle</span></em><span class="sig-paren">)</span><a class="headerlink" href="#os.get_handle_inheritable" title="永久链接至目标">¶</a></dt>
<dd><p>获取指定句柄的“可继承”标志位（为布尔值）。</p>
<p class="availability"><a class="reference internal" href="intro.html#availability"><span class="std std-ref">可用性</span></a>: Windows。</p>
</dd></dl>

<dl class="py function">
<dt id="os.set_handle_inheritable">
<code class="sig-prename descclassname">os.</code><code class="sig-name descname">set_handle_inheritable</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">handle</span></em>, <em class="sig-param"><span class="n">inheritable</span></em><span class="sig-paren">)</span><a class="headerlink" href="#os.set_handle_inheritable" title="永久链接至目标">¶</a></dt>
<dd><p>设置指定句柄的“可继承”标志位。</p>
<p class="availability"><a class="reference internal" href="intro.html#availability"><span class="std std-ref">可用性</span></a>: Windows。</p>
</dd></dl>

</section>
</section>
<section id="files-and-directories">
<span id="os-file-dir"></span><h2>文件和目录<a class="headerlink" href="#files-and-directories" title="永久链接至标题">¶</a></h2>
<p>在某些 Unix 平台上，许多函数支持以下一项或多项功能：</p>
<ul id="path-fd">
<li><p><strong>指定文件描述符为参数：</strong> 通常在 <a class="reference internal" href="#module-os" title="os: Miscellaneous operating system interfaces."><code class="xref py py-mod docutils literal notranslate"><span class="pre">os</span></code></a> 模块中提供给函数的 <em>path</em> 参数必须是表示文件路径的字符串，但是，某些函数现在可以接受其 <em>path</em> 参数为打开文件描述符，该函数将对描述符指向的文件进行操作。（对于 POSIX 系统，Python 将调用以 <code class="docutils literal notranslate"><span class="pre">f</span></code> 开头的函数变体（如调用 <code class="docutils literal notranslate"><span class="pre">fchdir</span></code> 而不是 <code class="docutils literal notranslate"><span class="pre">chdir</span></code>）。）</p>
<p>可以用 <a class="reference internal" href="#os.supports_fd" title="os.supports_fd"><code class="xref py py-data docutils literal notranslate"><span class="pre">os.supports_fd</span></code></a> 检查某个函数在你的平台上是否支持将 <em>path</em> 参数指定为文件描述符。如果不支持，使用该功能将抛出 <a class="reference internal" href="exceptions.html#NotImplementedError" title="NotImplementedError"><code class="xref py py-exc docutils literal notranslate"><span class="pre">NotImplementedError</span></code></a> 异常。</p>
<p>如果该函数还支持 <em>dir_fd</em> 或 <em>follow_symlinks</em> 参数，那么用文件描述符作为 <em>path</em> 后就不能再指定上述参数了。</p>
</li>
</ul>
<ul id="dir-fd">
<li><p><strong>基于目录描述符的相对路径：</strong> 如果 <em>dir_fd</em> 不是 <code class="docutils literal notranslate"><span class="pre">None</span></code>，它就应该是一个指向目录的文件描述符，这时待操作的 path 应该是相对路径，相对路径是相对于前述目录的。如果 path 是绝对路径，则 <em>dir_fd</em> 将被忽略。（对于 POSIX 系统，Python 将调用该函数的变体，变体以 <code class="docutils literal notranslate"><span class="pre">at</span></code> 结尾，可能以 <code class="docutils literal notranslate"><span class="pre">f</span></code> 开头（如调用 <code class="docutils literal notranslate"><span class="pre">faccessat</span></code> 而不是 <code class="docutils literal notranslate"><span class="pre">access</span></code>）。</p>
<p>可以用 <a class="reference internal" href="#os.supports_dir_fd" title="os.supports_dir_fd"><code class="xref py py-data docutils literal notranslate"><span class="pre">os.supports_dir_fd</span></code></a> 检查某个函数在你的平台上是否支持 <em>dir_fd</em>。如果不支持，使用该功能将抛出 <a class="reference internal" href="exceptions.html#NotImplementedError" title="NotImplementedError"><code class="xref py py-exc docutils literal notranslate"><span class="pre">NotImplementedError</span></code></a> 异常。</p>
</li>
</ul>
<ul id="follow-symlinks">
<li><p><strong>不跟踪符号链接：</strong> 如果 <em>follow_symlinks</em> 为 <code class="docutils literal notranslate"><span class="pre">False</span></code>，并且待操作路径的最后一个元素是符号链接，则该函数将在符号链接本身而不是链接所指向的文件上操作。（对于 POSIX 系统，Python 将调用该函数的 <code class="docutils literal notranslate"><span class="pre">l...</span></code> 变体。）</p>
<p>可以用 <a class="reference internal" href="#os.supports_follow_symlinks" title="os.supports_follow_symlinks"><code class="xref py py-data docutils literal notranslate"><span class="pre">os.supports_follow_symlinks</span></code></a> 检查某个函数在你的平台上是否支持 <em>follow_symlinks</em>。如果不支持，使用该功能将抛出 <a class="reference internal" href="exceptions.html#NotImplementedError" title="NotImplementedError"><code class="xref py py-exc docutils literal notranslate"><span class="pre">NotImplementedError</span></code></a> 异常。</p>
</li>
</ul>
<dl class="py function">
<dt id="os.access">
<code class="sig-prename descclassname">os.</code><code class="sig-name descname">access</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">path</span></em>, <em class="sig-param"><span class="n">mode</span></em>, <em class="sig-param"><span class="o">*</span></em>, <em class="sig-param"><span class="n">dir_fd</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">effective_ids</span><span class="o">=</span><span class="default_value">False</span></em>, <em class="sig-param"><span class="n">follow_symlinks</span><span class="o">=</span><span class="default_value">True</span></em><span class="sig-paren">)</span><a class="headerlink" href="#os.access" title="永久链接至目标">¶</a></dt>
<dd><p>使用 实际用户ID/用户组ID 测试对 <em>path</em> 的访问。请注意，大多数测试操作将使用 有效用户ID/用户组ID，因此可以在 suid/sgid 环境中运用此例程，来测试调用用户是否具有对 <em>path</em> 的指定访问权限。<em>mode</em> 为 <a class="reference internal" href="#os.F_OK" title="os.F_OK"><code class="xref py py-const docutils literal notranslate"><span class="pre">F_OK</span></code></a> 时用于测试 <em>path</em> 是否存在，也可以对 <a class="reference internal" href="#os.R_OK" title="os.R_OK"><code class="xref py py-const docutils literal notranslate"><span class="pre">R_OK</span></code></a>、<a class="reference internal" href="#os.W_OK" title="os.W_OK"><code class="xref py py-const docutils literal notranslate"><span class="pre">W_OK</span></code></a> 和 <a class="reference internal" href="#os.X_OK" title="os.X_OK"><code class="xref py py-const docutils literal notranslate"><span class="pre">X_OK</span></code></a> 中的一个或多个进行“或”运算来测试指定权限。允许访问则返回 <a class="reference internal" href="constants.html#True" title="True"><code class="xref py py-const docutils literal notranslate"><span class="pre">True</span></code></a>，否则返回 <a class="reference internal" href="constants.html#False" title="False"><code class="xref py py-const docutils literal notranslate"><span class="pre">False</span></code></a>。更多信息请参见 Unix 手册页 <em class="manpage"><a class="manpage reference external" href="https://manpages.debian.org/access(2)">access(2)</a></em>。</p>
<p>本函数支持指定 <a class="reference internal" href="#dir-fd"><span class="std std-ref">基于目录描述符的相对路径</span></a> 和 <a class="reference internal" href="#follow-symlinks"><span class="std std-ref">不跟踪符号链接</span></a>。</p>
<p>如果 <em>effective_ids</em> 为 <code class="docutils literal notranslate"><span class="pre">True</span></code>，<a class="reference internal" href="#os.access" title="os.access"><code class="xref py py-func docutils literal notranslate"><span class="pre">access()</span></code></a> 将使用 有效用户ID/用户组ID 而非 实际用户ID/用户组ID 进行访问检查。您的平台可能不支持 <em>effective_ids</em>，您可以使用 <a class="reference internal" href="#os.supports_effective_ids" title="os.supports_effective_ids"><code class="xref py py-data docutils literal notranslate"><span class="pre">os.supports_effective_ids</span></code></a> 检查它是否可用。如果不可用，使用它时会抛出 <a class="reference internal" href="exceptions.html#NotImplementedError" title="NotImplementedError"><code class="xref py py-exc docutils literal notranslate"><span class="pre">NotImplementedError</span></code></a> 异常。</p>
<div class="admonition note">
<p class="admonition-title">注解</p>
<p>使用 <a class="reference internal" href="#os.access" title="os.access"><code class="xref py py-func docutils literal notranslate"><span class="pre">access()</span></code></a> 来检查用户是否具有某项权限（如打开文件的权限），然后再使用 <a class="reference internal" href="functions.html#open" title="open"><code class="xref py py-func docutils literal notranslate"><span class="pre">open()</span></code></a> 打开文件，这样做存在一个安全漏洞，因为用户可能会在检查和打开文件之间的时间里做其他操作。推荐使用 <a class="reference internal" href="../glossary.html#term-EAFP"><span class="xref std std-term">EAFP</span></a> 技术。如:</p>
<div class="highlight-python3 notranslate"><div class="highlight"><pre><span></span><span class="k">if</span> <span class="n">os</span><span class="o">.</span><span class="n">access</span><span class="p">(</span><span class="s2">&quot;myfile&quot;</span><span class="p">,</span> <span class="n">os</span><span class="o">.</span><span class="n">R_OK</span><span class="p">):</span>
    <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="s2">&quot;myfile&quot;</span><span class="p">)</span> <span class="k">as</span> <span class="n">fp</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">fp</span><span class="o">.</span><span class="n">read</span><span class="p">()</span>
<span class="k">return</span> <span class="s2">&quot;some default data&quot;</span>
</pre></div>
</div>
<p>最好写成:</p>
<div class="highlight-python3 notranslate"><div class="highlight"><pre><span></span><span class="k">try</span><span class="p">:</span>
    <span class="n">fp</span> <span class="o">=</span> <span class="nb">open</span><span class="p">(</span><span class="s2">&quot;myfile&quot;</span><span class="p">)</span>
<span class="k">except</span> <span class="ne">PermissionError</span><span class="p">:</span>
    <span class="k">return</span> <span class="s2">&quot;some default data&quot;</span>
<span class="k">else</span><span class="p">:</span>
    <span class="k">with</span> <span class="n">fp</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">fp</span><span class="o">.</span><span class="n">read</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="admonition note">
<p class="admonition-title">注解</p>
<p>即使 <a class="reference internal" href="#os.access" title="os.access"><code class="xref py py-func docutils literal notranslate"><span class="pre">access()</span></code></a> 指示 I/O 操作会成功，但实际操作仍可能失败，尤其是对网络文件系统的操作，其权限语义可能超出常规的 POSIX 权限位模型。</p>
</div>
<div class="versionchanged">
<p><span class="versionmodified changed">在 3.3 版更改: </span>添加 <em>dir_fd</em>、<em>effective_ids</em> 和 <em>follow_symlinks</em> 参数。</p>
</div>
<div class="versionchanged">
<p><span class="versionmodified changed">在 3.6 版更改: </span>接受一个 <a class="reference internal" href="../glossary.html#term-path-like-object"><span class="xref std std-term">path-like object</span></a>。</p>
</div>
</dd></dl>

<dl class="py data">
<dt id="os.F_OK">
<code class="sig-prename descclassname">os.</code><code class="sig-name descname">F_OK</code><a class="headerlink" href="#os.F_OK" title="永久链接至目标">¶</a></dt>
<dt id="os.R_OK">
<code class="sig-prename descclassname">os.</code><code class="sig-name descname">R_OK</code><a class="headerlink" href="#os.R_OK" title="永久链接至目标">¶</a></dt>
<dt id="os.W_OK">
<code class="sig-prename descclassname">os.</code><code class="sig-name descname">W_OK</code><a class="headerlink" href="#os.W_OK" title="永久链接至目标">¶</a></dt>
<dt id="os.X_OK">
<code class="sig-prename descclassname">os.</code><code class="sig-name descname">X_OK</code><a class="headerlink" href="#os.X_OK" title="永久链接至目标">¶</a></dt>
<dd><p>作为 <a class="reference internal" href="#os.access" title="os.access"><code class="xref py py-func docutils literal notranslate"><span class="pre">access()</span></code></a> 的 <em>mode</em> 参数的可选值，分别测试 <em>path</em> 的存在性、可读性、可写性和可执行性。</p>
</dd></dl>

<dl class="py function">
<dt id="os.chdir">
<code class="sig-prename descclassname">os.</code><code class="sig-name descname">chdir</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">path</span></em><span class="sig-paren">)</span><a class="headerlink" href="#os.chdir" title="永久链接至目标">¶</a></dt>
<dd><p id="index-25">将当前工作目录更改为 <em>path</em>。</p>
<p>本函数支持 <a class="reference internal" href="#path-fd"><span class="std std-ref">指定文件描述符为参数</span></a>。其中，描述符必须指向打开的目录，不能是打开的文件。</p>
<p>本函数可以抛出 <a class="reference internal" href="exceptions.html#OSError" title="OSError"><code class="xref py py-exc docutils literal notranslate"><span class="pre">OSError</span></code></a> 及其子类的异常，如 <a class="reference internal" href="exceptions.html#FileNotFoundError" title="FileNotFoundError"><code class="xref py py-exc docutils literal notranslate"><span class="pre">FileNotFoundError</span></code></a>、<a class="reference internal" href="exceptions.html#PermissionError" title="PermissionError"><code class="xref py py-exc docutils literal notranslate"><span class="pre">PermissionError</span></code></a> 和 <a class="reference internal" href="exceptions.html#NotADirectoryError" title="NotADirectoryError"><code class="xref py py-exc docutils literal notranslate"><span class="pre">NotADirectoryError</span></code></a> 异常。</p>
<p class="audit-hook">引发一个 <a class="reference internal" href="sys.html#auditing"><span class="std std-ref">审计事件</span></a> <code class="docutils literal notranslate"><span class="pre">os.chdir</span></code>，附带参数 <code class="docutils literal notranslate"><span class="pre">path</span></code>。</p>
<div class="versionadded">
<p><span class="versionmodified added">3.3 新版功能: </span>在某些平台上新增支持将 <em>path</em> 参数指定为文件描述符。</p>
</div>
<div class="versionchanged">
<p><span class="versionmodified changed">在 3.6 版更改: </span>接受一个 <a class="reference internal" href="../glossary.html#term-path-like-object"><span class="xref std std-term">path-like object</span></a>。</p>
</div>
</dd></dl>

<dl class="py function">
<dt id="os.chflags">
<code class="sig-prename descclassname">os.</code><code class="sig-name descname">chflags</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">path</span></em>, <em class="sig-param"><span class="n">flags</span></em>, <em class="sig-param"><span class="o">*</span></em>, <em class="sig-param"><span class="n">follow_symlinks</span><span class="o">=</span><span class="default_value">True</span></em><span class="sig-paren">)</span><a class="headerlink" href="#os.chflags" title="永久链接至目标">¶</a></dt>
<dd><p>将 <em>path</em> 的 flags 设置为其他由数字表示的 <em>flags</em>。<em>flags</em> 可以用以下值按位或组合起来（以下值在 <a class="reference internal" href="stat.html#module-stat" title="stat: Utilities for interpreting the results of os.stat(), os.lstat() and os.fstat()."><code class="xref py py-mod docutils literal notranslate"><span class="pre">stat</span></code></a> 模块中定义）：</p>
<ul class="simple">
<li><p><a class="reference internal" href="stat.html#stat.UF_NODUMP" title="stat.UF_NODUMP"><code class="xref py py-data docutils literal notranslate"><span class="pre">stat.UF_NODUMP</span></code></a></p></li>
<li><p><a class="reference internal" href="stat.html#stat.UF_IMMUTABLE" title="stat.UF_IMMUTABLE"><code class="xref py py-data docutils literal notranslate"><span class="pre">stat.UF_IMMUTABLE</span></code></a></p></li>
<li><p><a class="reference internal" href="stat.html#stat.UF_APPEND" title="stat.UF_APPEND"><code class="xref py py-data docutils literal notranslate"><span class="pre">stat.UF_APPEND</span></code></a></p></li>
<li><p><a class="reference internal" href="stat.html#stat.UF_OPAQUE" title="stat.UF_OPAQUE"><code class="xref py py-data docutils literal notranslate"><span class="pre">stat.UF_OPAQUE</span></code></a></p></li>
<li><p><a class="reference internal" href="stat.html#stat.UF_NOUNLINK" title="stat.UF_NOUNLINK"><code class="xref py py-data docutils literal notranslate"><span class="pre">stat.UF_NOUNLINK</span></code></a></p></li>
<li><p><a class="reference internal" href="stat.html#stat.UF_COMPRESSED" title="stat.UF_COMPRESSED"><code class="xref py py-data docutils literal notranslate"><span class="pre">stat.UF_COMPRESSED</span></code></a></p></li>
<li><p><a class="reference internal" href="stat.html#stat.UF_HIDDEN" title="stat.UF_HIDDEN"><code class="xref py py-data docutils literal notranslate"><span class="pre">stat.UF_HIDDEN</span></code></a></p></li>
<li><p><a class="reference internal" href="stat.html#stat.SF_ARCHIVED" title="stat.SF_ARCHIVED"><code class="xref py py-data docutils literal notranslate"><span class="pre">stat.SF_ARCHIVED</span></code></a></p></li>
<li><p><a class="reference internal" href="stat.html#stat.SF_IMMUTABLE" title="stat.SF_IMMUTABLE"><code class="xref py py-data docutils literal notranslate"><span class="pre">stat.SF_IMMUTABLE</span></code></a></p></li>
<li><p><a class="reference internal" href="stat.html#stat.SF_APPEND" title="stat.SF_APPEND"><code class="xref py py-data docutils literal notranslate"><span class="pre">stat.SF_APPEND</span></code></a></p></li>
<li><p><a class="reference internal" href="stat.html#stat.SF_NOUNLINK" title="stat.SF_NOUNLINK"><code class="xref py py-data docutils literal notranslate"><span class="pre">stat.SF_NOUNLINK</span></code></a></p></li>
<li><p><a class="reference internal" href="stat.html#stat.SF_SNAPSHOT" title="stat.SF_SNAPSHOT"><code class="xref py py-data docutils literal notranslate"><span class="pre">stat.SF_SNAPSHOT</span></code></a></p></li>
</ul>
<p>本函数支持 <a class="reference internal" href="#follow-symlinks"><span class="std std-ref">不跟踪符号链接</span></a>。</p>
<p class="audit-hook">引发一个 <a class="reference internal" href="sys.html#auditing"><span class="std std-ref">审计事件</span></a> <code class="docutils literal notranslate"><span class="pre">os.chflags</span></code>，附带参数 <code class="docutils literal notranslate"><span class="pre">path</span></code>、<code class="docutils literal notranslate"><span class="pre">flags</span></code>。</p>
<p class="availability"><a class="reference internal" href="intro.html#availability"><span class="std std-ref">可用性</span></a>: Unix。</p>
<div class="versionadded">
<p><span class="versionmodified added">3.3 新版功能: </span><em>follow_symlinks</em> 参数。</p>
</div>
<div class="versionchanged">
<p><span class="versionmodified changed">在 3.6 版更改: </span>接受一个 <a class="reference internal" href="../glossary.html#term-path-like-object"><span class="xref std std-term">path-like object</span></a>。</p>
</div>
</dd></dl>

<dl class="py function">
<dt id="os.chmod">
<code class="sig-prename descclassname">os.</code><code class="sig-name descname">chmod</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">path</span></em>, <em class="sig-param"><span class="n">mode</span></em>, <em class="sig-param"><span class="o">*</span></em>, <em class="sig-param"><span class="n">dir_fd</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">follow_symlinks</span><span class="o">=</span><span class="default_value">True</span></em><span class="sig-paren">)</span><a class="headerlink" href="#os.chmod" title="永久链接至目标">¶</a></dt>
<dd><p>将 <em>path</em> 的 mode 更改为其他由数字表示的 <em>mode</em>。<em>mode</em> 可以用以下值之一，也可以将它们按位或组合起来（以下值在 <a class="reference internal" href="stat.html#module-stat" title="stat: Utilities for interpreting the results of os.stat(), os.lstat() and os.fstat()."><code class="xref py py-mod docutils literal notranslate"><span class="pre">stat</span></code></a> 模块中定义）：</p>
<ul class="simple">
<li><p><a class="reference internal" href="stat.html#stat.S_ISUID" title="stat.S_ISUID"><code class="xref py py-data docutils literal notranslate"><span class="pre">stat.S_ISUID</span></code></a></p></li>
<li><p><a class="reference internal" href="stat.html#stat.S_ISGID" title="stat.S_ISGID"><code class="xref py py-data docutils literal notranslate"><span class="pre">stat.S_ISGID</span></code></a></p></li>
<li><p><a class="reference internal" href="stat.html#stat.S_ENFMT" title="stat.S_ENFMT"><code class="xref py py-data docutils literal notranslate"><span class="pre">stat.S_ENFMT</span></code></a></p></li>
<li><p><a class="reference internal" href="stat.html#stat.S_ISVTX" title="stat.S_ISVTX"><code class="xref py py-data docutils literal notranslate"><span class="pre">stat.S_ISVTX</span></code></a></p></li>
<li><p><a class="reference internal" href="stat.html#stat.S_IREAD" title="stat.S_IREAD"><code class="xref py py-data docutils literal notranslate"><span class="pre">stat.S_IREAD</span></code></a></p></li>
<li><p><a class="reference internal" href="stat.html#stat.S_IWRITE" title="stat.S_IWRITE"><code class="xref py py-data docutils literal notranslate"><span class="pre">stat.S_IWRITE</span></code></a></p></li>
<li><p><a class="reference internal" href="stat.html#stat.S_IEXEC" title="stat.S_IEXEC"><code class="xref py py-data docutils literal notranslate"><span class="pre">stat.S_IEXEC</span></code></a></p></li>
<li><p><a class="reference internal" href="stat.html#stat.S_IRWXU" title="stat.S_IRWXU"><code class="xref py py-data docutils literal notranslate"><span class="pre">stat.S_IRWXU</span></code></a></p></li>
<li><p><a class="reference internal" href="stat.html#stat.S_IRUSR" title="stat.S_IRUSR"><code class="xref py py-data docutils literal notranslate"><span class="pre">stat.S_IRUSR</span></code></a></p></li>
<li><p><a class="reference internal" href="stat.html#stat.S_IWUSR" title="stat.S_IWUSR"><code class="xref py py-data docutils literal notranslate"><span class="pre">stat.S_IWUSR</span></code></a></p></li>
<li><p><a class="reference internal" href="stat.html#stat.S_IXUSR" title="stat.S_IXUSR"><code class="xref py py-data docutils literal notranslate"><span class="pre">stat.S_IXUSR</span></code></a></p></li>
<li><p><a class="reference internal" href="stat.html#stat.S_IRWXG" title="stat.S_IRWXG"><code class="xref py py-data docutils literal notranslate"><span class="pre">stat.S_IRWXG</span></code></a></p></li>
<li><p><a class="reference internal" href="stat.html#stat.S_IRGRP" title="stat.S_IRGRP"><code class="xref py py-data docutils literal notranslate"><span class="pre">stat.S_IRGRP</span></code></a></p></li>
<li><p><a class="reference internal" href="stat.html#stat.S_IWGRP" title="stat.S_IWGRP"><code class="xref py py-data docutils literal notranslate"><span class="pre">stat.S_IWGRP</span></code></a></p></li>
<li><p><a class="reference internal" href="stat.html#stat.S_IXGRP" title="stat.S_IXGRP"><code class="xref py py-data docutils literal notranslate"><span class="pre">stat.S_IXGRP</span></code></a></p></li>
<li><p><a class="reference internal" href="stat.html#stat.S_IRWXO" title="stat.S_IRWXO"><code class="xref py py-data docutils literal notranslate"><span class="pre">stat.S_IRWXO</span></code></a></p></li>
<li><p><a class="reference internal" href="stat.html#stat.S_IROTH" title="stat.S_IROTH"><code class="xref py py-data docutils literal notranslate"><span class="pre">stat.S_IROTH</span></code></a></p></li>
<li><p><a class="reference internal" href="stat.html#stat.S_IWOTH" title="stat.S_IWOTH"><code class="xref py py-data docutils literal notranslate"><span class="pre">stat.S_IWOTH</span></code></a></p></li>
<li><p><a class="reference internal" href="stat.html#stat.S_IXOTH" title="stat.S_IXOTH"><code class="xref py py-data docutils literal notranslate"><span class="pre">stat.S_IXOTH</span></code></a></p></li>
</ul>
<p>本函数支持 <a class="reference internal" href="#path-fd"><span class="std std-ref">指定文件描述符</span></a>、<a class="reference internal" href="#dir-fd"><span class="std std-ref">指定基于目录描述符的相对路径</span></a> 和 <a class="reference internal" href="#follow-symlinks"><span class="std std-ref">不跟踪符号链接</span></a>。</p>
<div class="admonition note">
<p class="admonition-title">注解</p>
<p>尽管 Windows 支持 <a class="reference internal" href="#os.chmod" title="os.chmod"><code class="xref py py-func docutils literal notranslate"><span class="pre">chmod()</span></code></a>，但只能用它设置文件的只读标志（<code class="docutils literal notranslate"><span class="pre">stat.S_IWRITE</span></code> 和 <code class="docutils literal notranslate"><span class="pre">stat.S_IREAD</span></code> 常量或对应的整数值）。所有其他标志位都会被忽略。</p>
</div>
<p class="audit-hook">引发一个 <a class="reference internal" href="sys.html#auditing"><span class="std std-ref">审计事件</span></a> <code class="docutils literal notranslate"><span class="pre">os.chmod</span></code>，附带参数 <code class="docutils literal notranslate"><span class="pre">path</span></code>、<code class="docutils literal notranslate"><span class="pre">mode</span></code>、<code class="docutils literal notranslate"><span class="pre">dir_fd</span></code>。</p>
<div class="versionadded">
<p><span class="versionmodified added">3.3 新版功能: </span>添加了指定 <em>path</em> 为文件描述符的支持，以及 <em>dir_fd</em> 和 <em>follow_symlinks</em> 参数。</p>
</div>
<div class="versionchanged">
<p><span class="versionmodified changed">在 3.6 版更改: </span>接受一个 <a class="reference internal" href="../glossary.html#term-path-like-object"><span class="xref std std-term">path-like object</span></a>。</p>
</div>
</dd></dl>

<dl class="py function">
<dt id="os.chown">
<code class="sig-prename descclassname">os.</code><code class="sig-name descname">chown</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">path</span></em>, <em class="sig-param"><span class="n">uid</span></em>, <em class="sig-param"><span class="n">gid</span></em>, <em class="sig-param"><span class="o">*</span></em>, <em class="sig-param"><span class="n">dir_fd</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">follow_symlinks</span><span class="o">=</span><span class="default_value">True</span></em><span class="sig-paren">)</span><a class="headerlink" href="#os.chown" title="永久链接至目标">¶</a></dt>
<dd><p>将 <em>path</em> 的用户和组 ID 分别修改为数字形式的 <em>uid</em> 和 <em>gid</em>。若要使其中某个 ID 保持不变，请将其置为 -1。</p>
<p>本函数支持 <a class="reference internal" href="#path-fd"><span class="std std-ref">指定文件描述符</span></a>、<a class="reference internal" href="#dir-fd"><span class="std std-ref">指定基于目录描述符的相对路径</span></a> 和 <a class="reference internal" href="#follow-symlinks"><span class="std std-ref">不跟踪符号链接</span></a>。</p>
<p>参见更高阶的函数 <a class="reference internal" href="shutil.html#shutil.chown" title="shutil.chown"><code class="xref py py-func docutils literal notranslate"><span class="pre">shutil.chown()</span></code></a>，除了数字 ID 之外，它也接受名称。</p>
<p class="audit-hook">引发一个 <a class="reference internal" href="sys.html#auditing"><span class="std std-ref">审计事件</span></a> <code class="docutils literal notranslate"><span class="pre">os.chown</span></code>，附带参数 <code class="docutils literal notranslate"><span class="pre">path</span></code>、<code class="docutils literal notranslate"><span class="pre">uid</span></code>、<code class="docutils literal notranslate"><span class="pre">gid</span></code>、<code class="docutils literal notranslate"><span class="pre">dir_fd</span></code>。</p>
<p class="availability"><a class="reference internal" href="intro.html#availability"><span class="std std-ref">可用性</span></a>: Unix。</p>
<div class="versionadded">
<p><span class="versionmodified added">3.3 新版功能: </span>添加了指定 <em>path</em> 为文件描述符的支持，以及 <em>dir_fd</em> 和 <em>follow_symlinks</em> 参数。</p>
</div>
<div class="versionchanged">
<p><span class="versionmodified changed">在 3.6 版更改: </span>支持 <a class="reference internal" href="../glossary.html#term-path-like-object"><span class="xref std std-term">类路径对象</span></a>。</p>
</div>
</dd></dl>

<dl class="py function">
<dt id="os.chroot">
<code class="sig-prename descclassname">os.</code><code class="sig-name descname">chroot</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">path</span></em><span class="sig-paren">)</span><a class="headerlink" href="#os.chroot" title="永久链接至目标">¶</a></dt>
<dd><p>将当前进程的根目录更改为 <em>path</em>。</p>
<p class="availability"><a class="reference internal" href="intro.html#availability"><span class="std std-ref">可用性</span></a>: Unix。</p>
<div class="versionchanged">
<p><span class="versionmodified changed">在 3.6 版更改: </span>接受一个 <a class="reference internal" href="../glossary.html#term-path-like-object"><span class="xref std std-term">path-like object</span></a>。</p>
</div>
</dd></dl>

<dl class="py function">
<dt id="os.fchdir">
<code class="sig-prename descclassname">os.</code><code class="sig-name descname">fchdir</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">fd</span></em><span class="sig-paren">)</span><a class="headerlink" href="#os.fchdir" title="永久链接至目标">¶</a></dt>
<dd><p>将当前工作目录更改为文件描述符 <em>fd</em> 指向的目录。fd 必须指向打开的目录而非文件。从 Python 3.3 开始，它等效于 <code class="docutils literal notranslate"><span class="pre">os.chdir(fd)</span></code>。</p>
<p class="audit-hook">引发一个 <a class="reference internal" href="sys.html#auditing"><span class="std std-ref">审计事件</span></a> <code class="docutils literal notranslate"><span class="pre">os.chdir</span></code>，附带参数 <code class="docutils literal notranslate"><span class="pre">path</span></code>。</p>
<p class="availability"><a class="reference internal" href="intro.html#availability"><span class="std std-ref">可用性</span></a>: Unix。</p>
</dd></dl>

<dl class="py function">
<dt id="os.getcwd">
<code class="sig-prename descclassname">os.</code><code class="sig-name descname">getcwd</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#os.getcwd" title="永久链接至目标">¶</a></dt>
<dd><p>返回表示当前工作目录的字符串。</p>
</dd></dl>

<dl class="py function">
<dt id="os.getcwdb">
<code class="sig-prename descclassname">os.</code><code class="sig-name descname">getcwdb</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#os.getcwdb" title="永久链接至目标">¶</a></dt>
<dd><p>返回表示当前工作目录的字节串 (bytestring)。</p>
<div class="versionchanged">
<p><span class="versionmodified changed">在 3.8 版更改: </span>在 Windows 上，本函数现在会使用 UTF-8 编码格式而不是 ANSI 代码页：请参看 <span class="target" id="index-90"></span><a class="pep reference external" href="https://www.python.org/dev/peps/pep-0529"><strong>PEP 529</strong></a> 了解具体原因。 该函数在 Windows 上不再被弃用。</p>
</div>
</dd></dl>

<dl class="py function">
<dt id="os.lchflags">
<code class="sig-prename descclassname">os.</code><code class="sig-name descname">lchflags</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">path</span></em>, <em class="sig-param"><span class="n">flags</span></em><span class="sig-paren">)</span><a class="headerlink" href="#os.lchflags" title="永久链接至目标">¶</a></dt>
<dd><p>将 <em>path</em> 的 flags 设置为其他由数字表示的 <em>flags</em>，与 <a class="reference internal" href="#os.chflags" title="os.chflags"><code class="xref py py-func docutils literal notranslate"><span class="pre">chflags()</span></code></a> 类似，但不跟踪符号链接。从 Python 3.3 开始，它等效于 <code class="docutils literal notranslate"><span class="pre">os.chflags(path,</span> <span class="pre">flags,</span> <span class="pre">follow_symlinks=False)</span></code>。</p>
<p class="audit-hook">引发一个 <a class="reference internal" href="sys.html#auditing"><span class="std std-ref">审计事件</span></a> <code class="docutils literal notranslate"><span class="pre">os.chflags</span></code>，附带参数 <code class="docutils literal notranslate"><span class="pre">path</span></code>、<code class="docutils literal notranslate"><span class="pre">flags</span></code>。</p>
<p class="availability"><a class="reference internal" href="intro.html#availability"><span class="std std-ref">可用性</span></a>: Unix。</p>
<div class="versionchanged">
<p><span class="versionmodified changed">在 3.6 版更改: </span>接受一个 <a class="reference internal" href="../glossary.html#term-path-like-object"><span class="xref std std-term">path-like object</span></a>。</p>
</div>
</dd></dl>

<dl class="py function">
<dt id="os.lchmod">
<code class="sig-prename descclassname">os.</code><code class="sig-name descname">lchmod</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">path</span></em>, <em class="sig-param"><span class="n">mode</span></em><span class="sig-paren">)</span><a class="headerlink" href="#os.lchmod" title="永久链接至目标">¶</a></dt>
<dd><p>将 <em>path</em> 的权限状态修改为 <em>mode</em>。如果 path 是符号链接，则影响符号链接本身而非链接目标。可以参考 <a class="reference internal" href="#os.chmod" title="os.chmod"><code class="xref py py-func docutils literal notranslate"><span class="pre">chmod()</span></code></a> 中列出 <em>mode</em> 的可用值。从 Python 3.3 开始，它等效于 <code class="docutils literal notranslate"><span class="pre">os.chmod(path,</span> <span class="pre">mode,</span> <span class="pre">follow_symlinks=False)</span></code>。</p>
<p class="audit-hook">引发一个 <a class="reference internal" href="sys.html#auditing"><span class="std std-ref">审计事件</span></a> <code class="docutils literal notranslate"><span class="pre">os.chmod</span></code>，附带参数 <code class="docutils literal notranslate"><span class="pre">path</span></code>、<code class="docutils literal notranslate"><span class="pre">mode</span></code>、<code class="docutils literal notranslate"><span class="pre">dir_fd</span></code>。</p>
<p class="availability"><a class="reference internal" href="intro.html#availability"><span class="std std-ref">可用性</span></a>: Unix。</p>
<div class="versionchanged">
<p><span class="versionmodified changed">在 3.6 版更改: </span>接受一个 <a class="reference internal" href="../glossary.html#term-path-like-object"><span class="xref std std-term">path-like object</span></a>。</p>
</div>
</dd></dl>

<dl class="py function">
<dt id="os.lchown">
<code class="sig-prename descclassname">os.</code><code class="sig-name descname">lchown</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">path</span></em>, <em class="sig-param"><span class="n">uid</span></em>, <em class="sig-param"><span class="n">gid</span></em><span class="sig-paren">)</span><a class="headerlink" href="#os.lchown" title="永久链接至目标">¶</a></dt>
<dd><p>将 <em>path</em> 的用户和组 ID 分别修改为数字形式的 <em>uid</em> 和 <em>gid</em>，本函数不跟踪符号链接。从 Python 3.3 开始，它等效于 <code class="docutils literal notranslate"><span class="pre">os.chown(path,</span> <span class="pre">uid,</span> <span class="pre">gid,</span> <span class="pre">follow_symlinks=False)</span></code>。</p>
<p class="audit-hook">引发一个 <a class="reference internal" href="sys.html#auditing"><span class="std std-ref">审计事件</span></a> <code class="docutils literal notranslate"><span class="pre">os.chown</span></code>，附带参数 <code class="docutils literal notranslate"><span class="pre">path</span></code>、<code class="docutils literal notranslate"><span class="pre">uid</span></code>、<code class="docutils literal notranslate"><span class="pre">gid</span></code>、<code class="docutils literal notranslate"><span class="pre">dir_fd</span></code>。</p>
<p class="availability"><a class="reference internal" href="intro.html#availability"><span class="std std-ref">可用性</span></a>: Unix。</p>
<div class="versionchanged">
<p><span class="versionmodified changed">在 3.6 版更改: </span>接受一个 <a class="reference internal" href="../glossary.html#term-path-like-object"><span class="xref std std-term">path-like object</span></a>。</p>
</div>
</dd></dl>

<dl class="py function">
<dt id="os.link">
<code class="sig-prename descclassname">os.</code><code class="sig-name descname">link</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">src</span></em>, <em class="sig-param"><span class="n">dst</span></em>, <em class="sig-param"><span class="o">*</span></em>, <em class="sig-param"><span class="n">src_dir_fd</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">dst_dir_fd</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">follow_symlinks</span><span class="o">=</span><span class="default_value">True</span></em><span class="sig-paren">)</span><a class="headerlink" href="#os.link" title="永久链接至目标">¶</a></dt>
<dd><p>创建一个指向 <em>src</em> 的硬链接，名为 <em>dst</em>。</p>
<p>本函数支持将 <em>src_dir_fd</em> 和 <em>dst_dir_fd</em> 中的一个或两个指定为 <a class="reference internal" href="#dir-fd"><span class="std std-ref">基于目录描述符的相对路径</span></a>，支持 <a class="reference internal" href="#follow-symlinks"><span class="std std-ref">不跟踪符号链接</span></a>。</p>
<p class="audit-hook">引发一个 <a class="reference internal" href="sys.html#auditing"><span class="std std-ref">审计事件</span></a> <code class="docutils literal notranslate"><span class="pre">os.link</span></code> 附带参数 <code class="docutils literal notranslate"><span class="pre">src</span></code>、<code class="docutils literal notranslate"><span class="pre">dst</span></code>、<code class="docutils literal notranslate"><span class="pre">src_dir_fd</span></code>、<code class="docutils literal notranslate"><span class="pre">dst_dir_fd</span></code>。</p>
<p class="availability"><a class="reference internal" href="intro.html#availability"><span class="std std-ref">可用性</span></a>: Unix, Windows。</p>
<div class="versionchanged">
<p><span class="versionmodified changed">在 3.2 版更改: </span>添加了对 Windows 的支持。</p>
</div>
<div class="versionadded">
<p><span class="versionmodified added">3.3 新版功能: </span>添加 <em>src_dir_fd</em>、<em>dst_dir_fd</em> 和 <em>follow_symlinks</em> 参数。</p>
</div>
<div class="versionchanged">
<p><span class="versionmodified changed">在 3.6 版更改: </span>接受一个 <a class="reference internal" href="../glossary.html#term-path-like-object"><span class="xref std std-term">类路径对象</span></a> 作为 <em>src</em> 和 <em>dst</em>。</p>
</div>
</dd></dl>

<dl class="py function">
<dt id="os.listdir">
<code class="sig-prename descclassname">os.</code><code class="sig-name descname">listdir</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">path</span><span class="o">=</span><span class="default_value">'.'</span></em><span class="sig-paren">)</span><a class="headerlink" href="#os.listdir" title="永久链接至目标">¶</a></dt>
<dd><p>返回一个包含由 <em>path</em> 指定目录中条目名称组成的列表。 该列表按任意顺序排列，并且不包括特殊条目 <code class="docutils literal notranslate"><span class="pre">'.'</span></code> 和 <code class="docutils literal notranslate"><span class="pre">'..'</span></code>，即使它们存在于目录中。 如果有文件在调用此函数期间在被移除或添加到目录中，是否要包括该文件的名称并没有规定。</p>
<p><em>path</em> 可以是 <a class="reference internal" href="../glossary.html#term-path-like-object"><span class="xref std std-term">类路径对象</span></a>。如果 <em>path</em> 是（直接传入或通过 <a class="reference internal" href="#os.PathLike" title="os.PathLike"><code class="xref py py-class docutils literal notranslate"><span class="pre">PathLike</span></code></a> 接口间接传入） <code class="docutils literal notranslate"><span class="pre">bytes</span></code> 类型，则返回的文件名也将是 <code class="docutils literal notranslate"><span class="pre">bytes</span></code> 类型，其他情况下是 <code class="docutils literal notranslate"><span class="pre">str</span></code> 类型。</p>
<p>本函数也支持 <a class="reference internal" href="#path-fd"><span class="std std-ref">指定文件描述符为参数</span></a>，其中描述符必须指向目录。</p>
<p class="audit-hook">引发一个 <a class="reference internal" href="sys.html#auditing"><span class="std std-ref">审计事件</span></a> <code class="docutils literal notranslate"><span class="pre">os.listdir</span></code>，附带参数 <code class="docutils literal notranslate"><span class="pre">path</span></code>。</p>
<div class="admonition note">
<p class="admonition-title">注解</p>
<p>要将 <code class="docutils literal notranslate"><span class="pre">str</span></code> 类型的文件名编码为 <code class="docutils literal notranslate"><span class="pre">bytes</span></code>，请使用 <a class="reference internal" href="#os.fsencode" title="os.fsencode"><code class="xref py py-func docutils literal notranslate"><span class="pre">fsencode()</span></code></a>。</p>
</div>
<div class="admonition seealso">
<p class="admonition-title">参见</p>
<p><a class="reference internal" href="#os.scandir" title="os.scandir"><code class="xref py py-func docutils literal notranslate"><span class="pre">scandir()</span></code></a> 函数返回目录内文件名的同时，也返回文件属性信息，它在某些具体情况下能提供更好的性能。</p>
</div>
<div class="versionchanged">
<p><span class="versionmodified changed">在 3.2 版更改: </span><em>path</em> 变为可选参数。</p>
</div>
<div class="versionadded">
<p><span class="versionmodified added">3.3 新版功能: </span>新增支持将 <em>path</em> 参数指定为打开的文件描述符。</p>
</div>
<div class="versionchanged">
<p><span class="versionmodified changed">在 3.6 版更改: </span>接受一个 <a class="reference internal" href="../glossary.html#term-path-like-object"><span class="xref std std-term">path-like object</span></a>。</p>
</div>
</dd></dl>

<dl class="py function">
<dt id="os.lstat">
<code class="sig-prename descclassname">os.</code><code class="sig-name descname">lstat</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">path</span></em>, <em class="sig-param"><span class="o">*</span></em>, <em class="sig-param"><span class="n">dir_fd</span><span class="o">=</span><span class="default_value">None</span></em><span class="sig-paren">)</span><a class="headerlink" href="#os.lstat" title="永久链接至目标">¶</a></dt>
<dd><p>在给定路径上执行本函数，其操作相当于 <code class="xref c c-func docutils literal notranslate"><span class="pre">lstat()</span></code> 系统调用，类似于 <a class="reference internal" href="#os.stat" title="os.stat"><code class="xref py py-func docutils literal notranslate"><span class="pre">stat()</span></code></a> 但不跟踪符号链接。返回值是 <a class="reference internal" href="#os.stat_result" title="os.stat_result"><code class="xref py py-class docutils literal notranslate"><span class="pre">stat_result</span></code></a> 对象。</p>
<p>在不支持符号链接的平台上，本函数是 <a class="reference internal" href="#os.stat" title="os.stat"><code class="xref py py-func docutils literal notranslate"><span class="pre">stat()</span></code></a> 的别名。</p>
<p>从 Python 3.3 起，此功能等价于 <code class="docutils literal notranslate"><span class="pre">os.stat(path,</span> <span class="pre">dir_fd=dir_fd,</span> <span class="pre">follow_symlinks=False)</span></code>。</p>
<p>本函数支持 <a class="reference internal" href="#dir-fd"><span class="std std-ref">基于目录描述符的相对路径</span></a>。</p>
<div class="admonition seealso">
<p class="admonition-title">参见</p>
<p><a class="reference internal" href="#os.stat" title="os.stat"><code class="xref py py-func docutils literal notranslate"><span class="pre">stat()</span></code></a> 函数。</p>
</div>
<div class="versionchanged">
<p><span class="versionmodified changed">在 3.2 版更改: </span>添加对 Windows 6.0 (Vista) 符号链接的支持。</p>
</div>
<div class="versionchanged">
<p><span class="versionmodified changed">在 3.3 版更改: </span>添加了 <em>dir_fd</em> 参数。</p>
</div>
<div class="versionchanged">
<p><span class="versionmodified changed">在 3.6 版更改: </span>接受一个 <a class="reference internal" href="../glossary.html#term-path-like-object"><span class="xref std std-term">path-like object</span></a>。</p>
</div>
<div class="versionchanged">
<p><span class="versionmodified changed">在 3.8 版更改: </span>目前在 Windows 上，遇到表示另一个路径的重解析点（即名称代理，包括符号链接和目录结点），本函数将打开它。其他种类的重解析点由 <a class="reference internal" href="#os.stat" title="os.stat"><code class="xref py py-func docutils literal notranslate"><span class="pre">stat()</span></code></a> 交由操作系统解析。</p>
</div>
</dd></dl>

<dl class="py function">
<dt id="os.mkdir">
<code class="sig-prename descclassname">os.</code><code class="sig-name descname">mkdir</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">path</span></em>, <em class="sig-param"><span class="n">mode</span><span class="o">=</span><span class="default_value">0o777</span></em>, <em class="sig-param"><span class="o">*</span></em>, <em class="sig-param"><span class="n">dir_fd</span><span class="o">=</span><span class="default_value">None</span></em><span class="sig-paren">)</span><a class="headerlink" href="#os.mkdir" title="永久链接至目标">¶</a></dt>
<dd><p>创建一个名为 <em>path</em> 的目录，应用以数字表示的权限模式 <em>mode</em>。</p>
<p>如果目录已经存在， <a class="reference internal" href="exceptions.html#FileExistsError" title="FileExistsError"><code class="xref py py-exc docutils literal notranslate"><span class="pre">FileExistsError</span></code></a> 会被提出。如果路径中的父目录不存在，则会引发 <a class="reference internal" href="exceptions.html#FileNotFoundError" title="FileNotFoundError"><code class="xref py py-exc docutils literal notranslate"><span class="pre">FileNotFoundError</span></code></a> 。</p>
<p id="mkdir-modebits">某些系统会忽略 <em>mode</em>。如果没有忽略它，那么将首先从它中减去当前的 umask 值。如果除最后 9 位（即 <em>mode</em> 八进制的最后 3 位）之外，还设置了其他位，则其他位的含义取决于各个平台。在某些平台上，它们会被忽略，应显式调用 <a class="reference internal" href="#os.chmod" title="os.chmod"><code class="xref py py-func docutils literal notranslate"><span class="pre">chmod()</span></code></a> 进行设置。</p>
<p>本函数支持 <a class="reference internal" href="#dir-fd"><span class="std std-ref">基于目录描述符的相对路径</span></a>。</p>
<p>如果需要创建临时目录，请参阅 <a class="reference internal" href="tempfile.html#module-tempfile" title="tempfile: Generate temporary files and directories."><code class="xref py py-mod docutils literal notranslate"><span class="pre">tempfile</span></code></a> 模块中的 <a class="reference internal" href="tempfile.html#tempfile.mkdtemp" title="tempfile.mkdtemp"><code class="xref py py-func docutils literal notranslate"><span class="pre">tempfile.mkdtemp()</span></code></a> 函数。</p>
<p class="audit-hook">引发一个 <a class="reference internal" href="sys.html#auditing"><span class="std std-ref">审计事件</span></a> <code class="docutils literal notranslate"><span class="pre">os.mkdir</span></code>，附带参数 <code class="docutils literal notranslate"><span class="pre">path</span></code>、<code class="docutils literal notranslate"><span class="pre">mode</span></code>、<code class="docutils literal notranslate"><span class="pre">dir_fd</span></code>。</p>
<div class="versionadded">
<p><span class="versionmodified added">3.3 新版功能: </span><em>dir_fd</em> 参数。</p>
</div>
<div class="versionchanged">
<p><span class="versionmodified changed">在 3.6 版更改: </span>接受一个 <a class="reference internal" href="../glossary.html#term-path-like-object"><span class="xref std std-term">path-like object</span></a>。</p>
</div>
</dd></dl>

<dl class="py function">
<dt id="os.makedirs">
<code class="sig-prename descclassname">os.</code><code class="sig-name descname">makedirs</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">name</span></em>, <em class="sig-param"><span class="n">mode</span><span class="o">=</span><span class="default_value">0o777</span></em>, <em class="sig-param"><span class="n">exist_ok</span><span class="o">=</span><span class="default_value">False</span></em><span class="sig-paren">)</span><a class="headerlink" href="#os.makedirs" title="永久链接至目标">¶</a></dt>
<dd><p id="index-27">递归目录创建函数。与 <a class="reference internal" href="#os.mkdir" title="os.mkdir"><code class="xref py py-func docutils literal notranslate"><span class="pre">mkdir()</span></code></a> 类似，但会自动创建到达最后一级目录所需要的中间目录。</p>
<p>The <em>mode</em> parameter is passed to <a class="reference internal" href="#os.mkdir" title="os.mkdir"><code class="xref py py-func docutils literal notranslate"><span class="pre">mkdir()</span></code></a> for creating the leaf
directory; see <a class="reference internal" href="#mkdir-modebits"><span class="std std-ref">the mkdir() description</span></a> for how it
is interpreted.  To set the file permission bits of any newly created parent
directories you can set the umask before invoking <a class="reference internal" href="#os.makedirs" title="os.makedirs"><code class="xref py py-func docutils literal notranslate"><span class="pre">makedirs()</span></code></a>.  The
file permission bits of existing parent directories are not changed.</p>
<p>如果 <em>exist_ok</em> 为 <code class="docutils literal notranslate"><span class="pre">False</span></code> (默认值)，则如果目标目录已存在将引发 <a class="reference internal" href="exceptions.html#FileExistsError" title="FileExistsError"><code class="xref py py-exc docutils literal notranslate"><span class="pre">FileExistsError</span></code></a>。</p>
<div class="admonition note">
<p class="admonition-title">注解</p>
<p>如果要创建的路径元素包含 <a class="reference internal" href="#os.pardir" title="os.pardir"><code class="xref py py-data docutils literal notranslate"><span class="pre">pardir</span></code></a> (如 UNIX 系统中的 &quot;..&quot;) <a class="reference internal" href="#os.makedirs" title="os.makedirs"><code class="xref py py-func docutils literal notranslate"><span class="pre">makedirs()</span></code></a> 将无法明确目标。</p>
</div>
<p>本函数能正确处理 UNC 路径。</p>
<p class="audit-hook">引发一个 <a class="reference internal" href="sys.html#auditing"><span class="std std-ref">审计事件</span></a> <code class="docutils literal notranslate"><span class="pre">os.mkdir</span></code>，附带参数 <code class="docutils literal notranslate"><span class="pre">path</span></code>、<code class="docutils literal notranslate"><span class="pre">mode</span></code>、<code class="docutils literal notranslate"><span class="pre">dir_fd</span></code>。</p>
<div class="versionadded">
<p><span class="versionmodified added">3.2 新版功能: </span><em>exist_ok</em> 参数。</p>
</div>
<div class="versionchanged">
<p><span class="versionmodified changed">在 3.4.1 版更改: </span>在 Python 3.4.1 以前，如果 <em>exist_ok</em> 为 <code class="docutils literal notranslate"><span class="pre">True</span></code>，且目录已存在，且 <em>mode</em> 与现有目录的权限不匹配，<a class="reference internal" href="#os.makedirs" title="os.makedirs"><code class="xref py py-func docutils literal notranslate"><span class="pre">makedirs()</span></code></a> 仍会抛出错误。由于无法安全地实现此行为，因此在 Python 3.4.1 中将该行为删除。请参阅 <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=21082">bpo-21082</a>。</p>
</div>
<div class="versionchanged">
<p><span class="versionmodified changed">在 3.6 版更改: </span>接受一个 <a class="reference internal" href="../glossary.html#term-path-like-object"><span class="xref std std-term">path-like object</span></a>。</p>
</div>
<div class="versionchanged">
<p><span class="versionmodified changed">在 3.7 版更改: </span>The <em>mode</em> argument no longer affects the file permission bits of
newly created intermediate-level directories.</p>
</div>
</dd></dl>

<dl class="py function">
<dt id="os.mkfifo">
<code class="sig-prename descclassname">os.</code><code class="sig-name descname">mkfifo</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">path</span></em>, <em class="sig-param"><span class="n">mode</span><span class="o">=</span><span class="default_value">0o666</span></em>, <em class="sig-param"><span class="o">*</span></em>, <em class="sig-param"><span class="n">dir_fd</span><span class="o">=</span><span class="default_value">None</span></em><span class="sig-paren">)</span><a class="headerlink" href="#os.mkfifo" title="永久链接至目标">¶</a></dt>
<dd><p>创建一个名为 <em>path</em> 的 FIFO（命名管道，一种先进先出队列），具有以数字表示的权限状态 <em>mode</em>。将从 mode 中首先减去当前的 umask 值。</p>
<p>本函数支持 <a class="reference internal" href="#dir-fd"><span class="std std-ref">基于目录描述符的相对路径</span></a>。</p>
<p>FIFO 是可以像常规文件一样访问的管道。FIFO 如果没有被删除（如使用 <a class="reference internal" href="#os.unlink" title="os.unlink"><code class="xref py py-func docutils literal notranslate"><span class="pre">os.unlink()</span></code></a>），会一直存在。通常，FIFO 用作“客户端”和“服务器”进程之间的汇合点：服务器打开 FIFO 进行读取，而客户端打开 FIFO 进行写入。请注意，<a class="reference internal" href="#os.mkfifo" title="os.mkfifo"><code class="xref py py-func docutils literal notranslate"><span class="pre">mkfifo()</span></code></a> 不会打开 FIFO --- 它只是创建汇合点。</p>
<p class="availability"><a class="reference internal" href="intro.html#availability"><span class="std std-ref">可用性</span></a>: Unix。</p>
<div class="versionadded">
<p><span class="versionmodified added">3.3 新版功能: </span><em>dir_fd</em> 参数。</p>
</div>
<div class="versionchanged">
<p><span class="versionmodified changed">在 3.6 版更改: </span>接受一个 <a class="reference internal" href="../glossary.html#term-path-like-object"><span class="xref std std-term">path-like object</span></a>。</p>
</div>
</dd></dl>

<dl class="py function">
<dt id="os.mknod">
<code class="sig-prename descclassname">os.</code><code class="sig-name descname">mknod</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">path</span></em>, <em class="sig-param"><span class="n">mode</span><span class="o">=</span><span class="default_value">0o600</span></em>, <em class="sig-param"><span class="n">device</span><span class="o">=</span><span class="default_value">0</span></em>, <em class="sig-param"><span class="o">*</span></em>, <em class="sig-param"><span class="n">dir_fd</span><span class="o">=</span><span class="default_value">None</span></em><span class="sig-paren">)</span><a class="headerlink" href="#os.mknod" title="永久链接至目标">¶</a></dt>
<dd><p>创建一个名为 <em>path</em> 的文件系统节点（文件，设备专用文件或命名管道）。<em>mode</em> 指定权限和节点类型，方法是将权限与下列节点类型 <code class="docutils literal notranslate"><span class="pre">stat.S_IFREG</span></code>、<code class="docutils literal notranslate"><span class="pre">stat.S_IFCHR</span></code>、<code class="docutils literal notranslate"><span class="pre">stat.S_IFBLK</span></code> 和 <code class="docutils literal notranslate"><span class="pre">stat.S_IFIFO</span></code> 之一（按位或）组合（这些常量可以在 <a class="reference internal" href="stat.html#module-stat" title="stat: Utilities for interpreting the results of os.stat(), os.lstat() and os.fstat()."><code class="xref py py-mod docutils literal notranslate"><span class="pre">stat</span></code></a> 模块中找到）。对于 <code class="docutils literal notranslate"><span class="pre">stat.S_IFCHR</span></code> 和 <code class="docutils literal notranslate"><span class="pre">stat.S_IFBLK</span></code>，<em>device</em> 参数指定了新创建的设备专用文件（可能会用到 <a class="reference internal" href="#os.makedev" title="os.makedev"><code class="xref py py-func docutils literal notranslate"><span class="pre">os.makedev()</span></code></a>），否则该参数将被忽略。</p>
<p>本函数支持 <a class="reference internal" href="#dir-fd"><span class="std std-ref">基于目录描述符的相对路径</span></a>。</p>
<p class="availability"><a class="reference internal" href="intro.html#availability"><span class="std std-ref">可用性</span></a>: Unix。</p>
<div class="versionadded">
<p><span class="versionmodified added">3.3 新版功能: </span><em>dir_fd</em> 参数。</p>
</div>
<div class="versionchanged">
<p><span class="versionmodified changed">在 3.6 版更改: </span>接受一个 <a class="reference internal" href="../glossary.html#term-path-like-object"><span class="xref std std-term">path-like object</span></a>。</p>
</div>
</dd></dl>

<dl class="py function">
<dt id="os.major">
<code class="sig-prename descclassname">os.</code><code class="sig-name descname">major</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">device</span></em><span class="sig-paren">)</span><a class="headerlink" href="#os.major" title="永久链接至目标">¶</a></dt>
<dd><p>提取主设备号，提取自原始设备号（通常是 <code class="xref c c-type docutils literal notranslate"><span class="pre">stat</span></code> 中的 <code class="xref py py-attr docutils literal notranslate"><span class="pre">st_dev</span></code> 或 <code class="xref py py-attr docutils literal notranslate"><span class="pre">st_rdev</span></code> 字段）。</p>
</dd></dl>

<dl class="py function">
<dt id="os.minor">
<code class="sig-prename descclassname">os.</code><code class="sig-name descname">minor</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">device</span></em><span class="sig-paren">)</span><a class="headerlink" href="#os.minor" title="永久链接至目标">¶</a></dt>
<dd><p>提取次设备号，提取自原始设备号（通常是 <code class="xref c c-type docutils literal notranslate"><span class="pre">stat</span></code> 中的 <code class="xref py py-attr docutils literal notranslate"><span class="pre">st_dev</span></code> 或 <code class="xref py py-attr docutils literal notranslate"><span class="pre">st_rdev</span></code> 字段）。</p>
</dd></dl>

<dl class="py function">
<dt id="os.makedev">
<code class="sig-prename descclassname">os.</code><code class="sig-name descname">makedev</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">major</span></em>, <em class="sig-param"><span class="n">minor</span></em><span class="sig-paren">)</span><a class="headerlink" href="#os.makedev" title="永久链接至目标">¶</a></dt>
<dd><p>将主设备号和次设备号组合成原始设备号。</p>
</dd></dl>

<dl class="py function">
<dt id="os.pathconf">
<code class="sig-prename descclassname">os.</code><code class="sig-name descname">pathconf</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">path</span></em>, <em class="sig-param"><span class="n">name</span></em><span class="sig-paren">)</span><a class="headerlink" href="#os.pathconf" title="永久链接至目标">¶</a></dt>
<dd><p>返回所给名称的文件有关的系统配置信息。<em>name</em> 指定要查找的配置名称，它可以是字符串，是一个系统已定义的名称，这些名称定义在不同标准（POSIX.1，Unix 95，Unix 98 等）中。一些平台还定义了额外的其他名称。当前操作系统已定义的名称在 <code class="docutils literal notranslate"><span class="pre">pathconf_names</span></code> 字典中给出。对于未包含在该映射中的配置名称，也可以传递一个整数作为 <em>name</em>。</p>
<p>如果 <em>name</em> 是一个字符串且不是已定义的名称，将抛出 <a class="reference internal" href="exceptions.html#ValueError" title="ValueError"><code class="xref py py-exc docutils literal notranslate"><span class="pre">ValueError</span></code></a> 异常。如果当前系统不支持 <em>name</em> 指定的配置名称，即使该名称存在于 <code class="docutils literal notranslate"><span class="pre">pathconf_names</span></code>，也会抛出 <a class="reference internal" href="exceptions.html#OSError" title="OSError"><code class="xref py py-exc docutils literal notranslate"><span class="pre">OSError</span></code></a> 异常，错误码为 <a class="reference internal" href="errno.html#errno.EINVAL" title="errno.EINVAL"><code class="xref py py-const docutils literal notranslate"><span class="pre">errno.EINVAL</span></code></a>。</p>
<p>本函数支持 <a class="reference internal" href="#path-fd"><span class="std std-ref">指定文件描述符为参数</span></a>。</p>
<p class="availability"><a class="reference internal" href="intro.html#availability"><span class="std std-ref">可用性</span></a>: Unix。</p>
<div class="versionchanged">
<p><span class="versionmodified changed">在 3.6 版更改: </span>接受一个 <a class="reference internal" href="../glossary.html#term-path-like-object"><span class="xref std std-term">path-like object</span></a>。</p>
</div>
</dd></dl>

<dl class="py data">
<dt id="os.pathconf_names">
<code class="sig-prename descclassname">os.</code><code class="sig-name descname">pathconf_names</code><a class="headerlink" href="#os.pathconf_names" title="永久链接至目标">¶</a></dt>
<dd><p>字典，表示映射关系，为 <a class="reference internal" href="#os.pathconf" title="os.pathconf"><code class="xref py py-func docutils literal notranslate"><span class="pre">pathconf()</span></code></a> 和 <a class="reference internal" href="#os.fpathconf" title="os.fpathconf"><code class="xref py py-func docutils literal notranslate"><span class="pre">fpathconf()</span></code></a> 可接受名称与操作系统为这些名称定义的整数值之间的映射。这可用于判断系统已定义了哪些名称。</p>
<p class="availability"><a class="reference internal" href="intro.html#availability"><span class="std std-ref">可用性</span></a>: Unix。</p>
</dd></dl>

<dl class="py function">
<dt id="os.readlink">
<code class="sig-prename descclassname">os.</code><code class="sig-name descname">readlink</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">path</span></em>, <em class="sig-param"><span class="o">*</span></em>, <em class="sig-param"><span class="n">dir_fd</span><span class="o">=</span><span class="default_value">None</span></em><span class="sig-paren">)</span><a class="headerlink" href="#os.readlink" title="永久链接至目标">¶</a></dt>
<dd><p>返回一个字符串，为符号链接指向的实际路径。其结果可以是绝对或相对路径。如果是相对路径，则可用 <code class="docutils literal notranslate"><span class="pre">os.path.join(os.path.dirname(path),</span> <span class="pre">result)</span></code> 转换为绝对路径。</p>
<p>如果 <em>path</em> 是字符串对象（直接传入或通过 <a class="reference internal" href="#os.PathLike" title="os.PathLike"><code class="xref py py-class docutils literal notranslate"><span class="pre">PathLike</span></code></a> 接口间接传入），则结果也将是字符串对象，且此类调用可能会引发 UnicodeDecodeError。如果 <em>path</em> 是字节对象（直接传入或间接传入），则结果将会是字节对象。</p>
<p>本函数支持 <a class="reference internal" href="#dir-fd"><span class="std std-ref">基于目录描述符的相对路径</span></a>。</p>
<p>当尝试解析的路径可能含有链接时，请改用 <a class="reference internal" href="os.path.html#os.path.realpath" title="os.path.realpath"><code class="xref py py-func docutils literal notranslate"><span class="pre">realpath()</span></code></a> 以正确处理递归和平台差异。</p>
<p class="availability"><a class="reference internal" href="intro.html#availability"><span class="std std-ref">可用性</span></a>: Unix, Windows。</p>
<div class="versionchanged">
<p><span class="versionmodified changed">在 3.2 版更改: </span>添加对 Windows 6.0 (Vista) 符号链接的支持。</p>
</div>
<div class="versionadded">
<p><span class="versionmodified added">3.3 新版功能: </span><em>dir_fd</em> 参数。</p>
</div>
<div class="versionchanged">
<p><span class="versionmodified changed">在 3.6 版更改: </span>在 Unix 上可以接受一个 <a class="reference internal" href="../glossary.html#term-path-like-object"><span class="xref std std-term">类路径对象</span></a>。</p>
</div>
<div class="versionchanged">
<p><span class="versionmodified changed">在 3.8 版更改: </span>在 Windows 上接受 <a class="reference internal" href="../glossary.html#term-path-like-object"><span class="xref std std-term">类路径对象</span></a> 和字节对象。</p>
</div>
<div class="versionchanged">
<p><span class="versionmodified changed">在 3.8 版更改: </span>增加了对目录链接的支持，且返回值改为了“替换路径”的形式（通常带有 <code class="docutils literal notranslate"><span class="pre">\\?\</span></code> 前缀），而不是先前那样返回可选的 &quot;print name&quot; 字段。</p>
</div>
</dd></dl>

<dl class="py function">
<dt id="os.remove">
<code class="sig-prename descclassname">os.</code><code class="sig-name descname">remove</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">path</span></em>, <em class="sig-param"><span class="o">*</span></em>, <em class="sig-param"><span class="n">dir_fd</span><span class="o">=</span><span class="default_value">None</span></em><span class="sig-paren">)</span><a class="headerlink" href="#os.remove" title="永久链接至目标">¶</a></dt>
<dd><p>移除（删除）文件 <em>path</em>。 如果 <em>path</em> 是目录，则会引发 <a class="reference internal" href="exceptions.html#IsADirectoryError" title="IsADirectoryError"><code class="xref py py-exc docutils literal notranslate"><span class="pre">IsADirectoryError</span></code></a>。 请使用 <a class="reference internal" href="#os.rmdir" title="os.rmdir"><code class="xref py py-func docutils literal notranslate"><span class="pre">rmdir()</span></code></a> 来删除目录。 如果文件不存在，则会引发 <a class="reference internal" href="exceptions.html#FileNotFoundError" title="FileNotFoundError"><code class="xref py py-exc docutils literal notranslate"><span class="pre">FileNotFoundError</span></code></a>。</p>
<p>本函数支持 <a class="reference internal" href="#dir-fd"><span class="std std-ref">基于目录描述符的相对路径</span></a>。</p>
<p>在 Windows 上，尝试删除正在使用的文件会抛出异常。而在 Unix 上，虽然该文件的条目会被删除，但分配给文件的存储空间仍然不可用，直到原始文件不再使用为止。</p>
<p>本函数在语义上与 <a class="reference internal" href="#os.unlink" title="os.unlink"><code class="xref py py-func docutils literal notranslate"><span class="pre">unlink()</span></code></a> 相同。</p>
<p class="audit-hook">引发一个 <a class="reference internal" href="sys.html#auditing"><span class="std std-ref">审计事件</span></a> <code class="docutils literal notranslate"><span class="pre">os.remove</span></code>，附带参数 <code class="docutils literal notranslate"><span class="pre">path</span></code>、<code class="docutils literal notranslate"><span class="pre">dir_fd</span></code>。</p>
<div class="versionadded">
<p><span class="versionmodified added">3.3 新版功能: </span><em>dir_fd</em> 参数。</p>
</div>
<div class="versionchanged">
<p><span class="versionmodified changed">在 3.6 版更改: </span>接受一个 <a class="reference internal" href="../glossary.html#term-path-like-object"><span class="xref std std-term">path-like object</span></a>。</p>
</div>
</dd></dl>

<dl class="py function">
<dt id="os.removedirs">
<code class="sig-prename descclassname">os.</code><code class="sig-name descname">removedirs</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">name</span></em><span class="sig-paren">)</span><a class="headerlink" href="#os.removedirs" title="永久链接至目标">¶</a></dt>
<dd><p id="index-28">递归删除目录。工作方式类似于 <a class="reference internal" href="#os.rmdir" title="os.rmdir"><code class="xref py py-func docutils literal notranslate"><span class="pre">rmdir()</span></code></a>，不同之处在于，如果成功删除了末尾一级目录，<a class="reference internal" href="#os.removedirs" title="os.removedirs"><code class="xref py py-func docutils literal notranslate"><span class="pre">removedirs()</span></code></a> 会尝试依次删除 <em>path</em> 中提到的每个父目录，直到抛出错误为止（但该错误会被忽略，因为这通常表示父目录不是空目录）。例如，<code class="docutils literal notranslate"><span class="pre">os.removedirs('foo/bar/baz')</span></code> 将首先删除目录 <code class="docutils literal notranslate"><span class="pre">'foo/bar/baz'</span></code>，然后如果 <code class="docutils literal notranslate"><span class="pre">'foo/bar'</span></code> 和 <code class="docutils literal notranslate"><span class="pre">'foo'</span></code> 为空，则继续删除它们。如果无法成功删除末尾一级目录，则抛出 <a class="reference internal" href="exceptions.html#OSError" title="OSError"><code class="xref py py-exc docutils literal notranslate"><span class="pre">OSError</span></code></a> 异常。</p>
<p class="audit-hook">引发一个 <a class="reference internal" href="sys.html#auditing"><span class="std std-ref">审计事件</span></a> <code class="docutils literal notranslate"><span class="pre">os.remove</span></code>，附带参数 <code class="docutils literal notranslate"><span class="pre">path</span></code>、<code class="docutils literal notranslate"><span class="pre">dir_fd</span></code>。</p>
<div class="versionchanged">
<p><span class="versionmodified changed">在 3.6 版更改: </span>接受一个 <a class="reference internal" href="../glossary.html#term-path-like-object"><span class="xref std std-term">path-like object</span></a>。</p>
</div>
</dd></dl>

<dl class="py function">
<dt id="os.rename">
<code class="sig-prename descclassname">os.</code><code class="sig-name descname">rename</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">src</span></em>, <em class="sig-param"><span class="n">dst</span></em>, <em class="sig-param"><span class="o">*</span></em>, <em class="sig-param"><span class="n">src_dir_fd</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">dst_dir_fd</span><span class="o">=</span><span class="default_value">None</span></em><span class="sig-paren">)</span><a class="headerlink" href="#os.rename" title="永久链接至目标">¶</a></dt>
<dd><p>将文件或目录 <em>src</em> 重命名为 <em>dst</em>。如果 <em>dst</em> 已存在，则下列情况下将会操作失败，并抛出 <a class="reference internal" href="exceptions.html#OSError" title="OSError"><code class="xref py py-exc docutils literal notranslate"><span class="pre">OSError</span></code></a> 的子类：</p>
<p>在 Windows 上，如果 <em>dst</em> 已存在，则抛出 <a class="reference internal" href="exceptions.html#FileExistsError" title="FileExistsError"><code class="xref py py-exc docutils literal notranslate"><span class="pre">FileExistsError</span></code></a> 异常。</p>
<p>在 Unix 上，如果 <em>src</em> 是文件而 <em>dst</em> 是目录，将抛出 <a class="reference internal" href="exceptions.html#IsADirectoryError" title="IsADirectoryError"><code class="xref py py-exc docutils literal notranslate"><span class="pre">IsADirectoryError</span></code></a> 异常，反之则抛出 <a class="reference internal" href="exceptions.html#NotADirectoryError" title="NotADirectoryError"><code class="xref py py-exc docutils literal notranslate"><span class="pre">NotADirectoryError</span></code></a> 异常。如果两者都是目录且 <em>dst</em> 为空，则 <em>dst</em> 将被静默替换。如果 <em>dst</em> 是非空目录，则抛出 <a class="reference internal" href="exceptions.html#OSError" title="OSError"><code class="xref py py-exc docutils literal notranslate"><span class="pre">OSError</span></code></a> 异常。如果两者都是文件，则在用户具有权限的情况下，将对 <em>dst</em> 进行静默替换。如果 <em>src</em> 和 <em>dst</em> 在不同的文件系统上，则本操作在某些 Unix 分支上可能会失败。如果成功，重命名操作将是一个原子操作（这是 POSIX 的要求）。</p>
<p>本函数支持将 <em>src_dir_fd</em> 和 <em>dst_dir_fd</em> 中的一个或两个指定为 <a class="reference internal" href="#dir-fd"><span class="std std-ref">基于目录描述符的相对路径</span></a>。</p>
<p>如果需要在不同平台上都能替换目标，请使用 <a class="reference internal" href="#os.replace" title="os.replace"><code class="xref py py-func docutils literal notranslate"><span class="pre">replace()</span></code></a>。</p>
<p class="audit-hook">引发一个 <a class="reference internal" href="sys.html#auditing"><span class="std std-ref">审计事件</span></a> <code class="docutils literal notranslate"><span class="pre">os.rename</span></code> 附带参数 <code class="docutils literal notranslate"><span class="pre">src</span></code>、<code class="docutils literal notranslate"><span class="pre">dst</span></code>、<code class="docutils literal notranslate"><span class="pre">src_dir_fd</span></code>、<code class="docutils literal notranslate"><span class="pre">dst_dir_fd</span></code>。</p>
<div class="versionadded">
<p><span class="versionmodified added">3.3 新版功能: </span><em>src_dir_fd</em> 和 <em>dst_dir_fd</em> 参数。</p>
</div>
<div class="versionchanged">
<p><span class="versionmodified changed">在 3.6 版更改: </span>接受一个 <a class="reference internal" href="../glossary.html#term-path-like-object"><span class="xref std std-term">类路径对象</span></a> 作为 <em>src</em> 和 <em>dst</em>。</p>
</div>
</dd></dl>

<dl class="py function">
<dt id="os.renames">
<code class="sig-prename descclassname">os.</code><code class="sig-name descname">renames</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">old</span></em>, <em class="sig-param"><span class="n">new</span></em><span class="sig-paren">)</span><a class="headerlink" href="#os.renames" title="永久链接至目标">¶</a></dt>
<dd><p>递归重命名目录或文件。工作方式类似 <a class="reference internal" href="#os.rename" title="os.rename"><code class="xref py py-func docutils literal notranslate"><span class="pre">rename()</span></code></a>，除了会首先创建新路径所需的中间目录。重命名后，将调用 <a class="reference internal" href="#os.removedirs" title="os.removedirs"><code class="xref py py-func docutils literal notranslate"><span class="pre">removedirs()</span></code></a> 删除旧路径中不需要的目录。</p>
<div class="admonition note">
<p class="admonition-title">注解</p>
<p>如果用户没有权限删除末级的目录或文件，则本函数可能会无法建立新的目录结构。</p>
</div>
<p class="audit-hook">引发一个 <a class="reference internal" href="sys.html#auditing"><span class="std std-ref">审计事件</span></a> <code class="docutils literal notranslate"><span class="pre">os.rename</span></code> 附带参数 <code class="docutils literal notranslate"><span class="pre">src</span></code>、<code class="docutils literal notranslate"><span class="pre">dst</span></code>、<code class="docutils literal notranslate"><span class="pre">src_dir_fd</span></code>、<code class="docutils literal notranslate"><span class="pre">dst_dir_fd</span></code>。</p>
<div class="versionchanged">
<p><span class="versionmodified changed">在 3.6 版更改: </span>接受一个 <a class="reference internal" href="../glossary.html#term-path-like-object"><span class="xref std std-term">类路径对象</span></a> 作为 <em>old</em> 和 <em>new</em>。</p>
</div>
</dd></dl>

<dl class="py function">
<dt id="os.replace">
<code class="sig-prename descclassname">os.</code><code class="sig-name descname">replace</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">src</span></em>, <em class="sig-param"><span class="n">dst</span></em>, <em class="sig-param"><span class="o">*</span></em>, <em class="sig-param"><span class="n">src_dir_fd</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">dst_dir_fd</span><span class="o">=</span><span class="default_value">None</span></em><span class="sig-paren">)</span><a class="headerlink" href="#os.replace" title="永久链接至目标">¶</a></dt>
<dd><p>将文件或目录 <em>src</em> 重命名为 <em>dst</em>。如果 <em>dst</em> 是非空目录，将抛出 <a class="reference internal" href="exceptions.html#OSError" title="OSError"><code class="xref py py-exc docutils literal notranslate"><span class="pre">OSError</span></code></a> 异常。如果 <em>dst</em> 已存在且为文件，则在用户具有权限的情况下，将对其进行静默替换。如果 <em>src</em> 和 <em>dst</em> 在不同的文件系统上，本操作可能会失败。如果成功，重命名操作将是一个原子操作（这是 POSIX 的要求）。</p>
<p>本函数支持将 <em>src_dir_fd</em> 和 <em>dst_dir_fd</em> 中的一个或两个指定为 <a class="reference internal" href="#dir-fd"><span class="std std-ref">基于目录描述符的相对路径</span></a>。</p>
<p class="audit-hook">引发一个 <a class="reference internal" href="sys.html#auditing"><span class="std std-ref">审计事件</span></a> <code class="docutils literal notranslate"><span class="pre">os.rename</span></code> 附带参数 <code class="docutils literal notranslate"><span class="pre">src</span></code>、<code class="docutils literal notranslate"><span class="pre">dst</span></code>、<code class="docutils literal notranslate"><span class="pre">src_dir_fd</span></code>、<code class="docutils literal notranslate"><span class="pre">dst_dir_fd</span></code>。</p>
<div class="versionadded">
<p><span class="versionmodified added">3.3 新版功能.</span></p>
</div>
<div class="versionchanged">
<p><span class="versionmodified changed">在 3.6 版更改: </span>接受一个 <a class="reference internal" href="../glossary.html#term-path-like-object"><span class="xref std std-term">类路径对象</span></a> 作为 <em>src</em> 和 <em>dst</em>。</p>
</div>
</dd></dl>

<dl class="py function">
<dt id="os.rmdir">
<code class="sig-prename descclassname">os.</code><code class="sig-name descname">rmdir</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">path</span></em>, <em class="sig-param"><span class="o">*</span></em>, <em class="sig-param"><span class="n">dir_fd</span><span class="o">=</span><span class="default_value">None</span></em><span class="sig-paren">)</span><a class="headerlink" href="#os.rmdir" title="永久链接至目标">¶</a></dt>
<dd><p>移除（删除）目录 <em>path</em>。如果目录不存在或不为空，则会分别抛出 <a class="reference internal" href="exceptions.html#FileNotFoundError" title="FileNotFoundError"><code class="xref py py-exc docutils literal notranslate"><span class="pre">FileNotFoundError</span></code></a> 或 <a class="reference internal" href="exceptions.html#OSError" title="OSError"><code class="xref py py-exc docutils literal notranslate"><span class="pre">OSError</span></code></a> 异常。要删除整个目录树，可以使用 <a class="reference internal" href="shutil.html#shutil.rmtree" title="shutil.rmtree"><code class="xref py py-func docutils literal notranslate"><span class="pre">shutil.rmtree()</span></code></a>。</p>
<p>本函数支持 <a class="reference internal" href="#dir-fd"><span class="std std-ref">基于目录描述符的相对路径</span></a>。</p>
<p class="audit-hook">引发一个 <a class="reference internal" href="sys.html#auditing"><span class="std std-ref">审计事件</span></a> <code class="docutils literal notranslate"><span class="pre">os.rmdir</span></code>，附带参数 <code class="docutils literal notranslate"><span class="pre">path</span></code>、<code class="docutils literal notranslate"><span class="pre">dir_fd</span></code>。</p>
<div class="versionadded">
<p><span class="versionmodified added">3.3 新版功能: </span><em>dir_fd</em> 参数。</p>
</div>
<div class="versionchanged">
<p><span class="versionmodified changed">在 3.6 版更改: </span>接受一个 <a class="reference internal" href="../glossary.html#term-path-like-object"><span class="xref std std-term">path-like object</span></a>。</p>
</div>
</dd></dl>

<dl class="py function">
<dt id="os.scandir">
<code class="sig-prename descclassname">os.</code><code class="sig-name descname">scandir</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">path</span><span class="o">=</span><span class="default_value">'.'</span></em><span class="sig-paren">)</span><a class="headerlink" href="#os.scandir" title="永久链接至目标">¶</a></dt>
<dd><p>返回一个 <a class="reference internal" href="#os.DirEntry" title="os.DirEntry"><code class="xref py py-class docutils literal notranslate"><span class="pre">os.DirEntry</span></code></a> 对象的迭代器，它们对应于由 <em>path</em> 指定目录中的条目。 这些条目会以任意顺序生成，并且不包括特殊条目 <code class="docutils literal notranslate"><span class="pre">'.'</span></code> 和 <code class="docutils literal notranslate"><span class="pre">'..'</span></code>。 如果有文件在迭代器创建之后在目录中被移除或添加，是否要包括该文件对应的条目并没有规定。</p>
<p>如果需要文件类型或文件属性信息，使用 <a class="reference internal" href="#os.scandir" title="os.scandir"><code class="xref py py-func docutils literal notranslate"><span class="pre">scandir()</span></code></a> 代替 <a class="reference internal" href="#os.listdir" title="os.listdir"><code class="xref py py-func docutils literal notranslate"><span class="pre">listdir()</span></code></a> 可以大大提高这部分代码的性能，因为如果操作系统在扫描目录时返回的是 <a class="reference internal" href="#os.DirEntry" title="os.DirEntry"><code class="xref py py-class docutils literal notranslate"><span class="pre">os.DirEntry</span></code></a> 对象，则该对象包含了这些信息。所有 <a class="reference internal" href="#os.DirEntry" title="os.DirEntry"><code class="xref py py-class docutils literal notranslate"><span class="pre">os.DirEntry</span></code></a> 的方法都可能执行一次系统调用，但是 <a class="reference internal" href="#os.DirEntry.is_dir" title="os.DirEntry.is_dir"><code class="xref py py-func docutils literal notranslate"><span class="pre">is_dir()</span></code></a> 和 <a class="reference internal" href="#os.DirEntry.is_file" title="os.DirEntry.is_file"><code class="xref py py-func docutils literal notranslate"><span class="pre">is_file()</span></code></a> 通常只在有符号链接时才执行一次系统调用。<a class="reference internal" href="#os.DirEntry.stat" title="os.DirEntry.stat"><code class="xref py py-func docutils literal notranslate"><span class="pre">os.DirEntry.stat()</span></code></a> 在 Unix 上始终需要一次系统调用，而在 Windows 上只在有符号链接时才需要。</p>
<p><em>path</em> 可以是 <a class="reference internal" href="../glossary.html#term-path-like-object"><span class="xref std std-term">类路径对象</span></a>。如果 <em>path</em> 是（直接传入或通过 <a class="reference internal" href="#os.PathLike" title="os.PathLike"><code class="xref py py-class docutils literal notranslate"><span class="pre">PathLike</span></code></a> 接口间接传入的） <code class="docutils literal notranslate"><span class="pre">bytes</span></code> 类型，那么每个 <a class="reference internal" href="#os.DirEntry" title="os.DirEntry"><code class="xref py py-class docutils literal notranslate"><span class="pre">os.DirEntry</span></code></a> 的 <a class="reference internal" href="#os.DirEntry.name" title="os.DirEntry.name"><code class="xref py py-attr docutils literal notranslate"><span class="pre">name</span></code></a> 和 <a class="reference internal" href="#os.DirEntry.path" title="os.DirEntry.path"><code class="xref py py-attr docutils literal notranslate"><span class="pre">path</span></code></a> 属性将是 <code class="docutils literal notranslate"><span class="pre">bytes</span></code> 类型，其他情况下是 <code class="docutils literal notranslate"><span class="pre">str</span></code> 类型。</p>
<p>本函数也支持 <a class="reference internal" href="#path-fd"><span class="std std-ref">指定文件描述符为参数</span></a>，其中描述符必须指向目录。</p>
<p class="audit-hook">引发一个 <a class="reference internal" href="sys.html#auditing"><span class="std std-ref">审计事件</span></a> <code class="docutils literal notranslate"><span class="pre">os.scandir</span></code>，附带参数 <code class="docutils literal notranslate"><span class="pre">path</span></code>。</p>
<p><a class="reference internal" href="#os.scandir" title="os.scandir"><code class="xref py py-func docutils literal notranslate"><span class="pre">scandir()</span></code></a> 迭代器支持 <a class="reference internal" href="../glossary.html#term-context-manager"><span class="xref std std-term">上下文管理</span></a> 协议，并具有以下方法：</p>
<dl class="py method">
<dt id="os.scandir.close">
<code class="sig-prename descclassname">scandir.</code><code class="sig-name descname">close</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#os.scandir.close" title="永久链接至目标">¶</a></dt>
<dd><p>关闭迭代器并释放占用的资源。</p>
<p>当迭代器迭代完毕，或垃圾回收，或迭代过程出错时，将自动调用本方法。但仍建议显式调用它或使用 <a class="reference internal" href="../reference/compound_stmts.html#with"><code class="xref std std-keyword docutils literal notranslate"><span class="pre">with</span></code></a> 语句。</p>
<div class="versionadded">
<p><span class="versionmodified added">3.6 新版功能.</span></p>
</div>
</dd></dl>

<p>下面的例子演示了 <a class="reference internal" href="#os.scandir" title="os.scandir"><code class="xref py py-func docutils literal notranslate"><span class="pre">scandir()</span></code></a> 的简单用法，用来显示给定 <em>path</em> 中所有不以 <code class="docutils literal notranslate"><span class="pre">'.'</span></code> 开头的文件（不包括目录）。<code class="docutils literal notranslate"><span class="pre">entry.is_file()</span></code> 通常不会增加一次额外的系统调用:</p>
<div class="highlight-python3 notranslate"><div class="highlight"><pre><span></span><span class="k">with</span> <span class="n">os</span><span class="o">.</span><span class="n">scandir</span><span class="p">(</span><span class="n">path</span><span class="p">)</span> <span class="k">as</span> <span class="n">it</span><span class="p">:</span>
    <span class="k">for</span> <span class="n">entry</span> <span class="ow">in</span> <span class="n">it</span><span class="p">:</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">entry</span><span class="o">.</span><span class="n">name</span><span class="o">.</span><span class="n">startswith</span><span class="p">(</span><span class="s1">&#39;.&#39;</span><span class="p">)</span> <span class="ow">and</span> <span class="n">entry</span><span class="o">.</span><span class="n">is_file</span><span class="p">():</span>
            <span class="nb">print</span><span class="p">(</span><span class="n">entry</span><span class="o">.</span><span class="n">name</span><span class="p">)</span>
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">注解</p>
<p>在基于 Unix 的系统上，<a class="reference internal" href="#os.scandir" title="os.scandir"><code class="xref py py-func docutils literal notranslate"><span class="pre">scandir()</span></code></a> 使用系统的 <a class="reference external" href="http://pubs.opengroup.org/onlinepubs/009695399/functions/opendir.html">opendir()</a> 和 <a class="reference external" href="http://pubs.opengroup.org/onlinepubs/009695399/functions/readdir_r.html">readdir()</a> 函数。在 Windows 上，它使用 Win32 <a class="reference external" href="https://msdn.microsoft.com/en-us/library/windows/desktop/aa364418(v=vs.85).aspx">FindFirstFileW</a> 和 <a class="reference external" href="https://msdn.microsoft.com/en-us/library/windows/desktop/aa364428(v=vs.85).aspx">FindNextFileW</a> 函数。</p>
</div>
<div class="versionadded">
<p><span class="versionmodified added">3.5 新版功能.</span></p>
</div>
<div class="versionadded">
<p><span class="versionmodified added">3.6 新版功能: </span>添加了对 <a class="reference internal" href="../glossary.html#term-context-manager"><span class="xref std std-term">上下文管理</span></a> 协议和 <a class="reference internal" href="#os.scandir.close" title="os.scandir.close"><code class="xref py py-func docutils literal notranslate"><span class="pre">close()</span></code></a> 方法的支持。如果 <a class="reference internal" href="#os.scandir" title="os.scandir"><code class="xref py py-func docutils literal notranslate"><span class="pre">scandir()</span></code></a> 迭代器没有迭代完毕且没有显式关闭，其析构函数将发出 <a class="reference internal" href="exceptions.html#ResourceWarning" title="ResourceWarning"><code class="xref py py-exc docutils literal notranslate"><span class="pre">ResourceWarning</span></code></a> 警告。</p>
<p>本函数接受一个 <a class="reference internal" href="../glossary.html#term-path-like-object"><span class="xref std std-term">类路径对象</span></a>。</p>
</div>
<div class="versionchanged">
<p><span class="versionmodified changed">在 3.7 版更改: </span>在 Unix 上新增支持 <a class="reference internal" href="#path-fd"><span class="std std-ref">指定文件描述符为参数</span></a>。</p>
</div>
</dd></dl>

<dl class="py class">
<dt id="os.DirEntry">
<em class="property">class </em><code class="sig-prename descclassname">os.</code><code class="sig-name descname">DirEntry</code><a class="headerlink" href="#os.DirEntry" title="永久链接至目标">¶</a></dt>
<dd><p>由 <a class="reference internal" href="#os.scandir" title="os.scandir"><code class="xref py py-func docutils literal notranslate"><span class="pre">scandir()</span></code></a> 生成的对象，用于显示目录内某个条目的文件路径和其他文件属性。</p>
<p><a class="reference internal" href="#os.scandir" title="os.scandir"><code class="xref py py-func docutils literal notranslate"><span class="pre">scandir()</span></code></a> 将在不进行额外系统调用的情况下，提供尽可能多的此类信息。每次进行 <code class="docutils literal notranslate"><span class="pre">stat()</span></code> 或 <code class="docutils literal notranslate"><span class="pre">lstat()</span></code> 系统调用时，<code class="docutils literal notranslate"><span class="pre">os.DirEntry</span></code> 对象会将结果缓存下来。</p>
<p><code class="docutils literal notranslate"><span class="pre">os.DirEntry</span></code> 实例不适合存储在长期存在的数据结构中，如果你知道文件元数据已更改，或者自调用 <a class="reference internal" href="#os.scandir" title="os.scandir"><code class="xref py py-func docutils literal notranslate"><span class="pre">scandir()</span></code></a> 以来已经经过了很长时间，请调用 <code class="docutils literal notranslate"><span class="pre">os.stat(entry.path)</span></code> 来获取最新信息。</p>
<p>因为 <code class="docutils literal notranslate"><span class="pre">os.DirEntry</span></code> 方法可以进行系统调用，所以它也可能抛出 <a class="reference internal" href="exceptions.html#OSError" title="OSError"><code class="xref py py-exc docutils literal notranslate"><span class="pre">OSError</span></code></a> 异常。如需精确定位错误，可以逐个调用 <code class="docutils literal notranslate"><span class="pre">os.DirEntry</span></code> 中的方法来捕获 <a class="reference internal" href="exceptions.html#OSError" title="OSError"><code class="xref py py-exc docutils literal notranslate"><span class="pre">OSError</span></code></a>，并适当处理。</p>
<p>为了能直接用作 <a class="reference internal" href="../glossary.html#term-path-like-object"><span class="xref std std-term">类路径对象</span></a>，<code class="docutils literal notranslate"><span class="pre">os.DirEntry</span></code> 实现了 <a class="reference internal" href="#os.PathLike" title="os.PathLike"><code class="xref py py-class docutils literal notranslate"><span class="pre">PathLike</span></code></a> 接口。</p>
<p><code class="docutils literal notranslate"><span class="pre">os.DirEntry</span></code> 实例所包含的属性和方法如下：</p>
<dl class="py attribute">
<dt id="os.DirEntry.name">
<code class="sig-name descname">name</code><a class="headerlink" href="#os.DirEntry.name" title="永久链接至目标">¶</a></dt>
<dd><p>本条目的基本文件名，是根据 <a class="reference internal" href="#os.scandir" title="os.scandir"><code class="xref py py-func docutils literal notranslate"><span class="pre">scandir()</span></code></a> 的 <em>path</em> 参数得出的相对路径。</p>
<p>如果 <a class="reference internal" href="#os.scandir" title="os.scandir"><code class="xref py py-func docutils literal notranslate"><span class="pre">scandir()</span></code></a> 的 <em>path</em> 参数是 <code class="docutils literal notranslate"><span class="pre">bytes</span></code> 类型，则 <a class="reference internal" href="#os.name" title="os.name"><code class="xref py py-attr docutils literal notranslate"><span class="pre">name</span></code></a> 属性也是 <code class="docutils literal notranslate"><span class="pre">bytes</span></code> 类型，否则为 <code class="docutils literal notranslate"><span class="pre">str</span></code>。使用 <a class="reference internal" href="#os.fsdecode" title="os.fsdecode"><code class="xref py py-func docutils literal notranslate"><span class="pre">fsdecode()</span></code></a> 解码 byte 类型的文件名。</p>
</dd></dl>

<dl class="py attribute">
<dt id="os.DirEntry.path">
<code class="sig-name descname">path</code><a class="headerlink" href="#os.DirEntry.path" title="永久链接至目标">¶</a></dt>
<dd><p>本条目的完整路径：等效于 <code class="docutils literal notranslate"><span class="pre">os.path.join(scandir_path,</span> <span class="pre">entry.name)</span></code>，其中 <em>scandir_path</em> 就是 <a class="reference internal" href="#os.scandir" title="os.scandir"><code class="xref py py-func docutils literal notranslate"><span class="pre">scandir()</span></code></a> 的 <em>path</em> 参数。仅当 <a class="reference internal" href="#os.scandir" title="os.scandir"><code class="xref py py-func docutils literal notranslate"><span class="pre">scandir()</span></code></a> 的 <em>path</em> 参数为绝对路径时，本路径才是绝对路径。如果 <a class="reference internal" href="#os.scandir" title="os.scandir"><code class="xref py py-func docutils literal notranslate"><span class="pre">scandir()</span></code></a> 的 <em>path</em> 参数是 <a class="reference internal" href="#path-fd"><span class="std std-ref">文件描述符</span></a>，则 <a class="reference internal" href="os.path.html#module-os.path" title="os.path: Operations on pathnames."><code class="xref py py-attr docutils literal notranslate"><span class="pre">path</span></code></a> 属性与上述 <a class="reference internal" href="#os.name" title="os.name"><code class="xref py py-attr docutils literal notranslate"><span class="pre">name</span></code></a> 属性相同。</p>
<p>如果 <a class="reference internal" href="#os.scandir" title="os.scandir"><code class="xref py py-func docutils literal notranslate"><span class="pre">scandir()</span></code></a> 的 <em>path</em> 参数是 <code class="docutils literal notranslate"><span class="pre">bytes</span></code> 类型，则 <a class="reference internal" href="os.path.html#module-os.path" title="os.path: Operations on pathnames."><code class="xref py py-attr docutils literal notranslate"><span class="pre">path</span></code></a> 属性也是 <code class="docutils literal notranslate"><span class="pre">bytes</span></code> 类型，否则为 <code class="docutils literal notranslate"><span class="pre">str</span></code>。使用 <a class="reference internal" href="#os.fsdecode" title="os.fsdecode"><code class="xref py py-func docutils literal notranslate"><span class="pre">fsdecode()</span></code></a> 解码 byte 类型的文件名。</p>
</dd></dl>

<dl class="py method">
<dt id="os.DirEntry.inode">
<code class="sig-name descname">inode</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#os.DirEntry.inode" title="永久链接至目标">¶</a></dt>
<dd><p>返回本条目的索引节点号 (inode number)。</p>
<p>这一结果是缓存在 <code class="docutils literal notranslate"><span class="pre">os.DirEntry</span></code> 对象中的，请调用 <code class="docutils literal notranslate"><span class="pre">os.stat(entry.path,</span> <span class="pre">follow_symlinks=False).st_ino</span></code> 来获取最新信息。</p>
<p>一开始没有缓存时，在 Windows 上需要一次系统调用，但在 Unix 上不需要。</p>
</dd></dl>

<dl class="py method">
<dt id="os.DirEntry.is_dir">
<code class="sig-name descname">is_dir</code><span class="sig-paren">(</span><em class="sig-param"><span class="o">*</span></em>, <em class="sig-param"><span class="n">follow_symlinks</span><span class="o">=</span><span class="default_value">True</span></em><span class="sig-paren">)</span><a class="headerlink" href="#os.DirEntry.is_dir" title="永久链接至目标">¶</a></dt>
<dd><p>如果本条目是目录，或是指向目录的符号链接，则返回 <code class="docutils literal notranslate"><span class="pre">True</span></code>。如果本条目是文件，或指向任何其他类型的文件，或该目录不再存在，则返回 <code class="docutils literal notranslate"><span class="pre">False</span></code>。</p>
<p>如果 <em>follow_symlinks</em> 是 <code class="docutils literal notranslate"><span class="pre">False</span></code>，那么仅当本条目为目录时返回 <code class="docutils literal notranslate"><span class="pre">True</span></code> （不跟踪符号链接），如果本条目是任何类型的文件，或该文件不再存在，则返回 <code class="docutils literal notranslate"><span class="pre">False</span></code>。</p>
<p>这一结果是缓存在 <code class="docutils literal notranslate"><span class="pre">os.DirEntry</span></code> 对象中的，且 <em>follow_symlinks</em> 为 <code class="docutils literal notranslate"><span class="pre">True</span></code> 和 <code class="docutils literal notranslate"><span class="pre">False</span></code> 时的缓存是分开的。请调用 <a class="reference internal" href="#os.stat" title="os.stat"><code class="xref py py-func docutils literal notranslate"><span class="pre">os.stat()</span></code></a> 和 <a class="reference internal" href="stat.html#stat.S_ISDIR" title="stat.S_ISDIR"><code class="xref py py-func docutils literal notranslate"><span class="pre">stat.S_ISDIR()</span></code></a> 来获取最新信息。</p>
<p>一开始没有缓存时，大多数情况下不需要系统调用。特别是对于非符号链接，Windows 和 Unix 都不需要系统调用，除非某些 Unix 文件系统（如网络文件系统）返回了 <code class="docutils literal notranslate"><span class="pre">dirent.d_type</span> <span class="pre">==</span> <span class="pre">DT_UNKNOWN</span></code>。如果本条目是符号链接，则需要一次系统调用来跟踪它（除非 <em>follow_symlinks</em> 为 <code class="docutils literal notranslate"><span class="pre">False</span></code>）。</p>
<p>本方法可能抛出 <a class="reference internal" href="exceptions.html#OSError" title="OSError"><code class="xref py py-exc docutils literal notranslate"><span class="pre">OSError</span></code></a> 异常，如 <a class="reference internal" href="exceptions.html#PermissionError" title="PermissionError"><code class="xref py py-exc docutils literal notranslate"><span class="pre">PermissionError</span></code></a> 异常，但 <a class="reference internal" href="exceptions.html#FileNotFoundError" title="FileNotFoundError"><code class="xref py py-exc docutils literal notranslate"><span class="pre">FileNotFoundError</span></code></a> 异常会被内部捕获且不会抛出。</p>
</dd></dl>

<dl class="py method">
<dt id="os.DirEntry.is_file">
<code class="sig-name descname">is_file</code><span class="sig-paren">(</span><em class="sig-param"><span class="o">*</span></em>, <em class="sig-param"><span class="n">follow_symlinks</span><span class="o">=</span><span class="default_value">True</span></em><span class="sig-paren">)</span><a class="headerlink" href="#os.DirEntry.is_file" title="永久链接至目标">¶</a></dt>
<dd><p>如果本条目是文件，或是指向文件的符号链接，则返回 <code class="docutils literal notranslate"><span class="pre">True</span></code>。如果本条目是目录，或指向目录，或指向其他非文件条目，或该文件不再存在，则返回 <code class="docutils literal notranslate"><span class="pre">False</span></code>。</p>
<p>如果 <em>follow_symlinks</em> 是 <code class="docutils literal notranslate"><span class="pre">False</span></code>，那么仅当本条目为文件时返回 <code class="docutils literal notranslate"><span class="pre">True</span></code> （不跟踪符号链接），如果本条目是目录或其他非文件条目，或该文件不再存在，则返回 <code class="docutils literal notranslate"><span class="pre">False</span></code>。</p>
<p>这一结果是缓存在 <code class="docutils literal notranslate"><span class="pre">os.DirEntry</span></code> 对象中的。缓存、系统调用、异常抛出都与 <a class="reference internal" href="#os.DirEntry.is_dir" title="os.DirEntry.is_dir"><code class="xref py py-func docutils literal notranslate"><span class="pre">is_dir()</span></code></a> 一致。</p>
</dd></dl>

<dl class="py method">
<dt id="os.DirEntry.is_symlink">
<code class="sig-name descname">is_symlink</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#os.DirEntry.is_symlink" title="永久链接至目标">¶</a></dt>
<dd><p>如果本条目是符号链接（即使是断开的链接），返回 <code class="docutils literal notranslate"><span class="pre">True</span></code>。如果是目录或任何类型的文件，或本条目不再存在，返回 <code class="docutils literal notranslate"><span class="pre">False</span></code>。</p>
<p>这一结果是缓存在 <code class="docutils literal notranslate"><span class="pre">os.DirEntry</span></code> 对象中的，请调用 <a class="reference internal" href="os.path.html#os.path.islink" title="os.path.islink"><code class="xref py py-func docutils literal notranslate"><span class="pre">os.path.islink()</span></code></a> 来获取最新信息。</p>
<p>一开始没有缓存时，大多数情况下不需要系统调用。其实 Windows 和 Unix 都不需要系统调用，除非某些 Unix 文件系统（如网络文件系统）返回了 <code class="docutils literal notranslate"><span class="pre">dirent.d_type</span> <span class="pre">==</span> <span class="pre">DT_UNKNOWN</span></code>。</p>
<p>本方法可能抛出 <a class="reference internal" href="exceptions.html#OSError" title="OSError"><code class="xref py py-exc docutils literal notranslate"><span class="pre">OSError</span></code></a> 异常，如 <a class="reference internal" href="exceptions.html#PermissionError" title="PermissionError"><code class="xref py py-exc docutils literal notranslate"><span class="pre">PermissionError</span></code></a> 异常，但 <a class="reference internal" href="exceptions.html#FileNotFoundError" title="FileNotFoundError"><code class="xref py py-exc docutils literal notranslate"><span class="pre">FileNotFoundError</span></code></a> 异常会被内部捕获且不会抛出。</p>
</dd></dl>

<dl class="py method">
<dt id="os.DirEntry.stat">
<code class="sig-name descname">stat</code><span class="sig-paren">(</span><em class="sig-param"><span class="o">*</span></em>, <em class="sig-param"><span class="n">follow_symlinks</span><span class="o">=</span><span class="default_value">True</span></em><span class="sig-paren">)</span><a class="headerlink" href="#os.DirEntry.stat" title="永久链接至目标">¶</a></dt>
<dd><p>返回本条目对应的 <a class="reference internal" href="#os.stat_result" title="os.stat_result"><code class="xref py py-class docutils literal notranslate"><span class="pre">stat_result</span></code></a> 对象。本方法默认会跟踪符号链接，要获取符号链接本身的 stat，请添加 <code class="docutils literal notranslate"><span class="pre">follow_symlinks=False</span></code> 参数。</p>
<p>在 Unix 上，本方法需要一次系统调用。在 Windows 上，仅在 <em>follow_symlinks</em> 为 <code class="docutils literal notranslate"><span class="pre">True</span></code> 且该条目是一个重解析点（如符号链接或目录结点）时，才需要一次系统调用。</p>
<p>在 Windows 上，<a class="reference internal" href="#os.stat_result" title="os.stat_result"><code class="xref py py-class docutils literal notranslate"><span class="pre">stat_result</span></code></a> 的 <code class="docutils literal notranslate"><span class="pre">st_ino</span></code>、<code class="docutils literal notranslate"><span class="pre">st_dev</span></code> 和 <code class="docutils literal notranslate"><span class="pre">st_nlink</span></code> 属性总是为零。请调用 <a class="reference internal" href="#os.stat" title="os.stat"><code class="xref py py-func docutils literal notranslate"><span class="pre">os.stat()</span></code></a> 以获得这些属性。</p>
<p>这一结果是缓存在 <code class="docutils literal notranslate"><span class="pre">os.DirEntry</span></code> 对象中的，且 <em>follow_symlinks</em> 为 <code class="docutils literal notranslate"><span class="pre">True</span></code> 和 <code class="docutils literal notranslate"><span class="pre">False</span></code> 时的缓存是分开的。请调用 <a class="reference internal" href="#os.stat" title="os.stat"><code class="xref py py-func docutils literal notranslate"><span class="pre">os.stat()</span></code></a> 来获取最新信息。</p>
</dd></dl>

<p>注意，<code class="docutils literal notranslate"><span class="pre">os.DirEntry</span></code> 和 <a class="reference internal" href="pathlib.html#pathlib.Path" title="pathlib.Path"><code class="xref py py-class docutils literal notranslate"><span class="pre">pathlib.Path</span></code></a> 的几个属性和方法之间存在很好的对应关系。具体来说是 <code class="docutils literal notranslate"><span class="pre">name</span></code> 属性，以及 <code class="docutils literal notranslate"><span class="pre">is_dir()</span></code>、<code class="docutils literal notranslate"><span class="pre">is_file()</span></code>、<code class="docutils literal notranslate"><span class="pre">is_symlink()</span></code> 和 <code class="docutils literal notranslate"><span class="pre">stat()</span></code> 方法，在两个类中具有相同的含义。</p>
<div class="versionadded">
<p><span class="versionmodified added">3.5 新版功能.</span></p>
</div>
<div class="versionchanged">
<p><span class="versionmodified changed">在 3.6 版更改: </span>添加了对 <a class="reference internal" href="#os.PathLike" title="os.PathLike"><code class="xref py py-class docutils literal notranslate"><span class="pre">PathLike</span></code></a> 接口的支持。在 Windows 上添加了对 <a class="reference internal" href="stdtypes.html#bytes" title="bytes"><code class="xref py py-class docutils literal notranslate"><span class="pre">bytes</span></code></a> 类型路径的支持。</p>
</div>
</dd></dl>

<dl class="py function">
<dt id="os.stat">
<code class="sig-prename descclassname">os.</code><code class="sig-name descname">stat</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">path</span></em>, <em class="sig-param"><span class="o">*</span></em>, <em class="sig-param"><span class="n">dir_fd</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">follow_symlinks</span><span class="o">=</span><span class="default_value">True</span></em><span class="sig-paren">)</span><a class="headerlink" href="#os.stat" title="永久链接至目标">¶</a></dt>
<dd><p>获取文件或文件描述符的状态。在所给路径上执行等效于 <code class="xref c c-func docutils literal notranslate"><span class="pre">stat()</span></code> 系统调用的操作。<em>path</em> 可以是字符串类型，或（直接传入或通过 <a class="reference internal" href="#os.PathLike" title="os.PathLike"><code class="xref py py-class docutils literal notranslate"><span class="pre">PathLike</span></code></a> 接口间接传入的） bytes 类型，或打开的文件描述符。返回一个 <a class="reference internal" href="#os.stat_result" title="os.stat_result"><code class="xref py py-class docutils literal notranslate"><span class="pre">stat_result</span></code></a> 对象。</p>
<p>本函数默认会跟踪符号链接，要获取符号链接本身的 stat，请添加 <code class="docutils literal notranslate"><span class="pre">follow_symlinks=False</span></code> 参数，或使用 <a class="reference internal" href="#os.lstat" title="os.lstat"><code class="xref py py-func docutils literal notranslate"><span class="pre">lstat()</span></code></a>。</p>
<p>本函数支持 <a class="reference internal" href="#path-fd"><span class="std std-ref">指定文件描述符为参数</span></a> 和 <a class="reference internal" href="#follow-symlinks"><span class="std std-ref">不跟踪符号链接</span></a>。</p>
<p>在 Windows 上，传入 <code class="docutils literal notranslate"><span class="pre">follow_symlinks=False</span></code> 将禁用所有名称代理重解析点，其中包括符号链接和目录结点。其他类型的重解析点将直接打开，比如不像链接的或系统无法跟踪的重解析点。当多个链接形成一个链时，本方法可能会返回原始链接的 stat，无法完整遍历到非链接的对象。在这种情况下，要获取最终路径的 stat，请使用 <a class="reference internal" href="os.path.html#os.path.realpath" title="os.path.realpath"><code class="xref py py-func docutils literal notranslate"><span class="pre">os.path.realpath()</span></code></a> 函数尽可能地解析路径，并在解析结果上调用 <a class="reference internal" href="#os.lstat" title="os.lstat"><code class="xref py py-func docutils literal notranslate"><span class="pre">lstat()</span></code></a>。这不适用于空链接或交接点，否则会抛出异常。</p>
<p id="index-29">示例:</p>
<div class="highlight-python3 notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">os</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">statinfo</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">stat</span><span class="p">(</span><span class="s1">&#39;somefile.txt&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">statinfo</span>
<span class="go">os.stat_result(st_mode=33188, st_ino=7876932, st_dev=234881026,</span>
<span class="go">st_nlink=1, st_uid=501, st_gid=501, st_size=264, st_atime=1297230295,</span>
<span class="go">st_mtime=1297230027, st_ctime=1297230027)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">statinfo</span><span class="o">.</span><span class="n">st_size</span>
<span class="go">264</span>
</pre></div>
</div>
<div class="admonition seealso">
<p class="admonition-title">参见</p>
<p><a class="reference internal" href="#os.fstat" title="os.fstat"><code class="xref py py-func docutils literal notranslate"><span class="pre">fstat()</span></code></a> 和 <a class="reference internal" href="#os.lstat" title="os.lstat"><code class="xref py py-func docutils literal notranslate"><span class="pre">lstat()</span></code></a> 函数。</p>
</div>
<div class="versionadded">
<p><span class="versionmodified added">3.3 新版功能: </span>增加 <em>dir_fd</em> 和 <em>follow_symlinks</em> 参数，可指定文件描述符代替路径。</p>
</div>
<div class="versionchanged">
<p><span class="versionmodified changed">在 3.6 版更改: </span>接受一个 <a class="reference internal" href="../glossary.html#term-path-like-object"><span class="xref std std-term">path-like object</span></a>。</p>
</div>
<div class="versionchanged">
<p><span class="versionmodified changed">在 3.8 版更改: </span>在 Windows 上，本方法将跟踪系统能解析的所有重解析点，并且传入 <code class="docutils literal notranslate"><span class="pre">follow_symlinks=False</span></code> 会停止跟踪所有名称代理重解析点。现在，如果操作系统遇到无法跟踪的重解析点，<em>stat</em> 将返回原始路径的信息，就像已指定 <code class="docutils literal notranslate"><span class="pre">follow_symlinks=False</span></code> 一样，而不会抛出异常。</p>
</div>
</dd></dl>

<dl class="py class">
<dt id="os.stat_result">
<em class="property">class </em><code class="sig-prename descclassname">os.</code><code class="sig-name descname">stat_result</code><a class="headerlink" href="#os.stat_result" title="永久链接至目标">¶</a></dt>
<dd><p>本对象的属性大致对应于 <code class="xref c c-type docutils literal notranslate"><span class="pre">stat</span></code> 结构体成员，主要作为 <a class="reference internal" href="#os.stat" title="os.stat"><code class="xref py py-func docutils literal notranslate"><span class="pre">os.stat()</span></code></a>、<a class="reference internal" href="#os.fstat" title="os.fstat"><code class="xref py py-func docutils literal notranslate"><span class="pre">os.fstat()</span></code></a> 和 <a class="reference internal" href="#os.lstat" title="os.lstat"><code class="xref py py-func docutils literal notranslate"><span class="pre">os.lstat()</span></code></a> 的返回值。</p>
<p>属性：</p>
<dl class="py attribute">
<dt id="os.stat_result.st_mode">
<code class="sig-name descname">st_mode</code><a class="headerlink" href="#os.stat_result.st_mode" title="永久链接至目标">¶</a></dt>
<dd><p>文件模式：包括文件类型和文件模式位（即权限位）。</p>
</dd></dl>

<dl class="py attribute">
<dt id="os.stat_result.st_ino">
<code class="sig-name descname">st_ino</code><a class="headerlink" href="#os.stat_result.st_ino" title="永久链接至目标">¶</a></dt>
<dd><p>与平台有关，但如果不为零，则根据 <code class="docutils literal notranslate"><span class="pre">st_dev</span></code> 值唯一地标识文件。通常：</p>
<ul class="simple">
<li><p>在 Unix 上该值表示索引节点号 (inode number)。</p></li>
<li><p>在 Windows 上该值表示 <a class="reference external" href="https://msdn.microsoft.com/en-us/library/aa363788">文件索引号</a> 。</p></li>
</ul>
</dd></dl>

<dl class="py attribute">
<dt id="os.stat_result.st_dev">
<code class="sig-name descname">st_dev</code><a class="headerlink" href="#os.stat_result.st_dev" title="永久链接至目标">¶</a></dt>
<dd><p>该文件所在设备的标识符。</p>
</dd></dl>

<dl class="py attribute">
<dt id="os.stat_result.st_nlink">
<code class="sig-name descname">st_nlink</code><a class="headerlink" href="#os.stat_result.st_nlink" title="永久链接至目标">¶</a></dt>
<dd><p>硬链接的数量。</p>
</dd></dl>

<dl class="py attribute">
<dt id="os.stat_result.st_uid">
<code class="sig-name descname">st_uid</code><a class="headerlink" href="#os.stat_result.st_uid" title="永久链接至目标">¶</a></dt>
<dd><p>文件所有者的用户 ID。</p>
</dd></dl>

<dl class="py attribute">
<dt id="os.stat_result.st_gid">
<code class="sig-name descname">st_gid</code><a class="headerlink" href="#os.stat_result.st_gid" title="永久链接至目标">¶</a></dt>
<dd><p>文件所有者的用户组 ID。</p>
</dd></dl>

<dl class="py attribute">
<dt id="os.stat_result.st_size">
<code class="sig-name descname">st_size</code><a class="headerlink" href="#os.stat_result.st_size" title="永久链接至目标">¶</a></dt>
<dd><p>文件大小（以字节为单位），文件可以是常规文件或符号链接。符号链接的大小是它包含的路径的长度，不包括末尾的空字节。</p>
</dd></dl>

<p>时间戳：</p>
<dl class="py attribute">
<dt id="os.stat_result.st_atime">
<code class="sig-name descname">st_atime</code><a class="headerlink" href="#os.stat_result.st_atime" title="永久链接至目标">¶</a></dt>
<dd><p>最近的访问时间，以秒为单位。</p>
</dd></dl>

<dl class="py attribute">
<dt id="os.stat_result.st_mtime">
<code class="sig-name descname">st_mtime</code><a class="headerlink" href="#os.stat_result.st_mtime" title="永久链接至目标">¶</a></dt>
<dd><p>最近的修改时间，以秒为单位。</p>
</dd></dl>

<dl class="py attribute">
<dt id="os.stat_result.st_ctime">
<code class="sig-name descname">st_ctime</code><a class="headerlink" href="#os.stat_result.st_ctime" title="永久链接至目标">¶</a></dt>
<dd><p>取决于平台：</p>
<ul class="simple">
<li><p>在 Unix 上表示最近的元数据更改时间，</p></li>
<li><p>在 Windows 上表示创建时间，以秒为单位。</p></li>
</ul>
</dd></dl>

<dl class="py attribute">
<dt id="os.stat_result.st_atime_ns">
<code class="sig-name descname">st_atime_ns</code><a class="headerlink" href="#os.stat_result.st_atime_ns" title="永久链接至目标">¶</a></dt>
<dd><p>最近的访问时间，以纳秒表示，为整数。</p>
</dd></dl>

<dl class="py attribute">
<dt id="os.stat_result.st_mtime_ns">
<code class="sig-name descname">st_mtime_ns</code><a class="headerlink" href="#os.stat_result.st_mtime_ns" title="永久链接至目标">¶</a></dt>
<dd><p>最近的修改时间，以纳秒表示，为整数。</p>
</dd></dl>

<dl class="py attribute">
<dt id="os.stat_result.st_ctime_ns">
<code class="sig-name descname">st_ctime_ns</code><a class="headerlink" href="#os.stat_result.st_ctime_ns" title="永久链接至目标">¶</a></dt>
<dd><p>取决于平台：</p>
<ul class="simple">
<li><p>在 Unix 上表示最近的元数据更改时间，</p></li>
<li><p>在 Windows 上表示创建时间，以纳秒表示，为整数。</p></li>
</ul>
</dd></dl>

<div class="admonition note">
<p class="admonition-title">注解</p>
<p><a class="reference internal" href="#os.stat_result.st_atime" title="os.stat_result.st_atime"><code class="xref py py-attr docutils literal notranslate"><span class="pre">st_atime</span></code></a>、<a class="reference internal" href="#os.stat_result.st_mtime" title="os.stat_result.st_mtime"><code class="xref py py-attr docutils literal notranslate"><span class="pre">st_mtime</span></code></a> 和 <a class="reference internal" href="#os.stat_result.st_ctime" title="os.stat_result.st_ctime"><code class="xref py py-attr docutils literal notranslate"><span class="pre">st_ctime</span></code></a> 属性的确切含义和分辨率取决于操作系统和文件系统。例如，在使用 FAT 或 FAT32 文件系统的 Windows 上，<a class="reference internal" href="#os.stat_result.st_mtime" title="os.stat_result.st_mtime"><code class="xref py py-attr docutils literal notranslate"><span class="pre">st_mtime</span></code></a> 有 2 秒的分辨率，而 <a class="reference internal" href="#os.stat_result.st_atime" title="os.stat_result.st_atime"><code class="xref py py-attr docutils literal notranslate"><span class="pre">st_atime</span></code></a> 仅有 1 天的分辨率。详细信息请参阅操作系统文档。</p>
<p>类似地，尽管 <a class="reference internal" href="#os.stat_result.st_atime_ns" title="os.stat_result.st_atime_ns"><code class="xref py py-attr docutils literal notranslate"><span class="pre">st_atime_ns</span></code></a>、<a class="reference internal" href="#os.stat_result.st_mtime_ns" title="os.stat_result.st_mtime_ns"><code class="xref py py-attr docutils literal notranslate"><span class="pre">st_mtime_ns</span></code></a> 和 <a class="reference internal" href="#os.stat_result.st_ctime_ns" title="os.stat_result.st_ctime_ns"><code class="xref py py-attr docutils literal notranslate"><span class="pre">st_ctime_ns</span></code></a> 始终以纳秒表示，但许多系统并不提供纳秒精度。在确实提供纳秒精度的系统上，用于存储 <a class="reference internal" href="#os.stat_result.st_atime" title="os.stat_result.st_atime"><code class="xref py py-attr docutils literal notranslate"><span class="pre">st_atime</span></code></a>、<a class="reference internal" href="#os.stat_result.st_mtime" title="os.stat_result.st_mtime"><code class="xref py py-attr docutils literal notranslate"><span class="pre">st_mtime</span></code></a> 和 <a class="reference internal" href="#os.stat_result.st_ctime" title="os.stat_result.st_ctime"><code class="xref py py-attr docutils literal notranslate"><span class="pre">st_ctime</span></code></a> 的浮点对象无法保留所有精度，因此不够精确。如果需要确切的时间戳，则应始终使用 <a class="reference internal" href="#os.stat_result.st_atime_ns" title="os.stat_result.st_atime_ns"><code class="xref py py-attr docutils literal notranslate"><span class="pre">st_atime_ns</span></code></a>、<a class="reference internal" href="#os.stat_result.st_mtime_ns" title="os.stat_result.st_mtime_ns"><code class="xref py py-attr docutils literal notranslate"><span class="pre">st_mtime_ns</span></code></a> 和 <a class="reference internal" href="#os.stat_result.st_ctime_ns" title="os.stat_result.st_ctime_ns"><code class="xref py py-attr docutils literal notranslate"><span class="pre">st_ctime_ns</span></code></a>。</p>
</div>
<p>在某些 Unix 系统上（如 Linux 上），以下属性可能也可用：</p>
<dl class="py attribute">
<dt id="os.stat_result.st_blocks">
<code class="sig-name descname">st_blocks</code><a class="headerlink" href="#os.stat_result.st_blocks" title="永久链接至目标">¶</a></dt>
<dd><p>为文件分配的字节块数，每块 512 字节。文件是稀疏文件时，它可能小于 <a class="reference internal" href="#os.stat_result.st_size" title="os.stat_result.st_size"><code class="xref py py-attr docutils literal notranslate"><span class="pre">st_size</span></code></a>/512。</p>
</dd></dl>

<dl class="py attribute">
<dt id="os.stat_result.st_blksize">
<code class="sig-name descname">st_blksize</code><a class="headerlink" href="#os.stat_result.st_blksize" title="永久链接至目标">¶</a></dt>
<dd><p>“首选的” 块大小，用于提高文件系统 I/O 效率。写入文件时块大小太小可能会导致读取-修改-重写效率低下。</p>
</dd></dl>

<dl class="py attribute">
<dt id="os.stat_result.st_rdev">
<code class="sig-name descname">st_rdev</code><a class="headerlink" href="#os.stat_result.st_rdev" title="永久链接至目标">¶</a></dt>
<dd><p>设备类型（如果是 inode 设备）。</p>
</dd></dl>

<dl class="py attribute">
<dt id="os.stat_result.st_flags">
<code class="sig-name descname">st_flags</code><a class="headerlink" href="#os.stat_result.st_flags" title="永久链接至目标">¶</a></dt>
<dd><p>用户定义的文件标志位。</p>
</dd></dl>

<p>在其他 Unix 系统上（如 FreeBSD 上），以下属性可能可用（但仅当 root 使用它们时才被填充）：</p>
<dl class="py attribute">
<dt id="os.stat_result.st_gen">
<code class="sig-name descname">st_gen</code><a class="headerlink" href="#os.stat_result.st_gen" title="永久链接至目标">¶</a></dt>
<dd><p>文件生成号。</p>
</dd></dl>

<dl class="py attribute">
<dt id="os.stat_result.st_birthtime">
<code class="sig-name descname">st_birthtime</code><a class="headerlink" href="#os.stat_result.st_birthtime" title="永久链接至目标">¶</a></dt>
<dd><p>文件创建时间。</p>
</dd></dl>

<p>在 Solaris 及其衍生版本上，以下属性可能也可用：</p>
<dl class="py attribute">
<dt id="os.stat_result.st_fstype">
<code class="sig-name descname">st_fstype</code><a class="headerlink" href="#os.stat_result.st_fstype" title="永久链接至目标">¶</a></dt>
<dd><p>文件所在文件系统的类型的唯一标识，为字符串。</p>
</dd></dl>

<p>在 macOS 系统上，以下属性可能也可用：</p>
<dl class="py attribute">
<dt id="os.stat_result.st_rsize">
<code class="sig-name descname">st_rsize</code><a class="headerlink" href="#os.stat_result.st_rsize" title="永久链接至目标">¶</a></dt>
<dd><p>文件的实际大小。</p>
</dd></dl>

<dl class="py attribute">
<dt id="os.stat_result.st_creator">
<code class="sig-name descname">st_creator</code><a class="headerlink" href="#os.stat_result.st_creator" title="永久链接至目标">¶</a></dt>
<dd><p>文件的创建者。</p>
</dd></dl>

<dl class="py attribute">
<dt id="os.stat_result.st_type">
<code class="sig-name descname">st_type</code><a class="headerlink" href="#os.stat_result.st_type" title="永久链接至目标">¶</a></dt>
<dd><p>文件类型。</p>
</dd></dl>

<p>在 Windows 系统上，以下属性也可用：</p>
<dl class="py attribute">
<dt id="os.stat_result.st_file_attributes">
<code class="sig-name descname">st_file_attributes</code><a class="headerlink" href="#os.stat_result.st_file_attributes" title="永久链接至目标">¶</a></dt>
<dd><p>Windows 文件属性：<code class="docutils literal notranslate"><span class="pre">dwFileAttributes</span></code>，由 <code class="xref c c-func docutils literal notranslate"><span class="pre">GetFileInformationByHandle()</span></code> 返回的 <code class="docutils literal notranslate"><span class="pre">BY_HANDLE_FILE_INFORMATION</span></code> 结构体的成员之一。请参阅 <a class="reference internal" href="stat.html#module-stat" title="stat: Utilities for interpreting the results of os.stat(), os.lstat() and os.fstat()."><code class="xref py py-mod docutils literal notranslate"><span class="pre">stat</span></code></a> 模块中的 <code class="docutils literal notranslate"><span class="pre">FILE_ATTRIBUTE_*</span></code> 常量。</p>
</dd></dl>

<dl class="py attribute">
<dt id="os.stat_result.st_reparse_tag">
<code class="sig-name descname">st_reparse_tag</code><a class="headerlink" href="#os.stat_result.st_reparse_tag" title="永久链接至目标">¶</a></dt>
<dd><p>当 <a class="reference internal" href="#os.stat_result.st_file_attributes" title="os.stat_result.st_file_attributes"><code class="xref py py-attr docutils literal notranslate"><span class="pre">st_file_attributes</span></code></a> 存在 <code class="docutils literal notranslate"><span class="pre">FILE_ATTRIBUTE_REPARSE_POINT</span></code> 集合时，本字段包含重解析点类型标记。请参阅 <a class="reference internal" href="stat.html#module-stat" title="stat: Utilities for interpreting the results of os.stat(), os.lstat() and os.fstat()."><code class="xref py py-mod docutils literal notranslate"><span class="pre">stat</span></code></a> 模块中的 <code class="docutils literal notranslate"><span class="pre">IO_REPARSE_TAG_*</span></code> 常量。</p>
</dd></dl>

<p>标准模块 <a class="reference internal" href="stat.html#module-stat" title="stat: Utilities for interpreting the results of os.stat(), os.lstat() and os.fstat()."><code class="xref py py-mod docutils literal notranslate"><span class="pre">stat</span></code></a> 中定义了函数和常量，这些函数和常量可用于从 <code class="xref c c-type docutils literal notranslate"><span class="pre">stat</span></code> 结构体中提取信息。（在 Windows 上，某些项填充的是虚值。）</p>
<p>为了向后兼容，一个 <a class="reference internal" href="#os.stat_result" title="os.stat_result"><code class="xref py py-class docutils literal notranslate"><span class="pre">stat_result</span></code></a> 实例还可以作为至少包含 10 个整数的元组访问，以提供 <code class="xref c c-type docutils literal notranslate"><span class="pre">stat</span></code> 结构中最重要（和可移植）的成员，整数顺序为 <a class="reference internal" href="#os.stat_result.st_mode" title="os.stat_result.st_mode"><code class="xref py py-attr docutils literal notranslate"><span class="pre">st_mode</span></code></a>, <a class="reference internal" href="#os.stat_result.st_ino" title="os.stat_result.st_ino"><code class="xref py py-attr docutils literal notranslate"><span class="pre">st_ino</span></code></a>, <a class="reference internal" href="#os.stat_result.st_dev" title="os.stat_result.st_dev"><code class="xref py py-attr docutils literal notranslate"><span class="pre">st_dev</span></code></a>, <a class="reference internal" href="#os.stat_result.st_nlink" title="os.stat_result.st_nlink"><code class="xref py py-attr docutils literal notranslate"><span class="pre">st_nlink</span></code></a>, <a class="reference internal" href="#os.stat_result.st_uid" title="os.stat_result.st_uid"><code class="xref py py-attr docutils literal notranslate"><span class="pre">st_uid</span></code></a>, <a class="reference internal" href="#os.stat_result.st_gid" title="os.stat_result.st_gid"><code class="xref py py-attr docutils literal notranslate"><span class="pre">st_gid</span></code></a>, <a class="reference internal" href="#os.stat_result.st_size" title="os.stat_result.st_size"><code class="xref py py-attr docutils literal notranslate"><span class="pre">st_size</span></code></a>, <a class="reference internal" href="#os.stat_result.st_atime" title="os.stat_result.st_atime"><code class="xref py py-attr docutils literal notranslate"><span class="pre">st_atime</span></code></a>, <a class="reference internal" href="#os.stat_result.st_mtime" title="os.stat_result.st_mtime"><code class="xref py py-attr docutils literal notranslate"><span class="pre">st_mtime</span></code></a>, <a class="reference internal" href="#os.stat_result.st_ctime" title="os.stat_result.st_ctime"><code class="xref py py-attr docutils literal notranslate"><span class="pre">st_ctime</span></code></a>。某些实现可能在末尾还有更多项。为了与旧版 Python 兼容，以元组形式访问 <a class="reference internal" href="#os.stat_result" title="os.stat_result"><code class="xref py py-class docutils literal notranslate"><span class="pre">stat_result</span></code></a> 始终返回整数。</p>
<div class="versionadded">
<p><span class="versionmodified added">3.3 新版功能: </span>添加了 <a class="reference internal" href="#os.stat_result.st_atime_ns" title="os.stat_result.st_atime_ns"><code class="xref py py-attr docutils literal notranslate"><span class="pre">st_atime_ns</span></code></a>、<a class="reference internal" href="#os.stat_result.st_mtime_ns" title="os.stat_result.st_mtime_ns"><code class="xref py py-attr docutils literal notranslate"><span class="pre">st_mtime_ns</span></code></a> 和 <a class="reference internal" href="#os.stat_result.st_ctime_ns" title="os.stat_result.st_ctime_ns"><code class="xref py py-attr docutils literal notranslate"><span class="pre">st_ctime_ns</span></code></a> 成员。</p>
</div>
<div class="versionadded">
<p><span class="versionmodified added">3.5 新版功能: </span>在 Windows 上添加了 <a class="reference internal" href="#os.stat_result.st_file_attributes" title="os.stat_result.st_file_attributes"><code class="xref py py-attr docutils literal notranslate"><span class="pre">st_file_attributes</span></code></a> 成员。</p>
</div>
<div class="versionchanged">
<p><span class="versionmodified changed">在 3.5 版更改: </span>在 Windows 上，如果可用，会返回文件索引作为 <a class="reference internal" href="#os.stat_result.st_ino" title="os.stat_result.st_ino"><code class="xref py py-attr docutils literal notranslate"><span class="pre">st_ino</span></code></a> 的值。</p>
</div>
<div class="versionadded">
<p><span class="versionmodified added">3.7 新版功能: </span>在 Solaris 及其衍生版本上添加了 <a class="reference internal" href="#os.stat_result.st_fstype" title="os.stat_result.st_fstype"><code class="xref py py-attr docutils literal notranslate"><span class="pre">st_fstype</span></code></a> 成员。</p>
</div>
<div class="versionadded">
<p><span class="versionmodified added">3.8 新版功能: </span>在 Windows 上添加了 <a class="reference internal" href="#os.stat_result.st_reparse_tag" title="os.stat_result.st_reparse_tag"><code class="xref py py-attr docutils literal notranslate"><span class="pre">st_reparse_tag</span></code></a> 成员。</p>
</div>
<div class="versionchanged">
<p><span class="versionmodified changed">在 3.8 版更改: </span>在 Windows 上，<a class="reference internal" href="#os.stat_result.st_mode" title="os.stat_result.st_mode"><code class="xref py py-attr docutils literal notranslate"><span class="pre">st_mode</span></code></a> 成员现在可以根据需要将特殊文件标识为 <code class="xref py py-const docutils literal notranslate"><span class="pre">S_IFCHR</span></code>、<code class="xref py py-const docutils literal notranslate"><span class="pre">S_IFIFO</span></code> 或 <code class="xref py py-const docutils literal notranslate"><span class="pre">S_IFBLK</span></code>。</p>
</div>
</dd></dl>

<dl class="py function">
<dt id="os.statvfs">
<code class="sig-prename descclassname">os.</code><code class="sig-name descname">statvfs</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">path</span></em><span class="sig-paren">)</span><a class="headerlink" href="#os.statvfs" title="永久链接至目标">¶</a></dt>
<dd><p>在所给的路径上执行 <code class="xref c c-func docutils literal notranslate"><span class="pre">statvfs()</span></code> 系统调用。返回值是一个对象，其属性描述了所给路径上的文件系统，并且与 <code class="xref c c-type docutils literal notranslate"><span class="pre">statvfs</span></code> 结构体的成员相对应，即：<code class="xref py py-attr docutils literal notranslate"><span class="pre">f_bsize</span></code>, <code class="xref py py-attr docutils literal notranslate"><span class="pre">f_frsize</span></code>, <code class="xref py py-attr docutils literal notranslate"><span class="pre">f_blocks</span></code>, <code class="xref py py-attr docutils literal notranslate"><span class="pre">f_bfree</span></code>, <code class="xref py py-attr docutils literal notranslate"><span class="pre">f_bavail</span></code>, <code class="xref py py-attr docutils literal notranslate"><span class="pre">f_files</span></code>, <code class="xref py py-attr docutils literal notranslate"><span class="pre">f_ffree</span></code>, <code class="xref py py-attr docutils literal notranslate"><span class="pre">f_favail</span></code>, <code class="xref py py-attr docutils literal notranslate"><span class="pre">f_flag</span></code>, <code class="xref py py-attr docutils literal notranslate"><span class="pre">f_namemax</span></code>, <code class="xref py py-attr docutils literal notranslate"><span class="pre">f_fsid</span></code>。</p>
<p>为 <code class="xref py py-attr docutils literal notranslate"><span class="pre">f_flag</span></code> 属性位定义了两个模块级常量：如果存在 <code class="xref py py-const docutils literal notranslate"><span class="pre">ST_RDONLY</span></code> 位，则文件系统以只读挂载；如果存在 <code class="xref py py-const docutils literal notranslate"><span class="pre">ST_NOSUID</span></code> 位，则文件系统禁用或不支持 setuid/setgid 位。</p>
<p>为基于 GNU/glibc 的系统还定义了额外的模块级常量。它们是 <code class="xref py py-const docutils literal notranslate"><span class="pre">ST_NODEV</span></code> （禁止访问设备专用文件），<code class="xref py py-const docutils literal notranslate"><span class="pre">ST_NOEXEC</span></code> （禁止执行程序），<code class="xref py py-const docutils literal notranslate"><span class="pre">ST_SYNCHRONOUS</span></code> （写入后立即同步），<code class="xref py py-const docutils literal notranslate"><span class="pre">ST_MANDLOCK</span></code> （允许文件系统上的强制锁定），<code class="xref py py-const docutils literal notranslate"><span class="pre">ST_WRITE</span></code> （写入文件/目录/符号链接），<code class="xref py py-const docutils literal notranslate"><span class="pre">ST_APPEND</span></code> （仅追加文件），<code class="xref py py-const docutils literal notranslate"><span class="pre">ST_IMMUTABLE</span></code> （不可变文件），<code class="xref py py-const docutils literal notranslate"><span class="pre">ST_NOATIME</span></code> （不更新访问时间），<code class="xref py py-const docutils literal notranslate"><span class="pre">ST_NODIRATIME</span></code> （不更新目录访问时间），<code class="xref py py-const docutils literal notranslate"><span class="pre">ST_RELATIME</span></code> （相对于 mtime/ctime 更新访问时间）。</p>
<p>本函数支持 <a class="reference internal" href="#path-fd"><span class="std std-ref">指定文件描述符为参数</span></a>。</p>
<p class="availability"><a class="reference internal" href="intro.html#availability"><span class="std std-ref">可用性</span></a>: Unix。</p>
<div class="versionchanged">
<p><span class="versionmodified changed">在 3.2 版更改: </span>添加了 <code class="xref py py-const docutils literal notranslate"><span class="pre">ST_RDONLY</span></code> 和 <code class="xref py py-const docutils literal notranslate"><span class="pre">ST_NOSUID</span></code> 常量。</p>
</div>
<div class="versionadded">
<p><span class="versionmodified added">3.3 新版功能: </span>新增支持将 <em>path</em> 参数指定为打开的文件描述符。</p>
</div>
<div class="versionchanged">
<p><span class="versionmodified changed">在 3.4 版更改: </span>添加了 <code class="xref py py-const docutils literal notranslate"><span class="pre">ST_NODEV</span></code>、<code class="xref py py-const docutils literal notranslate"><span class="pre">ST_NOEXEC</span></code>、<code class="xref py py-const docutils literal notranslate"><span class="pre">ST_SYNCHRONOUS</span></code>、<code class="xref py py-const docutils literal notranslate"><span class="pre">ST_MANDLOCK</span></code>、<code class="xref py py-const docutils literal notranslate"><span class="pre">ST_WRITE</span></code>、<code class="xref py py-const docutils literal notranslate"><span class="pre">ST_APPEND</span></code>、<code class="xref py py-const docutils literal notranslate"><span class="pre">ST_IMMUTABLE</span></code>、<code class="xref py py-const docutils literal notranslate"><span class="pre">ST_NOATIME</span></code>、<code class="xref py py-const docutils literal notranslate"><span class="pre">ST_NODIRATIME</span></code> 和 <code class="xref py py-const docutils literal notranslate"><span class="pre">ST_RELATIME</span></code> 常量。</p>
</div>
<div class="versionchanged">
<p><span class="versionmodified changed">在 3.6 版更改: </span>接受一个 <a class="reference internal" href="../glossary.html#term-path-like-object"><span class="xref std std-term">path-like object</span></a>。</p>
</div>
<div class="versionadded">
<p><span class="versionmodified added">3.7 新版功能: </span>添加了 <code class="xref py py-attr docutils literal notranslate"><span class="pre">f_fsid</span></code>。</p>
</div>
</dd></dl>

<dl class="py data">
<dt id="os.supports_dir_fd">
<code class="sig-prename descclassname">os.</code><code class="sig-name descname">supports_dir_fd</code><a class="headerlink" href="#os.supports_dir_fd" title="永久链接至目标">¶</a></dt>
<dd><p>一个 <a class="reference internal" href="stdtypes.html#set" title="set"><code class="xref py py-class docutils literal notranslate"><span class="pre">set</span></code></a> 对象，指示 <a class="reference internal" href="#module-os" title="os: Miscellaneous operating system interfaces."><code class="xref py py-mod docutils literal notranslate"><span class="pre">os</span></code></a> 模块中的哪些函数接受一个打开的文件描述符作为 <em>dir_fd</em> 参数。不同平台提供的功能不同，且 Python 用于实现 <em>dir_fd</em> 参数的底层函数并非在 Python 支持的所有平台上都可用。考虑到一致性，支持 <em>dir_fd</em> 的函数始终允许指定描述符，但如果在底层不支持时调用了该函数，则会抛出异常。（在所有平台上始终支持将 <em>dir_fd</em> 指定为 <code class="docutils literal notranslate"><span class="pre">None</span></code>。）</p>
<p>要检查某个函数是否接受打开的文件描述符作为 <em>dir_fd</em> 参数，请在 <code class="docutils literal notranslate"><span class="pre">supports_dir_fd</span></code> 前使用 <code class="docutils literal notranslate"><span class="pre">in</span></code> 运算符。例如，如果 <a class="reference internal" href="#os.stat" title="os.stat"><code class="xref py py-func docutils literal notranslate"><span class="pre">os.stat()</span></code></a> 在当前平台上接受打开的文件描述符作为 <em>dir_fd</em> 参数，则此表达式的计算结果为 <code class="docutils literal notranslate"><span class="pre">True</span></code>:</p>
<div class="highlight-python3 notranslate"><div class="highlight"><pre><span></span><span class="n">os</span><span class="o">.</span><span class="n">stat</span> <span class="ow">in</span> <span class="n">os</span><span class="o">.</span><span class="n">supports_dir_fd</span>
</pre></div>
</div>
<p>目前 <em>dir_fd</em> 参数仅在 Unix 平台上有效，在 Windows 上均无效。</p>
<div class="versionadded">
<p><span class="versionmodified added">3.3 新版功能.</span></p>
</div>
</dd></dl>

<dl class="py data">
<dt id="os.supports_effective_ids">
<code class="sig-prename descclassname">os.</code><code class="sig-name descname">supports_effective_ids</code><a class="headerlink" href="#os.supports_effective_ids" title="永久链接至目标">¶</a></dt>
<dd><p>一个 <a class="reference internal" href="stdtypes.html#set" title="set"><code class="xref py py-class docutils literal notranslate"><span class="pre">set</span></code></a> 对象，指示 <a class="reference internal" href="#os.access" title="os.access"><code class="xref py py-func docutils literal notranslate"><span class="pre">os.access()</span></code></a> 是否允许在当前平台上将其 <em>effective_ids</em> 参数指定为 <code class="docutils literal notranslate"><span class="pre">True</span></code>。（所有平台都支持将 <em>effective_ids</em> 指定为 <code class="docutils literal notranslate"><span class="pre">False</span></code>。）如果当前平台支持，则集合将包含 <a class="reference internal" href="#os.access" title="os.access"><code class="xref py py-func docutils literal notranslate"><span class="pre">os.access()</span></code></a>，否则集合为空。</p>
<p>如果当前平台上的 <a class="reference internal" href="#os.access" title="os.access"><code class="xref py py-func docutils literal notranslate"><span class="pre">os.access()</span></code></a> 支持 <code class="docutils literal notranslate"><span class="pre">effective_ids=True</span></code>，则此表达式的计算结果为 <code class="docutils literal notranslate"><span class="pre">True</span></code>:</p>
<div class="highlight-python3 notranslate"><div class="highlight"><pre><span></span><span class="n">os</span><span class="o">.</span><span class="n">access</span> <span class="ow">in</span> <span class="n">os</span><span class="o">.</span><span class="n">supports_effective_ids</span>
</pre></div>
</div>
<p>目前仅 Unix 平台支持 <em>effective_ids</em>，Windows 不支持。</p>
<div class="versionadded">
<p><span class="versionmodified added">3.3 新版功能.</span></p>
</div>
</dd></dl>

<dl class="py data">
<dt id="os.supports_fd">
<code class="sig-prename descclassname">os.</code><code class="sig-name descname">supports_fd</code><a class="headerlink" href="#os.supports_fd" title="永久链接至目标">¶</a></dt>
<dd><p>一个 <a class="reference internal" href="stdtypes.html#set" title="set"><code class="xref py py-class docutils literal notranslate"><span class="pre">set</span></code></a> 对象，指示在当前平台上 <a class="reference internal" href="#module-os" title="os: Miscellaneous operating system interfaces."><code class="xref py py-mod docutils literal notranslate"><span class="pre">os</span></code></a> 模块中的哪些函数接受一个打开的文件描述符作为 <em>path</em> 参数。不同平台提供的功能不同，且 Python 所使用到的底层函数（用于实现接受描述符作为 <em>path</em>）并非在 Python 支持的所有平台上都可用。</p>
<p>要判断某个函数是否接受打开的文件描述符作为 <em>path</em> 参数，请在 <code class="docutils literal notranslate"><span class="pre">supports_fd</span></code> 前使用 <code class="docutils literal notranslate"><span class="pre">in</span></code> 运算符。例如，如果 <a class="reference internal" href="#os.chdir" title="os.chdir"><code class="xref py py-func docutils literal notranslate"><span class="pre">os.chdir()</span></code></a> 在当前平台上接受打开的文件描述符作为 <em>path</em> 参数，则此表达式的计算结果为 <code class="docutils literal notranslate"><span class="pre">True</span></code>:</p>
<div class="highlight-python3 notranslate"><div class="highlight"><pre><span></span><span class="n">os</span><span class="o">.</span><span class="n">chdir</span> <span class="ow">in</span> <span class="n">os</span><span class="o">.</span><span class="n">supports_fd</span>
</pre></div>
</div>
<div class="versionadded">
<p><span class="versionmodified added">3.3 新版功能.</span></p>
</div>
</dd></dl>

<dl class="py data">
<dt id="os.supports_follow_symlinks">
<code class="sig-prename descclassname">os.</code><code class="sig-name descname">supports_follow_symlinks</code><a class="headerlink" href="#os.supports_follow_symlinks" title="永久链接至目标">¶</a></dt>
<dd><p>一个 <a class="reference internal" href="stdtypes.html#set" title="set"><code class="xref py py-class docutils literal notranslate"><span class="pre">set</span></code></a> 对象，指示在当前平台上 <a class="reference internal" href="#module-os" title="os: Miscellaneous operating system interfaces."><code class="xref py py-mod docutils literal notranslate"><span class="pre">os</span></code></a> 模块中的哪些函数的 <em>follow_symlinks</em> 参数可指定为 <code class="docutils literal notranslate"><span class="pre">False</span></code>。不同平台提供的功能不同，且 Python 用于实现 <em>follow_symlinks</em> 的底层函数并非在 Python 支持的所有平台上都可用。考虑到一致性，支持 <em>follow_symlinks</em> 的函数始终允许将其指定为 <code class="docutils literal notranslate"><span class="pre">False</span></code>，但如果在底层不支持时调用了该函数，则会抛出异常。（在所有平台上始终支持将 <em>follow_symlinks</em> 指定为 <code class="docutils literal notranslate"><span class="pre">True</span></code>。）</p>
<p>要检查某个函数的 <em>follow_symlinks</em> 参数是否可以指定为 <code class="docutils literal notranslate"><span class="pre">False</span></code>，请在 <code class="docutils literal notranslate"><span class="pre">supports_follow_symlinks</span></code> 前使用 <code class="docutils literal notranslate"><span class="pre">in</span></code> 运算符。例如，如果在当前平台上调用 <a class="reference internal" href="#os.stat" title="os.stat"><code class="xref py py-func docutils literal notranslate"><span class="pre">os.stat()</span></code></a> 时可以指定 <code class="docutils literal notranslate"><span class="pre">follow_symlinks=False</span></code>，则此表达式的计算结果为 <code class="docutils literal notranslate"><span class="pre">True</span></code>:</p>
<div class="highlight-python3 notranslate"><div class="highlight"><pre><span></span><span class="n">os</span><span class="o">.</span><span class="n">stat</span> <span class="ow">in</span> <span class="n">os</span><span class="o">.</span><span class="n">supports_follow_symlinks</span>
</pre></div>
</div>
<div class="versionadded">
<p><span class="versionmodified added">3.3 新版功能.</span></p>
</div>
</dd></dl>

<dl class="py function">
<dt id="os.symlink">
<code class="sig-prename descclassname">os.</code><code class="sig-name descname">symlink</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">src</span></em>, <em class="sig-param"><span class="n">dst</span></em>, <em class="sig-param"><span class="n">target_is_directory</span><span class="o">=</span><span class="default_value">False</span></em>, <em class="sig-param"><span class="o">*</span></em>, <em class="sig-param"><span class="n">dir_fd</span><span class="o">=</span><span class="default_value">None</span></em><span class="sig-paren">)</span><a class="headerlink" href="#os.symlink" title="永久链接至目标">¶</a></dt>
<dd><p>创建一个指向 <em>src</em> 的符号链接，名为 <em>dst</em>。</p>
<p>在 Windows 上，符号链接可以表示文件或目录两种类型，并且不会动态改变类型。如果目标存在，则新建链接的类型将与目标一致。否则，如果 <em>target_is_directory</em> 为 <code class="docutils literal notranslate"><span class="pre">True</span></code>，则符号链接将创建为目录链接，为 <code class="docutils literal notranslate"><span class="pre">False</span></code> （默认）将创建为文件链接。在非 Windows 平台上，<em>target_is_directory</em> 被忽略。</p>
<p>本函数支持 <a class="reference internal" href="#dir-fd"><span class="std std-ref">基于目录描述符的相对路径</span></a>。</p>
<div class="admonition note">
<p class="admonition-title">注解</p>
<p>在 Windows 10 或更高版本上，如果启用了开发人员模式，非特权帐户可以创建符号链接。如果开发人员模式不可用/未启用，则需要 <em>SeCreateSymbolicLinkPrivilege</em> 权限，或者该进程必须以管理员身份运行。</p>
<p>当本函数由非特权账户调用时，抛出 <a class="reference internal" href="exceptions.html#OSError" title="OSError"><code class="xref py py-exc docutils literal notranslate"><span class="pre">OSError</span></code></a> 异常。</p>
</div>
<p class="audit-hook">引发一个 <a class="reference internal" href="sys.html#auditing"><span class="std std-ref">审计事件</span></a> <code class="docutils literal notranslate"><span class="pre">os.symlink</span></code>，附带参数 <code class="docutils literal notranslate"><span class="pre">src</span></code>、<code class="docutils literal notranslate"><span class="pre">dst</span></code>、<code class="docutils literal notranslate"><span class="pre">dir_fd</span></code>。</p>
<p class="availability"><a class="reference internal" href="intro.html#availability"><span class="std std-ref">可用性</span></a>: Unix, Windows。</p>
<div class="versionchanged">
<p><span class="versionmodified changed">在 3.2 版更改: </span>添加对 Windows 6.0 (Vista) 符号链接的支持。</p>
</div>
<div class="versionadded">
<p><span class="versionmodified added">3.3 新版功能: </span>添加了 <em>dir_fd</em> 参数，现在在非 Windows 平台上允许 <em>target_is_directory</em> 参数。</p>
</div>
<div class="versionchanged">
<p><span class="versionmodified changed">在 3.6 版更改: </span>接受一个 <a class="reference internal" href="../glossary.html#term-path-like-object"><span class="xref std std-term">类路径对象</span></a> 作为 <em>src</em> 和 <em>dst</em>。</p>
</div>
<div class="versionchanged">
<p><span class="versionmodified changed">在 3.8 版更改: </span>针对启用了开发人员模式的 Windows，添加了非特权账户创建符号链接的支持。</p>
</div>
</dd></dl>

<dl class="py function">
<dt id="os.sync">
<code class="sig-prename descclassname">os.</code><code class="sig-name descname">sync</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#os.sync" title="永久链接至目标">¶</a></dt>
<dd><p>强制将所有内容写入磁盘。</p>
<p class="availability"><a class="reference internal" href="intro.html#availability"><span class="std std-ref">可用性</span></a>: Unix。</p>
<div class="versionadded">
<p><span class="versionmodified added">3.3 新版功能.</span></p>
</div>
</dd></dl>

<dl class="py function">
<dt id="os.truncate">
<code class="sig-prename descclassname">os.</code><code class="sig-name descname">truncate</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">path</span></em>, <em class="sig-param"><span class="n">length</span></em><span class="sig-paren">)</span><a class="headerlink" href="#os.truncate" title="永久链接至目标">¶</a></dt>
<dd><p>截断 <em>path</em> 对应的文件，以使其最大为 <em>length</em> 字节。</p>
<p>本函数支持 <a class="reference internal" href="#path-fd"><span class="std std-ref">指定文件描述符为参数</span></a>。</p>
<p class="audit-hook">引发一个 <a class="reference internal" href="sys.html#auditing"><span class="std std-ref">审计事件</span></a> <code class="docutils literal notranslate"><span class="pre">os.truncate</span></code>，附带参数 <code class="docutils literal notranslate"><span class="pre">path</span></code>, <code class="docutils literal notranslate"><span class="pre">length</span></code>。</p>
<p class="availability"><a class="reference internal" href="intro.html#availability"><span class="std std-ref">可用性</span></a>: Unix, Windows。</p>
<div class="versionadded">
<p><span class="versionmodified added">3.3 新版功能.</span></p>
</div>
<div class="versionchanged">
<p><span class="versionmodified changed">在 3.5 版更改: </span>添加了 Windows 支持</p>
</div>
<div class="versionchanged">
<p><span class="versionmodified changed">在 3.6 版更改: </span>接受一个 <a class="reference internal" href="../glossary.html#term-path-like-object"><span class="xref std std-term">path-like object</span></a>。</p>
</div>
</dd></dl>

<dl class="py function">
<dt id="os.unlink">
<code class="sig-prename descclassname">os.</code><code class="sig-name descname">unlink</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">path</span></em>, <em class="sig-param"><span class="o">*</span></em>, <em class="sig-param"><span class="n">dir_fd</span><span class="o">=</span><span class="default_value">None</span></em><span class="sig-paren">)</span><a class="headerlink" href="#os.unlink" title="永久链接至目标">¶</a></dt>
<dd><p>移除（删除）文件 <em>path</em>。该函数在语义上与 <a class="reference internal" href="#os.remove" title="os.remove"><code class="xref py py-func docutils literal notranslate"><span class="pre">remove()</span></code></a> 相同，<code class="docutils literal notranslate"><span class="pre">unlink</span></code> 是其传统的 Unix 名称。请参阅 <a class="reference internal" href="#os.remove" title="os.remove"><code class="xref py py-func docutils literal notranslate"><span class="pre">remove()</span></code></a> 的文档以获取更多信息。</p>
<p class="audit-hook">引发一个 <a class="reference internal" href="sys.html#auditing"><span class="std std-ref">审计事件</span></a> <code class="docutils literal notranslate"><span class="pre">os.remove</span></code>，附带参数 <code class="docutils literal notranslate"><span class="pre">path</span></code>、<code class="docutils literal notranslate"><span class="pre">dir_fd</span></code>。</p>
<div class="versionadded">
<p><span class="versionmodified added">3.3 新版功能: </span><em>dir_fd</em> 参数。</p>
</div>
<div class="versionchanged">
<p><span class="versionmodified changed">在 3.6 版更改: </span>接受一个 <a class="reference internal" href="../glossary.html#term-path-like-object"><span class="xref std std-term">path-like object</span></a>。</p>
</div>
</dd></dl>

<dl class="py function">
<dt id="os.utime">
<code class="sig-prename descclassname">os.</code><code class="sig-name descname">utime</code><span class="sig-paren">(</span><em class="sig-param">path</em>, <em class="sig-param">times=None</em>, <em class="sig-param">*</em>, <span class="optional">[</span><em class="sig-param">ns</em>, <span class="optional">]</span><em class="sig-param">dir_fd=None</em>, <em class="sig-param">follow_symlinks=True</em><span class="sig-paren">)</span><a class="headerlink" href="#os.utime" title="永久链接至目标">¶</a></dt>
<dd><p>设置文件 <em>path</em> 的访问时间和修改时间。</p>
<p><a class="reference internal" href="#os.utime" title="os.utime"><code class="xref py py-func docutils literal notranslate"><span class="pre">utime()</span></code></a> 有 <em>times</em> 和 <em>ns</em> 两个可选参数，它们指定了设置给 <em>path</em> 的时间，用法如下：</p>
<ul class="simple">
<li><p>如果指定 <em>ns</em>，它必须是一个 <code class="docutils literal notranslate"><span class="pre">(atime_ns,</span> <span class="pre">mtime_ns)</span></code> 形式的二元组，其中每个成员都是一个表示纳秒的整数。</p></li>
<li><p>如果 <em>times</em> 不为 <code class="docutils literal notranslate"><span class="pre">None</span></code>，则它必须是 <code class="docutils literal notranslate"><span class="pre">(atime,</span> <span class="pre">mtime)</span></code> 形式的二元组，其中每个成员都是一个表示秒的 int 或 float。</p></li>
<li><p>如果 <em>times</em> 为 <code class="docutils literal notranslate"><span class="pre">None</span></code> 且未指定 <em>ns</em>，则相当于指定 <code class="docutils literal notranslate"><span class="pre">ns=(atime_ns,</span> <span class="pre">mtime_ns)</span></code>，其中两个时间均为当前时间。</p></li>
</ul>
<p>同时为 <em>times</em> 和 <em>ns</em> 指定元组会出错。</p>
<p>注意，根据操作系统记录访问时间和修改时间的分辨率，后续的 <a class="reference internal" href="#os.stat" title="os.stat"><code class="xref py py-func docutils literal notranslate"><span class="pre">stat()</span></code></a> 调用可能不会返回此处设置的确切时间。请参阅 <a class="reference internal" href="#os.stat" title="os.stat"><code class="xref py py-func docutils literal notranslate"><span class="pre">stat()</span></code></a>。保留精确时间的最佳方法是使用 <a class="reference internal" href="#os.stat" title="os.stat"><code class="xref py py-func docutils literal notranslate"><span class="pre">os.stat()</span></code></a> 结果对象中的 <em>st_atime_ns</em> 和 <em>st_mtime_ns</em> 字段，并将 <em>ns</em> 参数设置为 <cite>utime</cite>。</p>
<p>本函数支持 <a class="reference internal" href="#path-fd"><span class="std std-ref">指定文件描述符</span></a>、<a class="reference internal" href="#dir-fd"><span class="std std-ref">指定基于目录描述符的相对路径</span></a> 和 <a class="reference internal" href="#follow-symlinks"><span class="std std-ref">不跟踪符号链接</span></a>。</p>
<p class="audit-hook">引发一个 <a class="reference internal" href="sys.html#auditing"><span class="std std-ref">审计事件</span></a> <code class="docutils literal notranslate"><span class="pre">os.utime</span></code>，附带参数 <code class="docutils literal notranslate"><span class="pre">path</span></code>、<code class="docutils literal notranslate"><span class="pre">times</span></code>、<code class="docutils literal notranslate"><span class="pre">ns</span></code>、<code class="docutils literal notranslate"><span class="pre">dir_fd</span></code>。</p>
<div class="versionadded">
<p><span class="versionmodified added">3.3 新版功能: </span>新增支持将 <em>path</em> 参数指定为打开的文件描述符，以及支持 <em>dir_fd</em>、<em>follow_symlinks</em> 和 <em>ns</em> 参数。</p>
</div>
<div class="versionchanged">
<p><span class="versionmodified changed">在 3.6 版更改: </span>接受一个 <a class="reference internal" href="../glossary.html#term-path-like-object"><span class="xref std std-term">path-like object</span></a>。</p>
</div>
</dd></dl>

<dl class="py function">
<dt id="os.walk">
<code class="sig-prename descclassname">os.</code><code class="sig-name descname">walk</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">top</span></em>, <em class="sig-param"><span class="n">topdown</span><span class="o">=</span><span class="default_value">True</span></em>, <em class="sig-param"><span class="n">onerror</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">followlinks</span><span class="o">=</span><span class="default_value">False</span></em><span class="sig-paren">)</span><a class="headerlink" href="#os.walk" title="永久链接至目标">¶</a></dt>
<dd><p id="index-30">生成目录树中的文件名，方式是按上-&gt;下或下-&gt;上顺序浏览目录树。对于以 <em>top</em> 为根的目录树中的每个目录（包括 <em>top</em> 本身），它都会生成一个三元组 <code class="docutils literal notranslate"><span class="pre">(dirpath,</span> <span class="pre">dirnames,</span> <span class="pre">filenames)</span></code>。</p>
<p><em>dirpath</em> 是表示目录路径的字符串。 <em>dirnames</em> 是 <em>dirpath</em> 中子目录名称组成的列表 (excluding <code class="docutils literal notranslate"><span class="pre">'.'</span></code> and <code class="docutils literal notranslate"><span class="pre">'..'</span></code>)。 <em>filenames</em> 是 <em>dirpath</em> 中非目录文件名称组成的列表。 请注意列表中的名称不带路径部分。 要获取 <em>dirpath</em> 中文件或目录的完整路径（以 <em>top</em> 打头），请执行 <code class="docutils literal notranslate"><span class="pre">os.path.join(dirpath,</span> <span class="pre">name)</span></code>。 列表是否排序取决于具体文件系统。 如果有文件或列表生成期间被移除或添加到 <em>dirpath</em> 目录中，是否要包括该文件的名称并没有规定。</p>
<p>如果可选参数 <em>topdown</em> 为 <code class="docutils literal notranslate"><span class="pre">True</span></code> 或未指定，则在所有子目录的三元组之前生成父目录的三元组（目录是自上而下生成的）。如果 <em>topdown</em> 为 <code class="docutils literal notranslate"><span class="pre">False</span></code>，则在所有子目录的三元组生成之后再生成父目录的三元组（目录是自下而上生成的）。无论 <em>topdown</em> 为何值，在生成目录及其子目录的元组之前，都将检索全部子目录列表。</p>
<p>当 <em>topdown</em> 为 <code class="docutils literal notranslate"><span class="pre">True</span></code> 时，调用者可以就地修改 <em>dirnames</em> 列表（也许用到了 <a class="reference internal" href="../reference/simple_stmts.html#del"><code class="xref std std-keyword docutils literal notranslate"><span class="pre">del</span></code></a> 或切片），而 <a class="reference internal" href="#os.walk" title="os.walk"><code class="xref py py-func docutils literal notranslate"><span class="pre">walk()</span></code></a> 将仅仅递归到仍保留在 <em>dirnames</em> 中的子目录内。这可用于减少搜索、加入特定的访问顺序，甚至可在继续 <a class="reference internal" href="#os.walk" title="os.walk"><code class="xref py py-func docutils literal notranslate"><span class="pre">walk()</span></code></a> 之前告知 <a class="reference internal" href="#os.walk" title="os.walk"><code class="xref py py-func docutils literal notranslate"><span class="pre">walk()</span></code></a> 由调用者新建或重命名的目录的信息。当 <em>topdown</em> 为 <code class="docutils literal notranslate"><span class="pre">False</span></code> 时，修改 <em>dirnames</em> 对 walk 的行为没有影响，因为在自下而上模式中，<em>dirnames</em> 中的目录是在 <em>dirpath</em> 本身之前生成的。</p>
<p>默认将忽略 <a class="reference internal" href="#os.scandir" title="os.scandir"><code class="xref py py-func docutils literal notranslate"><span class="pre">scandir()</span></code></a> 调用中的错误。如果指定了可选参数 <em>onerror</em>，它应该是一个函数。出错时它会被调用，参数是一个 <a class="reference internal" href="exceptions.html#OSError" title="OSError"><code class="xref py py-exc docutils literal notranslate"><span class="pre">OSError</span></code></a> 实例。它可以报告错误然后继续遍历，或者抛出异常然后中止遍历。注意，可以从异常对象的 <code class="docutils literal notranslate"><span class="pre">filename</span></code> 属性中获取出错的文件名。</p>
<p><a class="reference internal" href="#os.walk" title="os.walk"><code class="xref py py-func docutils literal notranslate"><span class="pre">walk()</span></code></a> 默认不会递归进指向目录的符号链接。可以在支持符号链接的系统上将 <em>followlinks</em> 设置为 <code class="docutils literal notranslate"><span class="pre">True</span></code>，以访问符号链接指向的目录。</p>
<div class="admonition note">
<p class="admonition-title">注解</p>
<p>注意，如果链接指向自身的父目录，则将 <em>followlinks</em> 设置为 <code class="docutils literal notranslate"><span class="pre">True</span></code> 可能导致无限递归。<a class="reference internal" href="#os.walk" title="os.walk"><code class="xref py py-func docutils literal notranslate"><span class="pre">walk()</span></code></a> 不会记录它已经访问过的目录。</p>
</div>
<div class="admonition note">
<p class="admonition-title">注解</p>
<p>如果传入的是相对路径，请不要在恢复 <a class="reference internal" href="#os.walk" title="os.walk"><code class="xref py py-func docutils literal notranslate"><span class="pre">walk()</span></code></a> 之间更改当前工作目录。<a class="reference internal" href="#os.walk" title="os.walk"><code class="xref py py-func docutils literal notranslate"><span class="pre">walk()</span></code></a> 不会更改当前目录，并假定其调用者也不会更改当前目录。</p>
</div>
<p>下面的示例遍历起始目录内所有子目录，打印每个目录内的文件占用的字节数，CVS 子目录不会被遍历:</p>
<div class="highlight-python3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">os</span>
<span class="kn">from</span> <span class="nn">os.path</span> <span class="kn">import</span> <span class="n">join</span><span class="p">,</span> <span class="n">getsize</span>
<span class="k">for</span> <span class="n">root</span><span class="p">,</span> <span class="n">dirs</span><span class="p">,</span> <span class="n">files</span> <span class="ow">in</span> <span class="n">os</span><span class="o">.</span><span class="n">walk</span><span class="p">(</span><span class="s1">&#39;python/Lib/email&#39;</span><span class="p">):</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">root</span><span class="p">,</span> <span class="s2">&quot;consumes&quot;</span><span class="p">,</span> <span class="n">end</span><span class="o">=</span><span class="s2">&quot; &quot;</span><span class="p">)</span>
    <span class="nb">print</span><span class="p">(</span><span class="nb">sum</span><span class="p">(</span><span class="n">getsize</span><span class="p">(</span><span class="n">join</span><span class="p">(</span><span class="n">root</span><span class="p">,</span> <span class="n">name</span><span class="p">))</span> <span class="k">for</span> <span class="n">name</span> <span class="ow">in</span> <span class="n">files</span><span class="p">),</span> <span class="n">end</span><span class="o">=</span><span class="s2">&quot; &quot;</span><span class="p">)</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;bytes in&quot;</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="n">files</span><span class="p">),</span> <span class="s2">&quot;non-directory files&quot;</span><span class="p">)</span>
    <span class="k">if</span> <span class="s1">&#39;CVS&#39;</span> <span class="ow">in</span> <span class="n">dirs</span><span class="p">:</span>
        <span class="n">dirs</span><span class="o">.</span><span class="n">remove</span><span class="p">(</span><span class="s1">&#39;CVS&#39;</span><span class="p">)</span>  <span class="c1"># don&#39;t visit CVS directories</span>
</pre></div>
</div>
<p>在下一个示例（<a class="reference internal" href="shutil.html#shutil.rmtree" title="shutil.rmtree"><code class="xref py py-func docutils literal notranslate"><span class="pre">shutil.rmtree()</span></code></a> 的简单实现）中，必须使树自下而上遍历，因为 <a class="reference internal" href="#os.rmdir" title="os.rmdir"><code class="xref py py-func docutils literal notranslate"><span class="pre">rmdir()</span></code></a> 只允许在目录为空时删除目录:</p>
<div class="highlight-python3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Delete everything reachable from the directory named in &quot;top&quot;,</span>
<span class="c1"># assuming there are no symbolic links.</span>
<span class="c1"># CAUTION:  This is dangerous!  For example, if top == &#39;/&#39;, it</span>
<span class="c1"># could delete all your disk files.</span>
<span class="kn">import</span> <span class="nn">os</span>
<span class="k">for</span> <span class="n">root</span><span class="p">,</span> <span class="n">dirs</span><span class="p">,</span> <span class="n">files</span> <span class="ow">in</span> <span class="n">os</span><span class="o">.</span><span class="n">walk</span><span class="p">(</span><span class="n">top</span><span class="p">,</span> <span class="n">topdown</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
    <span class="k">for</span> <span class="n">name</span> <span class="ow">in</span> <span class="n">files</span><span class="p">:</span>
        <span class="n">os</span><span class="o">.</span><span class="n">remove</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">root</span><span class="p">,</span> <span class="n">name</span><span class="p">))</span>
    <span class="k">for</span> <span class="n">name</span> <span class="ow">in</span> <span class="n">dirs</span><span class="p">:</span>
        <span class="n">os</span><span class="o">.</span><span class="n">rmdir</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">root</span><span class="p">,</span> <span class="n">name</span><span class="p">))</span>
</pre></div>
</div>
<p class="audit-hook">引发一个 <a class="reference internal" href="sys.html#auditing"><span class="std std-ref">审计事件</span></a> <code class="docutils literal notranslate"><span class="pre">os.walk</span></code>，附带参数 <code class="docutils literal notranslate"><span class="pre">top</span></code>, <code class="docutils literal notranslate"><span class="pre">topdown</span></code>, <code class="docutils literal notranslate"><span class="pre">onerror</span></code>, <code class="docutils literal notranslate"><span class="pre">followlinks</span></code>。</p>
<div class="versionchanged">
<p><span class="versionmodified changed">在 3.5 版更改: </span>现在，本函数调用的是 <a class="reference internal" href="#os.scandir" title="os.scandir"><code class="xref py py-func docutils literal notranslate"><span class="pre">os.scandir()</span></code></a> 而不是 <a class="reference internal" href="#os.listdir" title="os.listdir"><code class="xref py py-func docutils literal notranslate"><span class="pre">os.listdir()</span></code></a>，从而减少了调用 <a class="reference internal" href="#os.stat" title="os.stat"><code class="xref py py-func docutils literal notranslate"><span class="pre">os.stat()</span></code></a> 的次数而变得更快。</p>
</div>
<div class="versionchanged">
<p><span class="versionmodified changed">在 3.6 版更改: </span>接受一个 <a class="reference internal" href="../glossary.html#term-path-like-object"><span class="xref std std-term">path-like object</span></a>。</p>
</div>
</dd></dl>

<dl class="py function">
<dt id="os.fwalk">
<code class="sig-prename descclassname">os.</code><code class="sig-name descname">fwalk</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">top</span><span class="o">=</span><span class="default_value">'.'</span></em>, <em class="sig-param"><span class="n">topdown</span><span class="o">=</span><span class="default_value">True</span></em>, <em class="sig-param"><span class="n">onerror</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="o">*</span></em>, <em class="sig-param"><span class="n">follow_symlinks</span><span class="o">=</span><span class="default_value">False</span></em>, <em class="sig-param"><span class="n">dir_fd</span><span class="o">=</span><span class="default_value">None</span></em><span class="sig-paren">)</span><a class="headerlink" href="#os.fwalk" title="永久链接至目标">¶</a></dt>
<dd><p id="index-31">本方法的行为与 <a class="reference internal" href="#os.walk" title="os.walk"><code class="xref py py-func docutils literal notranslate"><span class="pre">walk()</span></code></a> 完全一样，除了它产生的是 4 元组 <code class="docutils literal notranslate"><span class="pre">(dirpath,</span> <span class="pre">dirnames,</span> <span class="pre">filenames,</span> <span class="pre">dirfd)</span></code>，并且它支持 <code class="docutils literal notranslate"><span class="pre">dir_fd</span></code>。</p>
<p><em>dirpath</em>、<em>dirnames</em> 和 <em>filenames</em> 与 <a class="reference internal" href="#os.walk" title="os.walk"><code class="xref py py-func docutils literal notranslate"><span class="pre">walk()</span></code></a> 输出的相同，<em>dirfd</em> 是指向目录 <em>dirpath</em> 的文件描述符。</p>
<p>本函数始终支持 <a class="reference internal" href="#dir-fd"><span class="std std-ref">基于目录描述符的相对路径</span></a> 和 <a class="reference internal" href="#follow-symlinks"><span class="std std-ref">不跟踪符号链接</span></a>。但是请注意，与其他函数不同，<a class="reference internal" href="#os.fwalk" title="os.fwalk"><code class="xref py py-func docutils literal notranslate"><span class="pre">fwalk()</span></code></a> 的 <em>follow_symlinks</em> 的默认值为 <code class="docutils literal notranslate"><span class="pre">False</span></code>。</p>
<div class="admonition note">
<p class="admonition-title">注解</p>
<p>由于 <a class="reference internal" href="#os.fwalk" title="os.fwalk"><code class="xref py py-func docutils literal notranslate"><span class="pre">fwalk()</span></code></a> 会生成文件描述符，而它们仅在下一个迭代步骤前有效，因此如果要将描述符保留更久，则应复制它们（比如使用 <a class="reference internal" href="#os.dup" title="os.dup"><code class="xref py py-func docutils literal notranslate"><span class="pre">dup()</span></code></a>）。</p>
</div>
<p>下面的示例遍历起始目录内所有子目录，打印每个目录内的文件占用的字节数，CVS 子目录不会被遍历:</p>
<div class="highlight-python3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">os</span>
<span class="k">for</span> <span class="n">root</span><span class="p">,</span> <span class="n">dirs</span><span class="p">,</span> <span class="n">files</span><span class="p">,</span> <span class="n">rootfd</span> <span class="ow">in</span> <span class="n">os</span><span class="o">.</span><span class="n">fwalk</span><span class="p">(</span><span class="s1">&#39;python/Lib/email&#39;</span><span class="p">):</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">root</span><span class="p">,</span> <span class="s2">&quot;consumes&quot;</span><span class="p">,</span> <span class="n">end</span><span class="o">=</span><span class="s2">&quot;&quot;</span><span class="p">)</span>
    <span class="nb">print</span><span class="p">(</span><span class="nb">sum</span><span class="p">([</span><span class="n">os</span><span class="o">.</span><span class="n">stat</span><span class="p">(</span><span class="n">name</span><span class="p">,</span> <span class="n">dir_fd</span><span class="o">=</span><span class="n">rootfd</span><span class="p">)</span><span class="o">.</span><span class="n">st_size</span> <span class="k">for</span> <span class="n">name</span> <span class="ow">in</span> <span class="n">files</span><span class="p">]),</span>
          <span class="n">end</span><span class="o">=</span><span class="s2">&quot;&quot;</span><span class="p">)</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;bytes in&quot;</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="n">files</span><span class="p">),</span> <span class="s2">&quot;non-directory files&quot;</span><span class="p">)</span>
    <span class="k">if</span> <span class="s1">&#39;CVS&#39;</span> <span class="ow">in</span> <span class="n">dirs</span><span class="p">:</span>
        <span class="n">dirs</span><span class="o">.</span><span class="n">remove</span><span class="p">(</span><span class="s1">&#39;CVS&#39;</span><span class="p">)</span>  <span class="c1"># don&#39;t visit CVS directories</span>
</pre></div>
</div>
<p>在下一个示例中，必须使树自下而上遍历，因为 <a class="reference internal" href="#os.rmdir" title="os.rmdir"><code class="xref py py-func docutils literal notranslate"><span class="pre">rmdir()</span></code></a> 只允许在目录为空时删除目录:</p>
<div class="highlight-python3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Delete everything reachable from the directory named in &quot;top&quot;,</span>
<span class="c1"># assuming there are no symbolic links.</span>
<span class="c1"># CAUTION:  This is dangerous!  For example, if top == &#39;/&#39;, it</span>
<span class="c1"># could delete all your disk files.</span>
<span class="kn">import</span> <span class="nn">os</span>
<span class="k">for</span> <span class="n">root</span><span class="p">,</span> <span class="n">dirs</span><span class="p">,</span> <span class="n">files</span><span class="p">,</span> <span class="n">rootfd</span> <span class="ow">in</span> <span class="n">os</span><span class="o">.</span><span class="n">fwalk</span><span class="p">(</span><span class="n">top</span><span class="p">,</span> <span class="n">topdown</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
    <span class="k">for</span> <span class="n">name</span> <span class="ow">in</span> <span class="n">files</span><span class="p">:</span>
        <span class="n">os</span><span class="o">.</span><span class="n">unlink</span><span class="p">(</span><span class="n">name</span><span class="p">,</span> <span class="n">dir_fd</span><span class="o">=</span><span class="n">rootfd</span><span class="p">)</span>
    <span class="k">for</span> <span class="n">name</span> <span class="ow">in</span> <span class="n">dirs</span><span class="p">:</span>
        <span class="n">os</span><span class="o">.</span><span class="n">rmdir</span><span class="p">(</span><span class="n">name</span><span class="p">,</span> <span class="n">dir_fd</span><span class="o">=</span><span class="n">rootfd</span><span class="p">)</span>
</pre></div>
</div>
<p class="audit-hook">引发一个 <a class="reference internal" href="sys.html#auditing"><span class="std std-ref">审计事件</span></a> <code class="docutils literal notranslate"><span class="pre">os.fwalk</span></code>，附带参数 <code class="docutils literal notranslate"><span class="pre">top</span></code>, <code class="docutils literal notranslate"><span class="pre">topdown</span></code>, <code class="docutils literal notranslate"><span class="pre">onerror</span></code>, <code class="docutils literal notranslate"><span class="pre">follow_symlinks</span></code>, <code class="docutils literal notranslate"><span class="pre">dir_fd</span></code>。</p>
<p class="availability"><a class="reference internal" href="intro.html#availability"><span class="std std-ref">可用性</span></a>: Unix。</p>
<div class="versionadded">
<p><span class="versionmodified added">3.3 新版功能.</span></p>
</div>
<div class="versionchanged">
<p><span class="versionmodified changed">在 3.6 版更改: </span>接受一个 <a class="reference internal" href="../glossary.html#term-path-like-object"><span class="xref std std-term">path-like object</span></a>。</p>
</div>
<div class="versionchanged">
<p><span class="versionmodified changed">在 3.7 版更改: </span>添加了对 <a class="reference internal" href="stdtypes.html#bytes" title="bytes"><code class="xref py py-class docutils literal notranslate"><span class="pre">bytes</span></code></a> 类型路径的支持。</p>
</div>
</dd></dl>

<dl class="py function">
<dt id="os.memfd_create">
<code class="sig-prename descclassname">os.</code><code class="sig-name descname">memfd_create</code><span class="sig-paren">(</span><em class="sig-param">name</em><span class="optional">[</span>, <em class="sig-param">flags=os.MFD_CLOEXEC</em><span class="optional">]</span><span class="sig-paren">)</span><a class="headerlink" href="#os.memfd_create" title="永久链接至目标">¶</a></dt>
<dd><p>创建一个匿名文件，返回指向该文件的文件描述符。<em>flags</em> 必须是系统上可用的 <code class="docutils literal notranslate"><span class="pre">os.MFD_*</span></code> 常量之一（或将它们按位“或”组合起来）。新文件描述符默认是 <a class="reference internal" href="#fd-inheritance"><span class="std std-ref">不可继承的</span></a>。</p>
<p><em>name</em> 提供的名称会被用作文件名，并且 <code class="docutils literal notranslate"><span class="pre">/proc/self/fd/</span></code> 目录中相应符号链接的目标将显示为该名称。显示的名称始终以 <code class="docutils literal notranslate"><span class="pre">memfd:</span></code> 为前缀，并且仅用于调试目的。名称不会影响文件描述符的行为，因此多个文件可以有相同的名称，不会有副作用。</p>
<p class="availability"><a class="reference internal" href="intro.html#availability"><span class="std std-ref">可用性</span></a>：Linux 3.17 或更高版本，且装有 glibc 2.27 或更高版本。</p>
<div class="versionadded">
<p><span class="versionmodified added">3.8 新版功能.</span></p>
</div>
</dd></dl>

<dl class="py data">
<dt id="os.MFD_CLOEXEC">
<code class="sig-prename descclassname">os.</code><code class="sig-name descname">MFD_CLOEXEC</code><a class="headerlink" href="#os.MFD_CLOEXEC" title="永久链接至目标">¶</a></dt>
<dt id="os.MFD_ALLOW_SEALING">
<code class="sig-prename descclassname">os.</code><code class="sig-name descname">MFD_ALLOW_SEALING</code><a class="headerlink" href="#os.MFD_ALLOW_SEALING" title="永久链接至目标">¶</a></dt>
<dt id="os.MFD_HUGETLB">
<code class="sig-prename descclassname">os.</code><code class="sig-name descname">MFD_HUGETLB</code><a class="headerlink" href="#os.MFD_HUGETLB" title="永久链接至目标">¶</a></dt>
<dt id="os.MFD_HUGE_SHIFT">
<code class="sig-prename descclassname">os.</code><code class="sig-name descname">MFD_HUGE_SHIFT</code><a class="headerlink" href="#os.MFD_HUGE_SHIFT" title="永久链接至目标">¶</a></dt>
<dt id="os.MFD_HUGE_MASK">
<code class="sig-prename descclassname">os.</code><code class="sig-name descname">MFD_HUGE_MASK</code><a class="headerlink" href="#os.MFD_HUGE_MASK" title="永久链接至目标">¶</a></dt>
<dt id="os.MFD_HUGE_64KB">
<code class="sig-prename descclassname">os.</code><code class="sig-name descname">MFD_HUGE_64KB</code><a class="headerlink" href="#os.MFD_HUGE_64KB" title="永久链接至目标">¶</a></dt>
<dt id="os.MFD_HUGE_512KB">
<code class="sig-prename descclassname">os.</code><code class="sig-name descname">MFD_HUGE_512KB</code><a class="headerlink" href="#os.MFD_HUGE_512KB" title="永久链接至目标">¶</a></dt>
<dt id="os.MFD_HUGE_1MB">
<code class="sig-prename descclassname">os.</code><code class="sig-name descname">MFD_HUGE_1MB</code><a class="headerlink" href="#os.MFD_HUGE_1MB" title="永久链接至目标">¶</a></dt>
<dt id="os.MFD_HUGE_2MB">
<code class="sig-prename descclassname">os.</code><code class="sig-name descname">MFD_HUGE_2MB</code><a class="headerlink" href="#os.MFD_HUGE_2MB" title="永久链接至目标">¶</a></dt>
<dt id="os.MFD_HUGE_8MB">
<code class="sig-prename descclassname">os.</code><code class="sig-name descname">MFD_HUGE_8MB</code><a class="headerlink" href="#os.MFD_HUGE_8MB" title="永久链接至目标">¶</a></dt>
<dt id="os.MFD_HUGE_16MB">
<code class="sig-prename descclassname">os.</code><code class="sig-name descname">MFD_HUGE_16MB</code><a class="headerlink" href="#os.MFD_HUGE_16MB" title="永久链接至目标">¶</a></dt>
<dt id="os.MFD_HUGE_32MB">
<code class="sig-prename descclassname">os.</code><code class="sig-name descname">MFD_HUGE_32MB</code><a class="headerlink" href="#os.MFD_HUGE_32MB" title="永久链接至目标">¶</a></dt>
<dt id="os.MFD_HUGE_256MB">
<code class="sig-prename descclassname">os.</code><code class="sig-name descname">MFD_HUGE_256MB</code><a class="headerlink" href="#os.MFD_HUGE_256MB" title="永久链接至目标">¶</a></dt>
<dt id="os.MFD_HUGE_512MB">
<code class="sig-prename descclassname">os.</code><code class="sig-name descname">MFD_HUGE_512MB</code><a class="headerlink" href="#os.MFD_HUGE_512MB" title="永久链接至目标">¶</a></dt>
<dt id="os.MFD_HUGE_1GB">
<code class="sig-prename descclassname">os.</code><code class="sig-name descname">MFD_HUGE_1GB</code><a class="headerlink" href="#os.MFD_HUGE_1GB" title="永久链接至目标">¶</a></dt>
<dt id="os.MFD_HUGE_2GB">
<code class="sig-prename descclassname">os.</code><code class="sig-name descname">MFD_HUGE_2GB</code><a class="headerlink" href="#os.MFD_HUGE_2GB" title="永久链接至目标">¶</a></dt>
<dt id="os.MFD_HUGE_16GB">
<code class="sig-prename descclassname">os.</code><code class="sig-name descname">MFD_HUGE_16GB</code><a class="headerlink" href="#os.MFD_HUGE_16GB" title="永久链接至目标">¶</a></dt>
<dd><p>以上标志位可以传递给 <a class="reference internal" href="#os.memfd_create" title="os.memfd_create"><code class="xref py py-func docutils literal notranslate"><span class="pre">memfd_create()</span></code></a>。</p>
<p class="availability"><a class="reference internal" href="intro.html#availability"><span class="std std-ref">可用性</span></a>：Linux 3.17 或更高版本，且装有 glibc 2.27 或更高版本。<code class="docutils literal notranslate"><span class="pre">MFD_HUGE*</span></code> 标志仅在 Linux 4.14 及以上可用。</p>
<div class="versionadded">
<p><span class="versionmodified added">3.8 新版功能.</span></p>
</div>
</dd></dl>

<dl class="py function">
<dt id="os.eventfd">
<code class="sig-prename descclassname">os.</code><code class="sig-name descname">eventfd</code><span class="sig-paren">(</span><em class="sig-param">initval</em><span class="optional">[</span>, <em class="sig-param">flags=os.EFD_CLOEXEC</em><span class="optional">]</span><span class="sig-paren">)</span><a class="headerlink" href="#os.eventfd" title="永久链接至目标">¶</a></dt>
<dd><p>创建并返回一个事件文件描述符。此文件描述符支持缓冲区大小为 8 的原生 <a class="reference internal" href="#os.read" title="os.read"><code class="xref py py-func docutils literal notranslate"><span class="pre">read()</span></code></a> 和  <a class="reference internal" href="#os.write" title="os.write"><code class="xref py py-func docutils literal notranslate"><span class="pre">write()</span></code></a> 操作、<a class="reference internal" href="select.html#select.select" title="select.select"><code class="xref py py-func docutils literal notranslate"><span class="pre">select()</span></code></a> 、<a class="reference internal" href="select.html#select.poll" title="select.poll"><code class="xref py py-func docutils literal notranslate"><span class="pre">poll()</span></code></a> 等类似操作。更多信息请参阅 man 文档 <em class="manpage"><a class="manpage reference external" href="https://manpages.debian.org/eventfd(2)">eventfd(2)</a></em>。默认情况下，新的文件描述符是 <a class="reference internal" href="#fd-inheritance"><span class="std std-ref">non-inheritable</span></a>。</p>
<p><em>initval</em> 是事件计数器的初始值。初始值必须是一个 32 位无符号整数。请注意，虽然事件计数器是一个无符号的 64 位整数，其最大值为 2 <sup>64</sup>-2，但初始值仍被限制为 32 位无符号整数。</p>
<p><em>flags</em> 可由 <a class="reference internal" href="#os.EFD_CLOEXEC" title="os.EFD_CLOEXEC"><code class="xref py py-const docutils literal notranslate"><span class="pre">EFD_CLOEXEC</span></code></a> 、 <a class="reference internal" href="#os.EFD_NONBLOCK" title="os.EFD_NONBLOCK"><code class="xref py py-const docutils literal notranslate"><span class="pre">EFD_NONBLOCK</span></code></a> 和  <a class="reference internal" href="#os.EFD_SEMAPHORE" title="os.EFD_SEMAPHORE"><code class="xref py py-const docutils literal notranslate"><span class="pre">EFD_SEMAPHORE</span></code></a> 组合而成。</p>
<p>如果设置了 <a class="reference internal" href="#os.EFD_SEMAPHORE" title="os.EFD_SEMAPHORE"><code class="xref py py-const docutils literal notranslate"><span class="pre">EFD_SEMAPHORE</span></code></a>，并且事件计数器非零，那么 <a class="reference internal" href="#os.eventfd_read" title="os.eventfd_read"><code class="xref py py-func docutils literal notranslate"><span class="pre">eventfd_read()</span></code></a> 将返回 1 并将计数器递减 1。</p>
<p>如果未设置 <a class="reference internal" href="#os.EFD_SEMAPHORE" title="os.EFD_SEMAPHORE"><code class="xref py py-const docutils literal notranslate"><span class="pre">EFD_SEMAPHORE</span></code></a>，并且事件计数器非零，那么 <a class="reference internal" href="#os.eventfd_read" title="os.eventfd_read"><code class="xref py py-func docutils literal notranslate"><span class="pre">eventfd_read()</span></code></a> 返回当前的事件计数器值，并将计数器重置为零。</p>
<p>如果事件计数器为 0，并且未设置 <a class="reference internal" href="#os.EFD_NONBLOCK" title="os.EFD_NONBLOCK"><code class="xref py py-const docutils literal notranslate"><span class="pre">EFD_NONBLOCK</span></code></a>，那么 <a class="reference internal" href="#os.eventfd_read" title="os.eventfd_read"><code class="xref py py-func docutils literal notranslate"><span class="pre">eventfd_read()</span></code></a> 会阻塞。</p>
<p><a class="reference internal" href="#os.eventfd_write" title="os.eventfd_write"><code class="xref py py-func docutils literal notranslate"><span class="pre">eventfd_write()</span></code></a> 会递增事件计数器。如果写操作会让计数器的增量大于2<sup>64</sup>-2，则写入会被阻止。</p>
<p>示例:</p>
<div class="highlight-python3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">os</span>

<span class="c1"># semaphore with start value &#39;1&#39;</span>
<span class="n">fd</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">eventfd</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="n">os</span><span class="o">.</span><span class="n">EFD_SEMAPHORE</span> <span class="o">|</span> <span class="n">os</span><span class="o">.</span><span class="n">EFC_CLOEXEC</span><span class="p">)</span>
<span class="k">try</span><span class="p">:</span>
    <span class="c1"># acquire semaphore</span>
    <span class="n">v</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">eventfd_read</span><span class="p">(</span><span class="n">fd</span><span class="p">)</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="n">do_work</span><span class="p">()</span>
    <span class="k">finally</span><span class="p">:</span>
        <span class="c1"># release semaphore</span>
        <span class="n">os</span><span class="o">.</span><span class="n">eventfd_write</span><span class="p">(</span><span class="n">fd</span><span class="p">,</span> <span class="n">v</span><span class="p">)</span>
<span class="k">finally</span><span class="p">:</span>
    <span class="n">os</span><span class="o">.</span><span class="n">close</span><span class="p">(</span><span class="n">fd</span><span class="p">)</span>
</pre></div>
</div>
<p class="availability"><a class="reference internal" href="intro.html#availability"><span class="std std-ref">可用性</span></a> ：Linux 2.6.27 以上版本，带有 glibc 2.8 以上版本。</p>
<div class="versionadded">
<p><span class="versionmodified added">3.10 新版功能.</span></p>
</div>
</dd></dl>

<dl class="py function">
<dt id="os.eventfd_read">
<code class="sig-prename descclassname">os.</code><code class="sig-name descname">eventfd_read</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">fd</span></em><span class="sig-paren">)</span><a class="headerlink" href="#os.eventfd_read" title="永久链接至目标">¶</a></dt>
<dd><p>从一个 <a class="reference internal" href="#os.eventfd" title="os.eventfd"><code class="xref py py-func docutils literal notranslate"><span class="pre">eventfd()</span></code></a> 文件描述符中读取数据，并返回一个 64 位无符号整数。该函数不会校验 <em>fd</em> 是否为 <a class="reference internal" href="#os.eventfd" title="os.eventfd"><code class="xref py py-func docutils literal notranslate"><span class="pre">eventfd()</span></code></a>。</p>
<p class="availability"><a class="reference internal" href="intro.html#availability"><span class="std std-ref">可用性</span></a> ：参见 <a class="reference internal" href="#os.eventfd" title="os.eventfd"><code class="xref py py-func docutils literal notranslate"><span class="pre">eventfd()</span></code></a> 。</p>
<div class="versionadded">
<p><span class="versionmodified added">3.10 新版功能.</span></p>
</div>
</dd></dl>

<dl class="py function">
<dt id="os.eventfd_write">
<code class="sig-prename descclassname">os.</code><code class="sig-name descname">eventfd_write</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">fd</span></em>, <em class="sig-param"><span class="n">value</span></em><span class="sig-paren">)</span><a class="headerlink" href="#os.eventfd_write" title="永久链接至目标">¶</a></dt>
<dd><p>向一个 <a class="reference internal" href="#os.eventfd" title="os.eventfd"><code class="xref py py-func docutils literal notranslate"><span class="pre">eventfd()</span></code></a> 文件描述符加入数据。<em>value</em> 必须是一个 64 位无符号整数。本函数不会校验 <em>fd</em> 是否为 <a class="reference internal" href="#os.eventfd" title="os.eventfd"><code class="xref py py-func docutils literal notranslate"><span class="pre">eventfd()</span></code></a>。</p>
<p class="availability"><a class="reference internal" href="intro.html#availability"><span class="std std-ref">可用性</span></a> ：参见 <a class="reference internal" href="#os.eventfd" title="os.eventfd"><code class="xref py py-func docutils literal notranslate"><span class="pre">eventfd()</span></code></a> 。</p>
<div class="versionadded">
<p><span class="versionmodified added">3.10 新版功能.</span></p>
</div>
</dd></dl>

<dl class="py data">
<dt id="os.EFD_CLOEXEC">
<code class="sig-prename descclassname">os.</code><code class="sig-name descname">EFD_CLOEXEC</code><a class="headerlink" href="#os.EFD_CLOEXEC" title="永久链接至目标">¶</a></dt>
<dd><p>为新的 <a class="reference internal" href="#os.eventfd" title="os.eventfd"><code class="xref py py-func docutils literal notranslate"><span class="pre">eventfd()</span></code></a> 文件描述符设置 close-on-exec 标志。</p>
<p class="availability"><a class="reference internal" href="intro.html#availability"><span class="std std-ref">可用性</span></a> ：参见 <a class="reference internal" href="#os.eventfd" title="os.eventfd"><code class="xref py py-func docutils literal notranslate"><span class="pre">eventfd()</span></code></a> 。</p>
<div class="versionadded">
<p><span class="versionmodified added">3.10 新版功能.</span></p>
</div>
</dd></dl>

<dl class="py data">
<dt id="os.EFD_NONBLOCK">
<code class="sig-prename descclassname">os.</code><code class="sig-name descname">EFD_NONBLOCK</code><a class="headerlink" href="#os.EFD_NONBLOCK" title="永久链接至目标">¶</a></dt>
<dd><p>为新的 <a class="reference internal" href="#os.eventfd" title="os.eventfd"><code class="xref py py-func docutils literal notranslate"><span class="pre">eventfd()</span></code></a> 文件描述符设置 <a class="reference internal" href="#os.O_NONBLOCK" title="os.O_NONBLOCK"><code class="xref py py-const docutils literal notranslate"><span class="pre">O_NONBLOCK</span></code></a> 状态标志。</p>
<p class="availability"><a class="reference internal" href="intro.html#availability"><span class="std std-ref">可用性</span></a> ：参见 <a class="reference internal" href="#os.eventfd" title="os.eventfd"><code class="xref py py-func docutils literal notranslate"><span class="pre">eventfd()</span></code></a> 。</p>
<div class="versionadded">
<p><span class="versionmodified added">3.10 新版功能.</span></p>
</div>
</dd></dl>

<dl class="py data">
<dt id="os.EFD_SEMAPHORE">
<code class="sig-prename descclassname">os.</code><code class="sig-name descname">EFD_SEMAPHORE</code><a class="headerlink" href="#os.EFD_SEMAPHORE" title="永久链接至目标">¶</a></dt>
<dd><p>为读取 <a class="reference internal" href="#os.eventfd" title="os.eventfd"><code class="xref py py-func docutils literal notranslate"><span class="pre">eventfd()</span></code></a> 文件描述符的操作提供类似信号量的控制。在读取时，内部计数器递减 1。</p>
<p class="availability"><a class="reference internal" href="intro.html#availability"><span class="std std-ref">可用性</span></a>: Linux 2.6.30 以上版本，带有 glibc 2.8 以上版本。</p>
<div class="versionadded">
<p><span class="versionmodified added">3.10 新版功能.</span></p>
</div>
</dd></dl>

<section id="linux-extended-attributes">
<h3>Linux 扩展属性<a class="headerlink" href="#linux-extended-attributes" title="永久链接至标题">¶</a></h3>
<div class="versionadded">
<p><span class="versionmodified added">3.3 新版功能.</span></p>
</div>
<p>这些函数仅在 Linux 上可用。</p>
<dl class="py function">
<dt id="os.getxattr">
<code class="sig-prename descclassname">os.</code><code class="sig-name descname">getxattr</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">path</span></em>, <em class="sig-param"><span class="n">attribute</span></em>, <em class="sig-param"><span class="o">*</span></em>, <em class="sig-param"><span class="n">follow_symlinks</span><span class="o">=</span><span class="default_value">True</span></em><span class="sig-paren">)</span><a class="headerlink" href="#os.getxattr" title="永久链接至目标">¶</a></dt>
<dd><p>返回 <em>path</em> 的扩展文件系统属性 <em>attribute</em> 的值。<em>attribute</em> 可以是 bytes 或 str （直接传入或通过 <a class="reference internal" href="#os.PathLike" title="os.PathLike"><code class="xref py py-class docutils literal notranslate"><span class="pre">PathLike</span></code></a> 接口间接传入）。如果是 str，则使用文件系统编码来编码字符串。</p>
<p>本函数支持 <a class="reference internal" href="#path-fd"><span class="std std-ref">指定文件描述符为参数</span></a> 和 <a class="reference internal" href="#follow-symlinks"><span class="std std-ref">不跟踪符号链接</span></a>。</p>
<p class="audit-hook">引发一个 <a class="reference internal" href="sys.html#auditing"><span class="std std-ref">审计事件</span></a> <code class="docutils literal notranslate"><span class="pre">os.getxattr</span></code>，附带参数 <code class="docutils literal notranslate"><span class="pre">path</span></code>、<code class="docutils literal notranslate"><span class="pre">attribute</span></code>。</p>
<div class="versionchanged">
<p><span class="versionmodified changed">在 3.6 版更改: </span>接受一个 <a class="reference internal" href="../glossary.html#term-path-like-object"><span class="xref std std-term">类路径对象</span></a> 作为 <em>path</em> 和 <em>attribute</em>。</p>
</div>
</dd></dl>

<dl class="py function">
<dt id="os.listxattr">
<code class="sig-prename descclassname">os.</code><code class="sig-name descname">listxattr</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">path</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="o">*</span></em>, <em class="sig-param"><span class="n">follow_symlinks</span><span class="o">=</span><span class="default_value">True</span></em><span class="sig-paren">)</span><a class="headerlink" href="#os.listxattr" title="永久链接至目标">¶</a></dt>
<dd><p>返回一个列表，包含 <em>path</em> 的所有扩展文件系统属性。列表中的属性都表示为字符串，它们是根据文件系统编码解码出来的。如果 <em>path</em> 为 <code class="docutils literal notranslate"><span class="pre">None</span></code>，则 <a class="reference internal" href="#os.listxattr" title="os.listxattr"><code class="xref py py-func docutils literal notranslate"><span class="pre">listxattr()</span></code></a> 将检查当前目录。</p>
<p>本函数支持 <a class="reference internal" href="#path-fd"><span class="std std-ref">指定文件描述符为参数</span></a> 和 <a class="reference internal" href="#follow-symlinks"><span class="std std-ref">不跟踪符号链接</span></a>。</p>
<p class="audit-hook">引发一个 <a class="reference internal" href="sys.html#auditing"><span class="std std-ref">审计事件</span></a> <code class="docutils literal notranslate"><span class="pre">os.listxattr</span></code>，附带参数 <code class="docutils literal notranslate"><span class="pre">path</span></code>。</p>
<div class="versionchanged">
<p><span class="versionmodified changed">在 3.6 版更改: </span>接受一个 <a class="reference internal" href="../glossary.html#term-path-like-object"><span class="xref std std-term">path-like object</span></a>。</p>
</div>
</dd></dl>

<dl class="py function">
<dt id="os.removexattr">
<code class="sig-prename descclassname">os.</code><code class="sig-name descname">removexattr</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">path</span></em>, <em class="sig-param"><span class="n">attribute</span></em>, <em class="sig-param"><span class="o">*</span></em>, <em class="sig-param"><span class="n">follow_symlinks</span><span class="o">=</span><span class="default_value">True</span></em><span class="sig-paren">)</span><a class="headerlink" href="#os.removexattr" title="永久链接至目标">¶</a></dt>
<dd><p>移除 <em>path</em> 中的扩展文件系统属性 <em>attribute</em>。 <em>attribute</em> 应为字节串或字符串类型（通过 <a class="reference internal" href="#os.PathLike" title="os.PathLike"><code class="xref py py-class docutils literal notranslate"><span class="pre">PathLike</span></code></a> 接口直接或间接得到）。 若为字符串类型，则用 <a class="reference internal" href="../glossary.html#term-filesystem-encoding-and-error-handler"><span class="xref std std-term">filesystem encoding and error handler</span></a> 进行编码。</p>
<p>本函数支持 <a class="reference internal" href="#path-fd"><span class="std std-ref">指定文件描述符为参数</span></a> 和 <a class="reference internal" href="#follow-symlinks"><span class="std std-ref">不跟踪符号链接</span></a>。</p>
<p class="audit-hook">引发一个 <a class="reference internal" href="sys.html#auditing"><span class="std std-ref">审计事件</span></a> <code class="docutils literal notranslate"><span class="pre">os.removexattr</span></code>，附带参数 <code class="docutils literal notranslate"><span class="pre">path</span></code>、<code class="docutils literal notranslate"><span class="pre">attribute</span></code>。</p>
<div class="versionchanged">
<p><span class="versionmodified changed">在 3.6 版更改: </span>接受一个 <a class="reference internal" href="../glossary.html#term-path-like-object"><span class="xref std std-term">类路径对象</span></a> 作为 <em>path</em> 和 <em>attribute</em>。</p>
</div>
</dd></dl>

<dl class="py function">
<dt id="os.setxattr">
<code class="sig-prename descclassname">os.</code><code class="sig-name descname">setxattr</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">path</span></em>, <em class="sig-param"><span class="n">attribute</span></em>, <em class="sig-param"><span class="n">value</span></em>, <em class="sig-param"><span class="n">flags</span><span class="o">=</span><span class="default_value">0</span></em>, <em class="sig-param"><span class="o">*</span></em>, <em class="sig-param"><span class="n">follow_symlinks</span><span class="o">=</span><span class="default_value">True</span></em><span class="sig-paren">)</span><a class="headerlink" href="#os.setxattr" title="永久链接至目标">¶</a></dt>
<dd><p>将 <em>path</em> 的文件系统扩展属性 <em>attribute</em> 设为 <em>value</em>。 <em>attribute</em> 必须是一个字节串或字符串，不含 NUL（通过 <a class="reference internal" href="#os.PathLike" title="os.PathLike"><code class="xref py py-class docutils literal notranslate"><span class="pre">PathLike</span></code></a> 接口直接或间接得到）。 若为字符串，将用 <a class="reference internal" href="../glossary.html#term-filesystem-encoding-and-error-handler"><span class="xref std std-term">filesystem encoding and error handler</span></a> 进行编码。 <em>flags</em> 可以是 <a class="reference internal" href="#os.XATTR_REPLACE" title="os.XATTR_REPLACE"><code class="xref py py-data docutils literal notranslate"><span class="pre">XATTR_REPLACE</span></code></a> 或 <a class="reference internal" href="#os.XATTR_CREATE" title="os.XATTR_CREATE"><code class="xref py py-data docutils literal notranslate"><span class="pre">XATTR_CREATE</span></code></a>。 如果给出 <a class="reference internal" href="#os.XATTR_REPLACE" title="os.XATTR_REPLACE"><code class="xref py py-data docutils literal notranslate"><span class="pre">XATTR_REPLACE</span></code></a> 而属性不存在，则会触发 <code class="docutils literal notranslate"><span class="pre">ENODATA</span></code>。 如果给出了 <a class="reference internal" href="#os.XATTR_CREATE" title="os.XATTR_CREATE"><code class="xref py py-data docutils literal notranslate"><span class="pre">XATTR_CREATE</span></code></a> 而属性已存在，则不会创建属性并将触发 <code class="docutils literal notranslate"><span class="pre">EEXISTS</span></code>。</p>
<p>本函数支持 <a class="reference internal" href="#path-fd"><span class="std std-ref">指定文件描述符为参数</span></a> 和 <a class="reference internal" href="#follow-symlinks"><span class="std std-ref">不跟踪符号链接</span></a>。</p>
<div class="admonition note">
<p class="admonition-title">注解</p>
<p>Linux kernel 2.6.39 以下版本的一个 bug 导致在某些文件系统上，flags 参数会被忽略。</p>
</div>
<p class="audit-hook">引发一个 <a class="reference internal" href="sys.html#auditing"><span class="std std-ref">审计事件</span></a> <code class="docutils literal notranslate"><span class="pre">os.setxattr</span></code>，附带参数 <code class="docutils literal notranslate"><span class="pre">path</span></code>、<code class="docutils literal notranslate"><span class="pre">attribute</span></code>、<code class="docutils literal notranslate"><span class="pre">value</span></code>、<code class="docutils literal notranslate"><span class="pre">flags</span></code>。</p>
<div class="versionchanged">
<p><span class="versionmodified changed">在 3.6 版更改: </span>接受一个 <a class="reference internal" href="../glossary.html#term-path-like-object"><span class="xref std std-term">类路径对象</span></a> 作为 <em>path</em> 和 <em>attribute</em>。</p>
</div>
</dd></dl>

<dl class="py data">
<dt id="os.XATTR_SIZE_MAX">
<code class="sig-prename descclassname">os.</code><code class="sig-name descname">XATTR_SIZE_MAX</code><a class="headerlink" href="#os.XATTR_SIZE_MAX" title="永久链接至目标">¶</a></dt>
<dd><p>一条扩展属性的值的最大大小。在当前的 Linux 上是 64 KiB。</p>
</dd></dl>

<dl class="py data">
<dt id="os.XATTR_CREATE">
<code class="sig-prename descclassname">os.</code><code class="sig-name descname">XATTR_CREATE</code><a class="headerlink" href="#os.XATTR_CREATE" title="永久链接至目标">¶</a></dt>
<dd><p>这是 <a class="reference internal" href="#os.setxattr" title="os.setxattr"><code class="xref py py-func docutils literal notranslate"><span class="pre">setxattr()</span></code></a> 的 flags 参数的可取值，它表示该操作必须创建一个属性。</p>
</dd></dl>

<dl class="py data">
<dt id="os.XATTR_REPLACE">
<code class="sig-prename descclassname">os.</code><code class="sig-name descname">XATTR_REPLACE</code><a class="headerlink" href="#os.XATTR_REPLACE" title="永久链接至目标">¶</a></dt>
<dd><p>这是 <a class="reference internal" href="#os.setxattr" title="os.setxattr"><code class="xref py py-func docutils literal notranslate"><span class="pre">setxattr()</span></code></a> 的 flags 参数的可取值，它表示该操作必须替换现有属性。</p>
</dd></dl>

</section>
</section>
<section id="process-management">
<span id="os-process"></span><h2>进程管理<a class="headerlink" href="#process-management" title="永久链接至标题">¶</a></h2>
<p>下列函数可用于创建和管理进程。</p>
<p>所有 <a class="reference internal" href="#os.execl" title="os.execl"><code class="xref py py-func docutils literal notranslate"><span class="pre">exec*</span></code></a> 函数都接受一个参数列表，用来给新程序加载到它的进程中。在所有情况下，传递给新程序的第一个参数是程序本身的名称，而不是用户在命令行上输入的参数。对于 C 程序员来说，这就是传递给 <code class="xref c c-func docutils literal notranslate"><span class="pre">main()</span></code> 函数的 <code class="docutils literal notranslate"><span class="pre">argv[0]</span></code>。例如，<code class="docutils literal notranslate"><span class="pre">os.execv('/bin/echo',</span> <span class="pre">['foo',</span> <span class="pre">'bar'])</span></code> 只会在标准输出上打印 <code class="docutils literal notranslate"><span class="pre">bar</span></code>，而 <code class="docutils literal notranslate"><span class="pre">foo</span></code> 会被忽略。</p>
<dl class="py function">
<dt id="os.abort">
<code class="sig-prename descclassname">os.</code><code class="sig-name descname">abort</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#os.abort" title="永久链接至目标">¶</a></dt>
<dd><p>发送 <code class="xref py py-const docutils literal notranslate"><span class="pre">SIGABRT</span></code> 信号到当前进程。在 Unix 上，默认行为是生成一个核心转储。在 Windows 上，该进程立即返回退出代码 <code class="docutils literal notranslate"><span class="pre">3</span></code>。请注意，使用 <a class="reference internal" href="signal.html#signal.signal" title="signal.signal"><code class="xref py py-func docutils literal notranslate"><span class="pre">signal.signal()</span></code></a> 可以为 <code class="xref py py-const docutils literal notranslate"><span class="pre">SIGABRT</span></code> 注册 Python 信号处理程序，而调用本函数将不会调用按前述方法注册的程序。</p>
</dd></dl>

<dl class="py function">
<dt id="os.add_dll_directory">
<code class="sig-prename descclassname">os.</code><code class="sig-name descname">add_dll_directory</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">path</span></em><span class="sig-paren">)</span><a class="headerlink" href="#os.add_dll_directory" title="永久链接至目标">¶</a></dt>
<dd><p>将路径添加到 DLL 搜索路径。</p>
<p>当需要解析扩展模块的依赖时（扩展模块本身通过 <a class="reference internal" href="sys.html#sys.path" title="sys.path"><code class="xref py py-data docutils literal notranslate"><span class="pre">sys.path</span></code></a> 解析），会使用该搜索路径，<a class="reference internal" href="ctypes.html#module-ctypes" title="ctypes: A foreign function library for Python."><code class="xref py py-mod docutils literal notranslate"><span class="pre">ctypes</span></code></a> 也会使用该搜索路径。</p>
<p>要移除目录，可以在返回的对象上调用 <strong>close()</strong>，也可以在 <a class="reference internal" href="../reference/compound_stmts.html#with"><code class="xref std std-keyword docutils literal notranslate"><span class="pre">with</span></code></a> 语句内使用本方法。</p>
<p>参阅 <a class="reference external" href="https://msdn.microsoft.com/44228cf2-6306-466c-8f16-f513cd3ba8b5">Microsoft 文档</a> 获取如何加载 DLL 的信息。</p>
<p class="audit-hook">引发一个 <a class="reference internal" href="sys.html#auditing"><span class="std std-ref">审计事件</span></a> <code class="docutils literal notranslate"><span class="pre">os.add_dll_directory</span></code>，附带参数 <code class="docutils literal notranslate"><span class="pre">path</span></code>。</p>
<p class="availability"><a class="reference internal" href="intro.html#availability"><span class="std std-ref">可用性</span></a>: Windows。</p>
<div class="versionadded">
<p><span class="versionmodified added">3.8 新版功能: </span>早期版本的 CPython 解析 DLL 时用的是当前进程的默认行为。这会导致不一致，比如不是每次都会去搜索 <span class="target" id="index-91"></span><code class="xref std std-envvar docutils literal notranslate"><span class="pre">PATH</span></code> 和当前工作目录，且系统函数（如 <code class="docutils literal notranslate"><span class="pre">AddDllDirectory</span></code> ）失效。</p>
<p>在 3.8 中，DLL 的两种主要加载方式现在可以显式覆盖进程的行为，以确保一致性。请参阅 <a class="reference internal" href="../whatsnew/3.8.html#bpo-36085-whatsnew"><span class="std std-ref">移植说明</span></a> 了解如何更新你的库。</p>
</div>
</dd></dl>

<dl class="py function">
<dt id="os.execl">
<code class="sig-prename descclassname">os.</code><code class="sig-name descname">execl</code><span class="sig-paren">(</span><em class="sig-param">path</em>, <em class="sig-param">arg0</em>, <em class="sig-param">arg1</em>, <em class="sig-param">...</em><span class="sig-paren">)</span><a class="headerlink" href="#os.execl" title="永久链接至目标">¶</a></dt>
<dt id="os.execle">
<code class="sig-prename descclassname">os.</code><code class="sig-name descname">execle</code><span class="sig-paren">(</span><em class="sig-param">path</em>, <em class="sig-param">arg0</em>, <em class="sig-param">arg1</em>, <em class="sig-param">...</em>, <em class="sig-param">env</em><span class="sig-paren">)</span><a class="headerlink" href="#os.execle" title="永久链接至目标">¶</a></dt>
<dt id="os.execlp">
<code class="sig-prename descclassname">os.</code><code class="sig-name descname">execlp</code><span class="sig-paren">(</span><em class="sig-param">file</em>, <em class="sig-param">arg0</em>, <em class="sig-param">arg1</em>, <em class="sig-param">...</em><span class="sig-paren">)</span><a class="headerlink" href="#os.execlp" title="永久链接至目标">¶</a></dt>
<dt id="os.execlpe">
<code class="sig-prename descclassname">os.</code><code class="sig-name descname">execlpe</code><span class="sig-paren">(</span><em class="sig-param">file</em>, <em class="sig-param">arg0</em>, <em class="sig-param">arg1</em>, <em class="sig-param">...</em>, <em class="sig-param">env</em><span class="sig-paren">)</span><a class="headerlink" href="#os.execlpe" title="永久链接至目标">¶</a></dt>
<dt id="os.execv">
<code class="sig-prename descclassname">os.</code><code class="sig-name descname">execv</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">path</span></em>, <em class="sig-param"><span class="n">args</span></em><span class="sig-paren">)</span><a class="headerlink" href="#os.execv" title="永久链接至目标">¶</a></dt>
<dt id="os.execve">
<code class="sig-prename descclassname">os.</code><code class="sig-name descname">execve</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">path</span></em>, <em class="sig-param"><span class="n">args</span></em>, <em class="sig-param"><span class="n">env</span></em><span class="sig-paren">)</span><a class="headerlink" href="#os.execve" title="永久链接至目标">¶</a></dt>
<dt id="os.execvp">
<code class="sig-prename descclassname">os.</code><code class="sig-name descname">execvp</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">file</span></em>, <em class="sig-param"><span class="n">args</span></em><span class="sig-paren">)</span><a class="headerlink" href="#os.execvp" title="永久链接至目标">¶</a></dt>
<dt id="os.execvpe">
<code class="sig-prename descclassname">os.</code><code class="sig-name descname">execvpe</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">file</span></em>, <em class="sig-param"><span class="n">args</span></em>, <em class="sig-param"><span class="n">env</span></em><span class="sig-paren">)</span><a class="headerlink" href="#os.execvpe" title="永久链接至目标">¶</a></dt>
<dd><p>这些函数都将执行一个新程序，以替换当前进程。它们没有返回值。在 Unix 上，新程序会加载到当前进程中，且进程号与调用者相同。过程中的错误会被报告为 <a class="reference internal" href="exceptions.html#OSError" title="OSError"><code class="xref py py-exc docutils literal notranslate"><span class="pre">OSError</span></code></a> 异常。</p>
<p>当前进程会被立即替换。打开的文件对象和描述符都不会刷新，因此如果这些文件上可能缓冲了数据，则应在调用 <a class="reference internal" href="#os.execl" title="os.execl"><code class="xref py py-func docutils literal notranslate"><span class="pre">exec*</span></code></a> 函数之前使用 <code class="xref py py-func docutils literal notranslate"><span class="pre">sys.stdout.flush()</span></code> 或 <a class="reference internal" href="#os.fsync" title="os.fsync"><code class="xref py py-func docutils literal notranslate"><span class="pre">os.fsync()</span></code></a> 刷新它们。</p>
<p><a class="reference internal" href="#os.execl" title="os.execl"><code class="xref py py-func docutils literal notranslate"><span class="pre">exec*</span></code></a> 函数的 &quot;l&quot; 和 &quot;v&quot; 变体不同在于命令行参数的传递方式。如果在编码时固定了参数数量，则 &quot;l&quot; 变体可能是最方便的，各参数作为 <code class="xref py py-func docutils literal notranslate"><span class="pre">execl*()</span></code> 函数的附加参数传入即可。当参数数量可变时，&quot;v&quot; 变体更方便，参数以列表或元组的形式作为 <em>args</em> 参数传递。在这两种情况下，子进程的第一个参数都应该是即将运行的命令名称，但这不是强制性的。</p>
<p>结尾包含 &quot;p&quot; 的变体（<a class="reference internal" href="#os.execlp" title="os.execlp"><code class="xref py py-func docutils literal notranslate"><span class="pre">execlp()</span></code></a>、<a class="reference internal" href="#os.execlpe" title="os.execlpe"><code class="xref py py-func docutils literal notranslate"><span class="pre">execlpe()</span></code></a>、<a class="reference internal" href="#os.execvp" title="os.execvp"><code class="xref py py-func docutils literal notranslate"><span class="pre">execvp()</span></code></a> 和 <a class="reference internal" href="#os.execvpe" title="os.execvpe"><code class="xref py py-func docutils literal notranslate"><span class="pre">execvpe()</span></code></a> ）将使用 <span class="target" id="index-92"></span><code class="xref std std-envvar docutils literal notranslate"><span class="pre">PATH</span></code> 环境变量来查找程序 <em>file</em>。当环境被替换时（使用下一段讨论的 <a class="reference internal" href="#os.execl" title="os.execl"><code class="xref py py-func docutils literal notranslate"><span class="pre">exec*e</span></code></a> 变体之一），<span class="target" id="index-93"></span><code class="xref std std-envvar docutils literal notranslate"><span class="pre">PATH</span></code> 变量将来自于新环境。其他变体 <a class="reference internal" href="#os.execl" title="os.execl"><code class="xref py py-func docutils literal notranslate"><span class="pre">execl()</span></code></a>、<a class="reference internal" href="#os.execle" title="os.execle"><code class="xref py py-func docutils literal notranslate"><span class="pre">execle()</span></code></a>、<a class="reference internal" href="#os.execv" title="os.execv"><code class="xref py py-func docutils literal notranslate"><span class="pre">execv()</span></code></a> 和 <a class="reference internal" href="#os.execve" title="os.execve"><code class="xref py py-func docutils literal notranslate"><span class="pre">execve()</span></code></a> 不使用 <span class="target" id="index-94"></span><code class="xref std std-envvar docutils literal notranslate"><span class="pre">PATH</span></code> 变量来查找程序，因此 <em>path</em> 必须包含正确的绝对或相对路径。</p>
<p>对于 <a class="reference internal" href="#os.execle" title="os.execle"><code class="xref py py-func docutils literal notranslate"><span class="pre">execle()</span></code></a>、<a class="reference internal" href="#os.execlpe" title="os.execlpe"><code class="xref py py-func docutils literal notranslate"><span class="pre">execlpe()</span></code></a>、<a class="reference internal" href="#os.execve" title="os.execve"><code class="xref py py-func docutils literal notranslate"><span class="pre">execve()</span></code></a> 和 <a class="reference internal" href="#os.execvpe" title="os.execvpe"><code class="xref py py-func docutils literal notranslate"><span class="pre">execvpe()</span></code></a> （都以 &quot;e&quot; 结尾），<em>env</em> 参数是一个映射，用于定义新进程的环境变量（代替当前进程的环境变量）。而函数 <a class="reference internal" href="#os.execl" title="os.execl"><code class="xref py py-func docutils literal notranslate"><span class="pre">execl()</span></code></a>、<a class="reference internal" href="#os.execlp" title="os.execlp"><code class="xref py py-func docutils literal notranslate"><span class="pre">execlp()</span></code></a>、<a class="reference internal" href="#os.execv" title="os.execv"><code class="xref py py-func docutils literal notranslate"><span class="pre">execv()</span></code></a> 和 <a class="reference internal" href="#os.execvp" title="os.execvp"><code class="xref py py-func docutils literal notranslate"><span class="pre">execvp()</span></code></a> 会将当前进程的环境变量过继给新进程。</p>
<p>某些平台上的 <a class="reference internal" href="#os.execve" title="os.execve"><code class="xref py py-func docutils literal notranslate"><span class="pre">execve()</span></code></a> 可以将 <em>path</em> 指定为打开的文件描述符。当前平台可能不支持此功能，可以使用 <a class="reference internal" href="#os.supports_fd" title="os.supports_fd"><code class="xref py py-data docutils literal notranslate"><span class="pre">os.supports_fd</span></code></a> 检查它是否支持。如果不可用，则使用它会抛出 <a class="reference internal" href="exceptions.html#NotImplementedError" title="NotImplementedError"><code class="xref py py-exc docutils literal notranslate"><span class="pre">NotImplementedError</span></code></a> 异常。</p>
<p class="audit-hook">引发一个 <a class="reference internal" href="sys.html#auditing"><span class="std std-ref">审计事件</span></a> <code class="docutils literal notranslate"><span class="pre">os.exec</span></code>，附带参数 <code class="docutils literal notranslate"><span class="pre">path</span></code>、<code class="docutils literal notranslate"><span class="pre">args</span></code>、<code class="docutils literal notranslate"><span class="pre">env</span></code>。</p>
<p class="availability"><a class="reference internal" href="intro.html#availability"><span class="std std-ref">可用性</span></a>: Unix, Windows。</p>
<div class="versionadded">
<p><span class="versionmodified added">3.3 新版功能: </span>新增支持将 <a class="reference internal" href="#os.execve" title="os.execve"><code class="xref py py-func docutils literal notranslate"><span class="pre">execve()</span></code></a> 的 <em>path</em> 参数指定为打开的文件描述符。</p>
</div>
<div class="versionchanged">
<p><span class="versionmodified changed">在 3.6 版更改: </span>接受一个 <a class="reference internal" href="../glossary.html#term-path-like-object"><span class="xref std std-term">path-like object</span></a>。</p>
</div>
</dd></dl>

<dl class="py function">
<dt id="os._exit">
<code class="sig-prename descclassname">os.</code><code class="sig-name descname">_exit</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">n</span></em><span class="sig-paren">)</span><a class="headerlink" href="#os._exit" title="永久链接至目标">¶</a></dt>
<dd><p>以状态码 <em>n</em> 退出进程，不会调用清理处理程序，不会刷新 stdio，等等。</p>
<div class="admonition note">
<p class="admonition-title">注解</p>
<p>退出的标准方法是使用 <code class="docutils literal notranslate"><span class="pre">sys.exit(n)</span></code>。而 <a class="reference internal" href="#os._exit" title="os._exit"><code class="xref py py-func docutils literal notranslate"><span class="pre">_exit()</span></code></a> 通常只应在 <a class="reference internal" href="#os.fork" title="os.fork"><code class="xref py py-func docutils literal notranslate"><span class="pre">fork()</span></code></a> 出的子进程中使用。</p>
</div>
</dd></dl>

<p>以下是已定义的退出代码，可以用于 <a class="reference internal" href="#os._exit" title="os._exit"><code class="xref py py-func docutils literal notranslate"><span class="pre">_exit()</span></code></a>，尽管它们不是必需的。这些退出代码通常用于 Python 编写的系统程序，例如邮件服务器的外部命令传递程序。</p>
<div class="admonition note">
<p class="admonition-title">注解</p>
<p>其中部分退出代码在部分 Unix 平台上可能不可用，因为平台间存在差异。如果底层平台定义了这些常量，那上层也会定义。</p>
</div>
<dl class="py data">
<dt id="os.EX_OK">
<code class="sig-prename descclassname">os.</code><code class="sig-name descname">EX_OK</code><a class="headerlink" href="#os.EX_OK" title="永久链接至目标">¶</a></dt>
<dd><p>退出代码，表示未发生任何错误。</p>
<p class="availability"><a class="reference internal" href="intro.html#availability"><span class="std std-ref">可用性</span></a>: Unix。</p>
</dd></dl>

<dl class="py data">
<dt id="os.EX_USAGE">
<code class="sig-prename descclassname">os.</code><code class="sig-name descname">EX_USAGE</code><a class="headerlink" href="#os.EX_USAGE" title="永久链接至目标">¶</a></dt>
<dd><p>退出代码，表示命令使用不正确，如给出的参数数量有误。</p>
<p class="availability"><a class="reference internal" href="intro.html#availability"><span class="std std-ref">可用性</span></a>: Unix。</p>
</dd></dl>

<dl class="py data">
<dt id="os.EX_DATAERR">
<code class="sig-prename descclassname">os.</code><code class="sig-name descname">EX_DATAERR</code><a class="headerlink" href="#os.EX_DATAERR" title="永久链接至目标">¶</a></dt>
<dd><p>退出代码，表示输入数据不正确。</p>
<p class="availability"><a class="reference internal" href="intro.html#availability"><span class="std std-ref">可用性</span></a>: Unix。</p>
</dd></dl>

<dl class="py data">
<dt id="os.EX_NOINPUT">
<code class="sig-prename descclassname">os.</code><code class="sig-name descname">EX_NOINPUT</code><a class="headerlink" href="#os.EX_NOINPUT" title="永久链接至目标">¶</a></dt>
<dd><p>退出代码，表示某个输入文件不存在或不可读。</p>
<p class="availability"><a class="reference internal" href="intro.html#availability"><span class="std std-ref">可用性</span></a>: Unix。</p>
</dd></dl>

<dl class="py data">
<dt id="os.EX_NOUSER">
<code class="sig-prename descclassname">os.</code><code class="sig-name descname">EX_NOUSER</code><a class="headerlink" href="#os.EX_NOUSER" title="永久链接至目标">¶</a></dt>
<dd><p>退出代码，表示指定的用户不存在。</p>
<p class="availability"><a class="reference internal" href="intro.html#availability"><span class="std std-ref">可用性</span></a>: Unix。</p>
</dd></dl>

<dl class="py data">
<dt id="os.EX_NOHOST">
<code class="sig-prename descclassname">os.</code><code class="sig-name descname">EX_NOHOST</code><a class="headerlink" href="#os.EX_NOHOST" title="永久链接至目标">¶</a></dt>
<dd><p>退出代码，表示指定的主机不存在。</p>
<p class="availability"><a class="reference internal" href="intro.html#availability"><span class="std std-ref">可用性</span></a>: Unix。</p>
</dd></dl>

<dl class="py data">
<dt id="os.EX_UNAVAILABLE">
<code class="sig-prename descclassname">os.</code><code class="sig-name descname">EX_UNAVAILABLE</code><a class="headerlink" href="#os.EX_UNAVAILABLE" title="永久链接至目标">¶</a></dt>
<dd><p>退出代码，表示所需的服务不可用。</p>
<p class="availability"><a class="reference internal" href="intro.html#availability"><span class="std std-ref">可用性</span></a>: Unix。</p>
</dd></dl>

<dl class="py data">
<dt id="os.EX_SOFTWARE">
<code class="sig-prename descclassname">os.</code><code class="sig-name descname">EX_SOFTWARE</code><a class="headerlink" href="#os.EX_SOFTWARE" title="永久链接至目标">¶</a></dt>
<dd><p>退出代码，表示检测到内部软件错误。</p>
<p class="availability"><a class="reference internal" href="intro.html#availability"><span class="std std-ref">可用性</span></a>: Unix。</p>
</dd></dl>

<dl class="py data">
<dt id="os.EX_OSERR">
<code class="sig-prename descclassname">os.</code><code class="sig-name descname">EX_OSERR</code><a class="headerlink" href="#os.EX_OSERR" title="永久链接至目标">¶</a></dt>
<dd><p>退出代码，表示检测到操作系统错误，例如无法 fork 或创建管道。</p>
<p class="availability"><a class="reference internal" href="intro.html#availability"><span class="std std-ref">可用性</span></a>: Unix。</p>
</dd></dl>

<dl class="py data">
<dt id="os.EX_OSFILE">
<code class="sig-prename descclassname">os.</code><code class="sig-name descname">EX_OSFILE</code><a class="headerlink" href="#os.EX_OSFILE" title="永久链接至目标">¶</a></dt>
<dd><p>退出代码，表示某些系统文件不存在、无法打开或发生其他错误。</p>
<p class="availability"><a class="reference internal" href="intro.html#availability"><span class="std std-ref">可用性</span></a>: Unix。</p>
</dd></dl>

<dl class="py data">
<dt id="os.EX_CANTCREAT">
<code class="sig-prename descclassname">os.</code><code class="sig-name descname">EX_CANTCREAT</code><a class="headerlink" href="#os.EX_CANTCREAT" title="永久链接至目标">¶</a></dt>
<dd><p>退出代码，表示无法创建用户指定的输出文件。</p>
<p class="availability"><a class="reference internal" href="intro.html#availability"><span class="std std-ref">可用性</span></a>: Unix。</p>
</dd></dl>

<dl class="py data">
<dt id="os.EX_IOERR">
<code class="sig-prename descclassname">os.</code><code class="sig-name descname">EX_IOERR</code><a class="headerlink" href="#os.EX_IOERR" title="永久链接至目标">¶</a></dt>
<dd><p>退出代码，表示对某些文件进行读写时发生错误。</p>
<p class="availability"><a class="reference internal" href="intro.html#availability"><span class="std std-ref">可用性</span></a>: Unix。</p>
</dd></dl>

<dl class="py data">
<dt id="os.EX_TEMPFAIL">
<code class="sig-prename descclassname">os.</code><code class="sig-name descname">EX_TEMPFAIL</code><a class="headerlink" href="#os.EX_TEMPFAIL" title="永久链接至目标">¶</a></dt>
<dd><p>退出代码，表示发生了暂时性故障。它可能并非意味着真正的错误，例如在可重试的情况下无法建立网络连接。</p>
<p class="availability"><a class="reference internal" href="intro.html#availability"><span class="std std-ref">可用性</span></a>: Unix。</p>
</dd></dl>

<dl class="py data">
<dt id="os.EX_PROTOCOL">
<code class="sig-prename descclassname">os.</code><code class="sig-name descname">EX_PROTOCOL</code><a class="headerlink" href="#os.EX_PROTOCOL" title="永久链接至目标">¶</a></dt>
<dd><p>退出代码，表示协议交换是非法的、无效的或无法解读的。</p>
<p class="availability"><a class="reference internal" href="intro.html#availability"><span class="std std-ref">可用性</span></a>: Unix。</p>
</dd></dl>

<dl class="py data">
<dt id="os.EX_NOPERM">
<code class="sig-prename descclassname">os.</code><code class="sig-name descname">EX_NOPERM</code><a class="headerlink" href="#os.EX_NOPERM" title="永久链接至目标">¶</a></dt>
<dd><p>退出代码，表示没有足够的权限执行该操作（但不适用于文件系统问题）。</p>
<p class="availability"><a class="reference internal" href="intro.html#availability"><span class="std std-ref">可用性</span></a>: Unix。</p>
</dd></dl>

<dl class="py data">
<dt id="os.EX_CONFIG">
<code class="sig-prename descclassname">os.</code><code class="sig-name descname">EX_CONFIG</code><a class="headerlink" href="#os.EX_CONFIG" title="永久链接至目标">¶</a></dt>
<dd><p>退出代码，表示发生某种配置错误。</p>
<p class="availability"><a class="reference internal" href="intro.html#availability"><span class="std std-ref">可用性</span></a>: Unix。</p>
</dd></dl>

<dl class="py data">
<dt id="os.EX_NOTFOUND">
<code class="sig-prename descclassname">os.</code><code class="sig-name descname">EX_NOTFOUND</code><a class="headerlink" href="#os.EX_NOTFOUND" title="永久链接至目标">¶</a></dt>
<dd><p>退出代码，表示的内容类似于“找不到条目”。</p>
<p class="availability"><a class="reference internal" href="intro.html#availability"><span class="std std-ref">可用性</span></a>: Unix。</p>
</dd></dl>

<dl class="py function">
<dt id="os.fork">
<code class="sig-prename descclassname">os.</code><code class="sig-name descname">fork</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#os.fork" title="永久链接至目标">¶</a></dt>
<dd><p>Fork 出一个子进程。在子进程中返回 <code class="docutils literal notranslate"><span class="pre">0</span></code>，在父进程中返回子进程的进程号。如果发生错误，则抛出 <a class="reference internal" href="exceptions.html#OSError" title="OSError"><code class="xref py py-exc docutils literal notranslate"><span class="pre">OSError</span></code></a> 异常。</p>
<p>注意，当从线程中使用 <code class="docutils literal notranslate"><span class="pre">fork()</span></code> 时，某些平台（包括 FreeBSD &lt;= 6.3 和 Cygwin）存在已知问题。</p>
<p class="audit-hook">引发一个 <a class="reference internal" href="sys.html#auditing"><span class="std std-ref">审计事件</span></a> <code class="docutils literal notranslate"><span class="pre">os.fork</span></code>，没有附带参数。</p>
<div class="versionchanged">
<p><span class="versionmodified changed">在 3.8 版更改: </span>不再支持在子解释器中调用 <code class="docutils literal notranslate"><span class="pre">fork()</span></code> （将抛出 <a class="reference internal" href="exceptions.html#RuntimeError" title="RuntimeError"><code class="xref py py-exc docutils literal notranslate"><span class="pre">RuntimeError</span></code></a> 异常）。</p>
</div>
<div class="admonition warning">
<p class="admonition-title">警告</p>
<p>有关 SSL 模块与 fork() 结合的应用，请参阅 <a class="reference internal" href="ssl.html#module-ssl" title="ssl: TLS/SSL wrapper for socket objects"><code class="xref py py-mod docutils literal notranslate"><span class="pre">ssl</span></code></a>。</p>
</div>
<p class="availability"><a class="reference internal" href="intro.html#availability"><span class="std std-ref">可用性</span></a>: Unix。</p>
</dd></dl>

<dl class="py function">
<dt id="os.forkpty">
<code class="sig-prename descclassname">os.</code><code class="sig-name descname">forkpty</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#os.forkpty" title="永久链接至目标">¶</a></dt>
<dd><p>Fork 出一个子进程，使用新的伪终端作为子进程的控制终端。返回一对 <code class="docutils literal notranslate"><span class="pre">(pid,</span> <span class="pre">fd)</span></code>，其中 <em>pid</em> 在子进程中为 <code class="docutils literal notranslate"><span class="pre">0</span></code>，这是父进程中新子进程的进程号，而 <em>fd</em> 是伪终端主设备的文件描述符。对于更便于移植的方法，请使用 <a class="reference internal" href="pty.html#module-pty" title="pty: Pseudo-Terminal Handling for Unix. (Unix)"><code class="xref py py-mod docutils literal notranslate"><span class="pre">pty</span></code></a> 模块。如果发生错误，则抛出 <a class="reference internal" href="exceptions.html#OSError" title="OSError"><code class="xref py py-exc docutils literal notranslate"><span class="pre">OSError</span></code></a> 异常。</p>
<p class="audit-hook">引发一个 <a class="reference internal" href="sys.html#auditing"><span class="std std-ref">审计事件</span></a> <code class="docutils literal notranslate"><span class="pre">os.forkpty</span></code>，没有附带参数。</p>
<div class="versionchanged">
<p><span class="versionmodified changed">在 3.8 版更改: </span>不再支持在子解释器中调用 <code class="docutils literal notranslate"><span class="pre">forkpty()</span></code> （将抛出 <a class="reference internal" href="exceptions.html#RuntimeError" title="RuntimeError"><code class="xref py py-exc docutils literal notranslate"><span class="pre">RuntimeError</span></code></a> 异常）。</p>
</div>
<p class="availability"><a class="reference internal" href="intro.html#availability"><span class="std std-ref">可用性</span></a>: 某些 Unix。</p>
</dd></dl>

<dl class="py function">
<dt id="os.kill">
<code class="sig-prename descclassname">os.</code><code class="sig-name descname">kill</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">pid</span></em>, <em class="sig-param"><span class="n">sig</span></em><span class="sig-paren">)</span><a class="headerlink" href="#os.kill" title="永久链接至目标">¶</a></dt>
<dd><p id="index-36">将信号 <em>sig</em> 发送至进程 <em>pid</em>。特定平台上可用的信号常量定义在 <a class="reference internal" href="signal.html#module-signal" title="signal: Set handlers for asynchronous events."><code class="xref py py-mod docutils literal notranslate"><span class="pre">signal</span></code></a> 模块中。</p>
<p>Windows： <a class="reference internal" href="signal.html#signal.CTRL_C_EVENT" title="signal.CTRL_C_EVENT"><code class="xref py py-data docutils literal notranslate"><span class="pre">signal.CTRL_C_EVENT</span></code></a> 和 <a class="reference internal" href="signal.html#signal.CTRL_BREAK_EVENT" title="signal.CTRL_BREAK_EVENT"><code class="xref py py-data docutils literal notranslate"><span class="pre">signal.CTRL_BREAK_EVENT</span></code></a> 信号是特殊信号，只能发送给共享同一个控制台窗口的控制台进程，如某些子进程。<em>sig</em> 取任何其他值将导致该进程被 TerminateProcess API 无条件终止，且退出代码为 <em>sig</em>。Windows 版本的 <a class="reference internal" href="#os.kill" title="os.kill"><code class="xref py py-func docutils literal notranslate"><span class="pre">kill()</span></code></a> 还需要传入待结束进程的句柄。</p>
<p>另请参阅 <a class="reference internal" href="signal.html#signal.pthread_kill" title="signal.pthread_kill"><code class="xref py py-func docutils literal notranslate"><span class="pre">signal.pthread_kill()</span></code></a>。</p>
<p class="audit-hook">引发一个 <a class="reference internal" href="sys.html#auditing"><span class="std std-ref">审计事件</span></a> <code class="docutils literal notranslate"><span class="pre">os.kill</span></code>，附带参数 <code class="docutils literal notranslate"><span class="pre">pid</span></code>、<code class="docutils literal notranslate"><span class="pre">sig</span></code>。</p>
<div class="versionadded">
<p><span class="versionmodified added">3.2 新版功能: </span>Windows 支持。</p>
</div>
</dd></dl>

<dl class="py function">
<dt id="os.killpg">
<code class="sig-prename descclassname">os.</code><code class="sig-name descname">killpg</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">pgid</span></em>, <em class="sig-param"><span class="n">sig</span></em><span class="sig-paren">)</span><a class="headerlink" href="#os.killpg" title="永久链接至目标">¶</a></dt>
<dd><p id="index-37">将信号 <em>sig</em> 发送给进程组 <em>pgid</em>。</p>
<p class="audit-hook">引发一个 <a class="reference internal" href="sys.html#auditing"><span class="std std-ref">审计事件</span></a> <code class="docutils literal notranslate"><span class="pre">os.killpg</span></code>，附带参数 <code class="docutils literal notranslate"><span class="pre">pgid</span></code>、<code class="docutils literal notranslate"><span class="pre">sig</span></code>。</p>
<p class="availability"><a class="reference internal" href="intro.html#availability"><span class="std std-ref">可用性</span></a>: Unix。</p>
</dd></dl>

<dl class="py function">
<dt id="os.nice">
<code class="sig-prename descclassname">os.</code><code class="sig-name descname">nice</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">increment</span></em><span class="sig-paren">)</span><a class="headerlink" href="#os.nice" title="永久链接至目标">¶</a></dt>
<dd><p>将进程的优先级（nice 值）增加 <em>increment</em>，返回新的 nice 值。</p>
<p class="availability"><a class="reference internal" href="intro.html#availability"><span class="std std-ref">可用性</span></a>: Unix。</p>
</dd></dl>

<dl class="py function">
<dt id="os.pidfd_open">
<code class="sig-prename descclassname">os.</code><code class="sig-name descname">pidfd_open</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">pid</span></em>, <em class="sig-param"><span class="n">flags</span><span class="o">=</span><span class="default_value">0</span></em><span class="sig-paren">)</span><a class="headerlink" href="#os.pidfd_open" title="永久链接至目标">¶</a></dt>
<dd><p>返回一个文件描述符，它指向进程 <em>pid</em>。该描述符可用于管理进程，避免出现竞争和信号。<em>flags</em> 参数提供给将来扩展使用，当前没有定义标志值。</p>
<p>更多详细信息请参阅 <em class="manpage"><a class="manpage reference external" href="https://manpages.debian.org/pidfd_open(2)">pidfd_open(2)</a></em> 手册页。</p>
<p class="availability"><a class="reference internal" href="intro.html#availability"><span class="std std-ref">可用性</span></a>: Linux 5.3+。</p>
<div class="versionadded">
<p><span class="versionmodified added">3.9 新版功能.</span></p>
</div>
</dd></dl>

<dl class="py function">
<dt id="os.plock">
<code class="sig-prename descclassname">os.</code><code class="sig-name descname">plock</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">op</span></em><span class="sig-paren">)</span><a class="headerlink" href="#os.plock" title="永久链接至目标">¶</a></dt>
<dd><p>将程序段锁定到内存中。<em>op</em> 的值（定义在 <code class="docutils literal notranslate"><span class="pre">&lt;sys/lock.h&gt;</span></code> 中）决定了哪些段被锁定。</p>
<p class="availability"><a class="reference internal" href="intro.html#availability"><span class="std std-ref">可用性</span></a>: Unix。</p>
</dd></dl>

<dl class="py function">
<dt id="os.popen">
<code class="sig-prename descclassname">os.</code><code class="sig-name descname">popen</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">cmd</span></em>, <em class="sig-param"><span class="n">mode</span><span class="o">=</span><span class="default_value">'r'</span></em>, <em class="sig-param"><span class="n">buffering</span><span class="o">=</span><span class="default_value">- 1</span></em><span class="sig-paren">)</span><a class="headerlink" href="#os.popen" title="永久链接至目标">¶</a></dt>
<dd><p>打开一个管道，它通往 / 接受自命令 <em>cmd</em>。返回值是连接到管道的文件对象，根据 <em>mode</em> 是 <code class="docutils literal notranslate"><span class="pre">'r'</span></code> （默认）还是 <code class="docutils literal notranslate"><span class="pre">'w'</span></code> 决定该对象可以读取还是写入。<em>buffering</em> 参数与内置函数 <a class="reference internal" href="functions.html#open" title="open"><code class="xref py py-func docutils literal notranslate"><span class="pre">open()</span></code></a> 相应的参数含义相同。返回的文件对象只能读写文本字符串，不能是字节类型。</p>
<p>如果子进程成功退出，则 <code class="docutils literal notranslate"><span class="pre">close</span></code> 方法返回 <a class="reference internal" href="constants.html#None" title="None"><code class="xref py py-const docutils literal notranslate"><span class="pre">None</span></code></a>。如果发生错误，则返回子进程的返回码。在 POSIX 系统上，如果返回码为正，则它就是进程返回值左移一个字节后的值。如果返回码为负，则进程是被信号终止的，返回码取反后就是该信号。（例如，如果子进程被终止，则返回值可能是 <code class="docutils literal notranslate"><span class="pre">-</span> <span class="pre">signal.SIGKILL</span></code>。）在 Windows 系统上，返回值包含子进程的返回码（有符号整数）。</p>
<p>在 Unix 上，<a class="reference internal" href="#os.waitstatus_to_exitcode" title="os.waitstatus_to_exitcode"><code class="xref py py-func docutils literal notranslate"><span class="pre">waitstatus_to_exitcode()</span></code></a> 可以将 <code class="docutils literal notranslate"><span class="pre">close</span></code> 方法的返回值（即退出状态，不能是 <code class="docutils literal notranslate"><span class="pre">None</span></code>）转换为退出码。在 Windows 上，<code class="docutils literal notranslate"><span class="pre">close</span></code> 方法的结果直接就是退出码（或 <code class="docutils literal notranslate"><span class="pre">None</span></code> ）。</p>
<p>本方法是使用 <a class="reference internal" href="subprocess.html#subprocess.Popen" title="subprocess.Popen"><code class="xref py py-class docutils literal notranslate"><span class="pre">subprocess.Popen</span></code></a> 实现的，如需更强大的方法来管理和沟通子进程，请参阅该类的文档。</p>
</dd></dl>

<dl class="py function">
<dt id="os.posix_spawn">
<code class="sig-prename descclassname">os.</code><code class="sig-name descname">posix_spawn</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">path</span></em>, <em class="sig-param"><span class="n">argv</span></em>, <em class="sig-param"><span class="n">env</span></em>, <em class="sig-param"><span class="o">*</span></em>, <em class="sig-param"><span class="n">file_actions</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">setpgroup</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">resetids</span><span class="o">=</span><span class="default_value">False</span></em>, <em class="sig-param"><span class="n">setsid</span><span class="o">=</span><span class="default_value">False</span></em>, <em class="sig-param"><span class="n">setsigmask</span><span class="o">=</span><span class="default_value">()</span></em>, <em class="sig-param"><span class="n">setsigdef</span><span class="o">=</span><span class="default_value">()</span></em>, <em class="sig-param"><span class="n">scheduler</span><span class="o">=</span><span class="default_value">None</span></em><span class="sig-paren">)</span><a class="headerlink" href="#os.posix_spawn" title="永久链接至目标">¶</a></dt>
<dd><p>包装 <code class="xref c c-func docutils literal notranslate"><span class="pre">posix_spawn()</span></code> C 库 API，使其可以从 Python 调用。</p>
<p>大多数用户应使用 <a class="reference internal" href="subprocess.html#subprocess.run" title="subprocess.run"><code class="xref py py-func docutils literal notranslate"><span class="pre">subprocess.run()</span></code></a> 代替 <a class="reference internal" href="#os.posix_spawn" title="os.posix_spawn"><code class="xref py py-func docutils literal notranslate"><span class="pre">posix_spawn()</span></code></a>。</p>
<p>仅位置参数 (Positional-only arguments) <em>path</em>、<em>args</em> 和 <em>env</em> 与 <a class="reference internal" href="#os.execve" title="os.execve"><code class="xref py py-func docutils literal notranslate"><span class="pre">execve()</span></code></a> 中的类似。</p>
<p><em>path</em> 形参是可执行文件的路径，<em>path</em> 中应当包含目录。 使用 <a class="reference internal" href="#os.posix_spawnp" title="os.posix_spawnp"><code class="xref py py-func docutils literal notranslate"><span class="pre">posix_spawnp()</span></code></a> 可传入不带目录的可执行文件。</p>
<p><em>file_actions</em> 参数可以是由元组组成的序列，序列描述了对子进程中指定文件描述符采取的操作，这些操作会在 C 库实现的 <code class="xref c c-func docutils literal notranslate"><span class="pre">fork()</span></code> 和 <code class="xref c c-func docutils literal notranslate"><span class="pre">exec()</span></code> 步骤间完成。每个元组的第一个元素必须是下面列出的三个类型指示符之一，用于描述元组剩余的元素：</p>
<dl class="py data">
<dt id="os.POSIX_SPAWN_OPEN">
<code class="sig-prename descclassname">os.</code><code class="sig-name descname">POSIX_SPAWN_OPEN</code><a class="headerlink" href="#os.POSIX_SPAWN_OPEN" title="永久链接至目标">¶</a></dt>
<dd><p>(<code class="docutils literal notranslate"><span class="pre">os.POSIX_SPAWN_OPEN</span></code>, <em>fd</em>, <em>path</em>, <em>flags</em>, <em>mode</em>)</p>
<p>执行 <code class="docutils literal notranslate"><span class="pre">os.dup2(os.open(path,</span> <span class="pre">flags,</span> <span class="pre">mode),</span> <span class="pre">fd)</span></code>。</p>
</dd></dl>

<dl class="py data">
<dt id="os.POSIX_SPAWN_CLOSE">
<code class="sig-prename descclassname">os.</code><code class="sig-name descname">POSIX_SPAWN_CLOSE</code><a class="headerlink" href="#os.POSIX_SPAWN_CLOSE" title="永久链接至目标">¶</a></dt>
<dd><p>(<code class="docutils literal notranslate"><span class="pre">os.POSIX_SPAWN_CLOSE</span></code>, <em>fd</em>)</p>
<p>执行 <code class="docutils literal notranslate"><span class="pre">os.close(fd)</span></code>。</p>
</dd></dl>

<dl class="py data">
<dt id="os.POSIX_SPAWN_DUP2">
<code class="sig-prename descclassname">os.</code><code class="sig-name descname">POSIX_SPAWN_DUP2</code><a class="headerlink" href="#os.POSIX_SPAWN_DUP2" title="永久链接至目标">¶</a></dt>
<dd><p>(<code class="docutils literal notranslate"><span class="pre">os.POSIX_SPAWN_DUP2</span></code>, <em>fd</em>, <em>new_fd</em>)</p>
<p>执行 <code class="docutils literal notranslate"><span class="pre">os.dup2(fd,</span> <span class="pre">new_fd)</span></code>。</p>
</dd></dl>

<p>这些元组对应于 C 库 <code class="xref c c-func docutils literal notranslate"><span class="pre">posix_spawn_file_actions_addopen()</span></code>， <code class="xref c c-func docutils literal notranslate"><span class="pre">posix_spawn_file_actions_addclose()</span></code> 和 <code class="xref c c-func docutils literal notranslate"><span class="pre">posix_spawn_file_actions_adddup2()</span></code> API 调用，它们为调用 <code class="xref c c-func docutils literal notranslate"><span class="pre">posix_spawn()</span></code> 自身做准备。</p>
<p><em>setpgroup</em> 参数将子进程的进程组设置为指定值。如果指定值为 0，则子进程的进程组 ID 将与其进程 ID 相同。如果未设置 <em>setpgroup</em> 值，则子进程将继承父进程的进程组 ID。本参数对应于 C 库 <code class="xref c c-data docutils literal notranslate"><span class="pre">POSIX_SPAWN_SETPGROUP</span></code> 标志。</p>
<p>如果 <em>resetids</em> 参数为 <code class="docutils literal notranslate"><span class="pre">True</span></code>，则会将子进程的有效用户 ID 和有效组 ID 重置为父进程的实际用户 ID 和实际组 ID。如果该参数为 <code class="docutils literal notranslate"><span class="pre">False</span></code>，则子进程保留父进程的有效用户 ID 和有效组 ID。无论哪种情况，若在可执行文件上启用了 “设置用户 ID” 和 “设置组 ID” 权限位，它们将覆盖有效用户 ID 和有效组 ID 的设置。本参数对应于 C 库 <code class="xref c c-data docutils literal notranslate"><span class="pre">POSIX_SPAWN_RESETIDS</span></code> 标志。</p>
<p>如果 <em>setsid</em> 参数为 <code class="docutils literal notranslate"><span class="pre">True</span></code>，它将为 <cite>posix_spawn</cite> 新建一个会话 ID。<em>setsid</em> 需要 <code class="xref c c-data docutils literal notranslate"><span class="pre">POSIX_SPAWN_SETSID</span></code> 或 <code class="xref c c-data docutils literal notranslate"><span class="pre">POSIX_SPAWN_SETSID_NP</span></code> 标志，否则会抛出 <a class="reference internal" href="exceptions.html#NotImplementedError" title="NotImplementedError"><code class="xref py py-exc docutils literal notranslate"><span class="pre">NotImplementedError</span></code></a> 异常。</p>
<p><em>setsigmask</em> 参数将信号掩码设置为指定的信号集合。如果未使用该参数，则子进程将继承父进程的信号掩码。本参数对应于 C 库 <code class="xref c c-data docutils literal notranslate"><span class="pre">POSIX_SPAWN_SETSIGMASK</span></code> 标志。</p>
<p><em>sigdef</em> 参数将集合中所有信号的操作全部重置为默认。本参数对应于 C 库 <code class="xref c c-data docutils literal notranslate"><span class="pre">POSIX_SPAWN_SETSIGDEF</span></code> 标志。</p>
<p><em>scheduler</em> 参数必须是一个元组，其中包含调度器策略（可选）以及携带了调度器参数的 <a class="reference internal" href="#os.sched_param" title="os.sched_param"><code class="xref py py-class docutils literal notranslate"><span class="pre">sched_param</span></code></a> 实例。在调度器策略所在位置为 <code class="docutils literal notranslate"><span class="pre">None</span></code> 表示未提供该值。本参数是 C 库 <code class="xref c c-data docutils literal notranslate"><span class="pre">POSIX_SPAWN_SETSCHEDPARAM</span></code> 和 <code class="xref c c-data docutils literal notranslate"><span class="pre">POSIX_SPAWN_SETSCHEDULER</span></code> 标志的组合。</p>
<p class="audit-hook">引发一个 <a class="reference internal" href="sys.html#auditing"><span class="std std-ref">审计事件</span></a> <code class="docutils literal notranslate"><span class="pre">os.posix_spawn</span></code>，附带参数 <code class="docutils literal notranslate"><span class="pre">path</span></code>、<code class="docutils literal notranslate"><span class="pre">argv</span></code>、<code class="docutils literal notranslate"><span class="pre">env</span></code>。</p>
<div class="versionadded">
<p><span class="versionmodified added">3.8 新版功能.</span></p>
</div>
<p class="availability"><a class="reference internal" href="intro.html#availability"><span class="std std-ref">可用性</span></a>: Unix。</p>
</dd></dl>

<dl class="py function">
<dt id="os.posix_spawnp">
<code class="sig-prename descclassname">os.</code><code class="sig-name descname">posix_spawnp</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">path</span></em>, <em class="sig-param"><span class="n">argv</span></em>, <em class="sig-param"><span class="n">env</span></em>, <em class="sig-param"><span class="o">*</span></em>, <em class="sig-param"><span class="n">file_actions</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">setpgroup</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">resetids</span><span class="o">=</span><span class="default_value">False</span></em>, <em class="sig-param"><span class="n">setsid</span><span class="o">=</span><span class="default_value">False</span></em>, <em class="sig-param"><span class="n">setsigmask</span><span class="o">=</span><span class="default_value">()</span></em>, <em class="sig-param"><span class="n">setsigdef</span><span class="o">=</span><span class="default_value">()</span></em>, <em class="sig-param"><span class="n">scheduler</span><span class="o">=</span><span class="default_value">None</span></em><span class="sig-paren">)</span><a class="headerlink" href="#os.posix_spawnp" title="永久链接至目标">¶</a></dt>
<dd><p>包装 <code class="xref c c-func docutils literal notranslate"><span class="pre">posix_spawnp()</span></code> C 库 API，使其可以从 Python 调用。</p>
<p>与 <a class="reference internal" href="#os.posix_spawn" title="os.posix_spawn"><code class="xref py py-func docutils literal notranslate"><span class="pre">posix_spawn()</span></code></a> 相似，但是系统会在 <span class="target" id="index-95"></span><code class="xref std std-envvar docutils literal notranslate"><span class="pre">PATH</span></code> 环境变量指定的目录列表中搜索可执行文件 <em>executable</em> （与 <code class="docutils literal notranslate"><span class="pre">execvp(3)</span></code> 相同）。</p>
<p class="audit-hook">引发一个 <a class="reference internal" href="sys.html#auditing"><span class="std std-ref">审计事件</span></a> <code class="docutils literal notranslate"><span class="pre">os.posix_spawn</span></code>，附带参数 <code class="docutils literal notranslate"><span class="pre">path</span></code>、<code class="docutils literal notranslate"><span class="pre">argv</span></code>、<code class="docutils literal notranslate"><span class="pre">env</span></code>。</p>
<div class="versionadded">
<p><span class="versionmodified added">3.8 新版功能.</span></p>
</div>
<p class="availability"><a class="reference internal" href="intro.html#availability"><span class="std std-ref">可用性</span></a>: 请参阅 <a class="reference internal" href="#os.posix_spawn" title="os.posix_spawn"><code class="xref py py-func docutils literal notranslate"><span class="pre">posix_spawn()</span></code></a> 文档。</p>
</dd></dl>

<dl class="py function">
<dt id="os.register_at_fork">
<code class="sig-prename descclassname">os.</code><code class="sig-name descname">register_at_fork</code><span class="sig-paren">(</span><em class="sig-param"><span class="o">*</span></em>, <em class="sig-param"><span class="n">before</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">after_in_parent</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">after_in_child</span><span class="o">=</span><span class="default_value">None</span></em><span class="sig-paren">)</span><a class="headerlink" href="#os.register_at_fork" title="永久链接至目标">¶</a></dt>
<dd><p>注册可调用对象，在使用 <a class="reference internal" href="#os.fork" title="os.fork"><code class="xref py py-func docutils literal notranslate"><span class="pre">os.fork()</span></code></a> 或类似的进程克隆 API 派生新的子进程时，这些对象会运行。参数是可选的，且为仅关键字 (Keyword-only) 参数。每个参数指定一个不同的调用点。</p>
<ul class="simple">
<li><p><em>before</em> 是一个函数，在 fork 子进程前调用。</p></li>
<li><p><em>after_in_parent</em> 是一个函数，在 fork 子进程后从父进程调用。</p></li>
<li><p><em>after_in_child</em> 是一个函数，从子进程中调用。</p></li>
</ul>
<p>只有希望控制权回到 Python 解释器时，才进行这些调用。典型的 <a class="reference internal" href="subprocess.html#module-subprocess" title="subprocess: Subprocess management."><code class="xref py py-mod docutils literal notranslate"><span class="pre">子进程</span></code></a> 启动时不会触发它们，因为子进程不会重新进入解释器。</p>
<p>在注册的函数中，用于 fork 前运行的函数将按与注册相反的顺序调用。用于 fork 后（从父进程或子进程）运行的函数按注册顺序调用。</p>
<p>注意，第三方 C 代码的 <code class="xref c c-func docutils literal notranslate"><span class="pre">fork()</span></code> 调用可能不会调用这些函数，除非它显式调用了 <a class="reference internal" href="../c-api/sys.html#c.PyOS_BeforeFork" title="PyOS_BeforeFork"><code class="xref c c-func docutils literal notranslate"><span class="pre">PyOS_BeforeFork()</span></code></a>、<a class="reference internal" href="../c-api/sys.html#c.PyOS_AfterFork_Parent" title="PyOS_AfterFork_Parent"><code class="xref c c-func docutils literal notranslate"><span class="pre">PyOS_AfterFork_Parent()</span></code></a> 和 <a class="reference internal" href="../c-api/sys.html#c.PyOS_AfterFork_Child" title="PyOS_AfterFork_Child"><code class="xref c c-func docutils literal notranslate"><span class="pre">PyOS_AfterFork_Child()</span></code></a>。</p>
<p>函数注册后无法注销。</p>
<p class="availability"><a class="reference internal" href="intro.html#availability"><span class="std std-ref">可用性</span></a>: Unix。</p>
<div class="versionadded">
<p><span class="versionmodified added">3.7 新版功能.</span></p>
</div>
</dd></dl>

<dl class="py function">
<dt id="os.spawnl">
<code class="sig-prename descclassname">os.</code><code class="sig-name descname">spawnl</code><span class="sig-paren">(</span><em class="sig-param">mode</em>, <em class="sig-param">path</em>, <em class="sig-param">...</em><span class="sig-paren">)</span><a class="headerlink" href="#os.spawnl" title="永久链接至目标">¶</a></dt>
<dt id="os.spawnle">
<code class="sig-prename descclassname">os.</code><code class="sig-name descname">spawnle</code><span class="sig-paren">(</span><em class="sig-param">mode</em>, <em class="sig-param">path</em>, <em class="sig-param">...</em>, <em class="sig-param">env</em><span class="sig-paren">)</span><a class="headerlink" href="#os.spawnle" title="永久链接至目标">¶</a></dt>
<dt id="os.spawnlp">
<code class="sig-prename descclassname">os.</code><code class="sig-name descname">spawnlp</code><span class="sig-paren">(</span><em class="sig-param">mode</em>, <em class="sig-param">file</em>, <em class="sig-param">...</em><span class="sig-paren">)</span><a class="headerlink" href="#os.spawnlp" title="永久链接至目标">¶</a></dt>
<dt id="os.spawnlpe">
<code class="sig-prename descclassname">os.</code><code class="sig-name descname">spawnlpe</code><span class="sig-paren">(</span><em class="sig-param">mode</em>, <em class="sig-param">file</em>, <em class="sig-param">...</em>, <em class="sig-param">env</em><span class="sig-paren">)</span><a class="headerlink" href="#os.spawnlpe" title="永久链接至目标">¶</a></dt>
<dt id="os.spawnv">
<code class="sig-prename descclassname">os.</code><code class="sig-name descname">spawnv</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">mode</span></em>, <em class="sig-param"><span class="n">path</span></em>, <em class="sig-param"><span class="n">args</span></em><span class="sig-paren">)</span><a class="headerlink" href="#os.spawnv" title="永久链接至目标">¶</a></dt>
<dt id="os.spawnve">
<code class="sig-prename descclassname">os.</code><code class="sig-name descname">spawnve</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">mode</span></em>, <em class="sig-param"><span class="n">path</span></em>, <em class="sig-param"><span class="n">args</span></em>, <em class="sig-param"><span class="n">env</span></em><span class="sig-paren">)</span><a class="headerlink" href="#os.spawnve" title="永久链接至目标">¶</a></dt>
<dt id="os.spawnvp">
<code class="sig-prename descclassname">os.</code><code class="sig-name descname">spawnvp</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">mode</span></em>, <em class="sig-param"><span class="n">file</span></em>, <em class="sig-param"><span class="n">args</span></em><span class="sig-paren">)</span><a class="headerlink" href="#os.spawnvp" title="永久链接至目标">¶</a></dt>
<dt id="os.spawnvpe">
<code class="sig-prename descclassname">os.</code><code class="sig-name descname">spawnvpe</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">mode</span></em>, <em class="sig-param"><span class="n">file</span></em>, <em class="sig-param"><span class="n">args</span></em>, <em class="sig-param"><span class="n">env</span></em><span class="sig-paren">)</span><a class="headerlink" href="#os.spawnvpe" title="永久链接至目标">¶</a></dt>
<dd><p>在新进程中执行程序 <em>path</em>。</p>
<p>（注意，<a class="reference internal" href="subprocess.html#module-subprocess" title="subprocess: Subprocess management."><code class="xref py py-mod docutils literal notranslate"><span class="pre">subprocess</span></code></a> 模块提供了更强大的工具来生成新进程并跟踪执行结果，使用该模块比使用这些函数更好。尤其应当检查 <a class="reference internal" href="subprocess.html#subprocess-replacements"><span class="std std-ref">使用 subprocess 模块替换旧函数</span></a> 部分。）</p>
<p><em>mode</em> 为 <a class="reference internal" href="#os.P_NOWAIT" title="os.P_NOWAIT"><code class="xref py py-const docutils literal notranslate"><span class="pre">P_NOWAIT</span></code></a> 时，本函数返回新进程的进程号。<em>mode</em> 为 <a class="reference internal" href="#os.P_WAIT" title="os.P_WAIT"><code class="xref py py-const docutils literal notranslate"><span class="pre">P_WAIT</span></code></a> 时，如果进程正常退出，返回退出代码，如果被终止，返回 <code class="docutils literal notranslate"><span class="pre">-signal</span></code>，其中 <em>signal</em> 是终止进程的信号。在 Windows 上，进程号实际上是进程句柄，因此可以与 <a class="reference internal" href="#os.waitpid" title="os.waitpid"><code class="xref py py-func docutils literal notranslate"><span class="pre">waitpid()</span></code></a> 函数一起使用。</p>
<p>注意在 VxWorks 上，新进程被终止时，本函数不会返回 <code class="docutils literal notranslate"><span class="pre">-signal</span></code>，而是会抛出 OSError 异常。</p>
<p><a class="reference internal" href="#os.spawnl" title="os.spawnl"><code class="xref py py-func docutils literal notranslate"><span class="pre">spawn*</span></code></a> 函数的 &quot;l&quot; 和 &quot;v&quot; 变体不同在于命令行参数的传递方式。如果在编码时固定了参数数量，则 &quot;l&quot; 变体可能是最方便的，各参数作为 <code class="xref py py-func docutils literal notranslate"><span class="pre">spawnl*()</span></code> 函数的附加参数传入即可。当参数数量可变时，&quot;v&quot; 变体更方便，参数以列表或元组的形式作为 <em>args</em> 参数传递。在这两种情况下，子进程的第一个参数都必须是即将运行的命令名称。</p>
<p>结尾包含第二个 &quot;p&quot; 的变体（<a class="reference internal" href="#os.spawnlp" title="os.spawnlp"><code class="xref py py-func docutils literal notranslate"><span class="pre">spawnlp()</span></code></a>、<a class="reference internal" href="#os.spawnlpe" title="os.spawnlpe"><code class="xref py py-func docutils literal notranslate"><span class="pre">spawnlpe()</span></code></a>、<a class="reference internal" href="#os.spawnvp" title="os.spawnvp"><code class="xref py py-func docutils literal notranslate"><span class="pre">spawnvp()</span></code></a> 和 <a class="reference internal" href="#os.spawnvpe" title="os.spawnvpe"><code class="xref py py-func docutils literal notranslate"><span class="pre">spawnvpe()</span></code></a>）将使用 <span class="target" id="index-96"></span><code class="xref std std-envvar docutils literal notranslate"><span class="pre">PATH</span></code> 环境变量来查找程序 <em>file</em>。当环境被替换时（使用下一段讨论的 <a class="reference internal" href="#os.spawnl" title="os.spawnl"><code class="xref py py-func docutils literal notranslate"><span class="pre">spawn*e</span></code></a> 变体之一），<span class="target" id="index-97"></span><code class="xref std std-envvar docutils literal notranslate"><span class="pre">PATH</span></code> 变量将来自于新环境。其他变体 <a class="reference internal" href="#os.spawnl" title="os.spawnl"><code class="xref py py-func docutils literal notranslate"><span class="pre">spawnl()</span></code></a>、<a class="reference internal" href="#os.spawnle" title="os.spawnle"><code class="xref py py-func docutils literal notranslate"><span class="pre">spawnle()</span></code></a>、<a class="reference internal" href="#os.spawnv" title="os.spawnv"><code class="xref py py-func docutils literal notranslate"><span class="pre">spawnv()</span></code></a> 和 <a class="reference internal" href="#os.spawnve" title="os.spawnve"><code class="xref py py-func docutils literal notranslate"><span class="pre">spawnve()</span></code></a> 不使用 <span class="target" id="index-98"></span><code class="xref std std-envvar docutils literal notranslate"><span class="pre">PATH</span></code> 变量来查找程序，因此 <em>path</em> 必须包含正确的绝对或相对路径。</p>
<p>对于 <a class="reference internal" href="#os.spawnle" title="os.spawnle"><code class="xref py py-func docutils literal notranslate"><span class="pre">spawnle()</span></code></a>、<a class="reference internal" href="#os.spawnlpe" title="os.spawnlpe"><code class="xref py py-func docutils literal notranslate"><span class="pre">spawnlpe()</span></code></a>、<a class="reference internal" href="#os.spawnve" title="os.spawnve"><code class="xref py py-func docutils literal notranslate"><span class="pre">spawnve()</span></code></a> 和 <a class="reference internal" href="#os.spawnvpe" title="os.spawnvpe"><code class="xref py py-func docutils literal notranslate"><span class="pre">spawnvpe()</span></code></a> （都以 &quot;e&quot; 结尾），<em>env</em> 参数是一个映射，用于定义新进程的环境变量（代替当前进程的环境变量）。而函数 <a class="reference internal" href="#os.spawnl" title="os.spawnl"><code class="xref py py-func docutils literal notranslate"><span class="pre">spawnl()</span></code></a>、<a class="reference internal" href="#os.spawnlp" title="os.spawnlp"><code class="xref py py-func docutils literal notranslate"><span class="pre">spawnlp()</span></code></a>、<a class="reference internal" href="#os.spawnv" title="os.spawnv"><code class="xref py py-func docutils literal notranslate"><span class="pre">spawnv()</span></code></a> 和 <a class="reference internal" href="#os.spawnvp" title="os.spawnvp"><code class="xref py py-func docutils literal notranslate"><span class="pre">spawnvp()</span></code></a> 会将当前进程的环境变量过继给新进程。注意，<em>env</em> 字典中的键和值必须是字符串。无效的键或值将导致函数出错，返回值为 <code class="docutils literal notranslate"><span class="pre">127</span></code>。</p>
<p>例如，以下对 <a class="reference internal" href="#os.spawnlp" title="os.spawnlp"><code class="xref py py-func docutils literal notranslate"><span class="pre">spawnlp()</span></code></a> 和 <a class="reference internal" href="#os.spawnvpe" title="os.spawnvpe"><code class="xref py py-func docutils literal notranslate"><span class="pre">spawnvpe()</span></code></a> 的调用是等效的:</p>
<div class="highlight-python3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">os</span>
<span class="n">os</span><span class="o">.</span><span class="n">spawnlp</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">P_WAIT</span><span class="p">,</span> <span class="s1">&#39;cp&#39;</span><span class="p">,</span> <span class="s1">&#39;cp&#39;</span><span class="p">,</span> <span class="s1">&#39;index.html&#39;</span><span class="p">,</span> <span class="s1">&#39;/dev/null&#39;</span><span class="p">)</span>

<span class="n">L</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;cp&#39;</span><span class="p">,</span> <span class="s1">&#39;index.html&#39;</span><span class="p">,</span> <span class="s1">&#39;/dev/null&#39;</span><span class="p">]</span>
<span class="n">os</span><span class="o">.</span><span class="n">spawnvpe</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">P_WAIT</span><span class="p">,</span> <span class="s1">&#39;cp&#39;</span><span class="p">,</span> <span class="n">L</span><span class="p">,</span> <span class="n">os</span><span class="o">.</span><span class="n">environ</span><span class="p">)</span>
</pre></div>
</div>
<p class="audit-hook">引发一个 <a class="reference internal" href="sys.html#auditing"><span class="std std-ref">审计事件</span></a> <code class="docutils literal notranslate"><span class="pre">os.spawn</span></code>，附带参数 <code class="docutils literal notranslate"><span class="pre">mode</span></code>、<code class="docutils literal notranslate"><span class="pre">path</span></code>、<code class="docutils literal notranslate"><span class="pre">args</span></code>、<code class="docutils literal notranslate"><span class="pre">env</span></code>。</p>
<p class="availability"><a class="reference internal" href="intro.html#availability"><span class="std std-ref">可用性</span></a>: Unix, Windows。<a class="reference internal" href="#os.spawnlp" title="os.spawnlp"><code class="xref py py-func docutils literal notranslate"><span class="pre">spawnlp()</span></code></a>、<a class="reference internal" href="#os.spawnlpe" title="os.spawnlpe"><code class="xref py py-func docutils literal notranslate"><span class="pre">spawnlpe()</span></code></a>、<a class="reference internal" href="#os.spawnvp" title="os.spawnvp"><code class="xref py py-func docutils literal notranslate"><span class="pre">spawnvp()</span></code></a> 和 <a class="reference internal" href="#os.spawnvpe" title="os.spawnvpe"><code class="xref py py-func docutils literal notranslate"><span class="pre">spawnvpe()</span></code></a> 在 Windows 上不可用。<a class="reference internal" href="#os.spawnle" title="os.spawnle"><code class="xref py py-func docutils literal notranslate"><span class="pre">spawnle()</span></code></a> 和 <a class="reference internal" href="#os.spawnve" title="os.spawnve"><code class="xref py py-func docutils literal notranslate"><span class="pre">spawnve()</span></code></a> 在 Windows 上不是线程安全的，建议使用 <a class="reference internal" href="subprocess.html#module-subprocess" title="subprocess: Subprocess management."><code class="xref py py-mod docutils literal notranslate"><span class="pre">subprocess</span></code></a> 模块替代。</p>
<div class="versionchanged">
<p><span class="versionmodified changed">在 3.6 版更改: </span>接受一个 <a class="reference internal" href="../glossary.html#term-path-like-object"><span class="xref std std-term">path-like object</span></a>。</p>
</div>
</dd></dl>

<dl class="py data">
<dt id="os.P_NOWAIT">
<code class="sig-prename descclassname">os.</code><code class="sig-name descname">P_NOWAIT</code><a class="headerlink" href="#os.P_NOWAIT" title="永久链接至目标">¶</a></dt>
<dt id="os.P_NOWAITO">
<code class="sig-prename descclassname">os.</code><code class="sig-name descname">P_NOWAITO</code><a class="headerlink" href="#os.P_NOWAITO" title="永久链接至目标">¶</a></dt>
<dd><p><a class="reference internal" href="#os.spawnl" title="os.spawnl"><code class="xref py py-func docutils literal notranslate"><span class="pre">spawn*</span></code></a> 系列函数的 <em>mode</em> 参数的可取值。如果给出这些值中的任何一个，则 <code class="xref py py-func docutils literal notranslate"><span class="pre">spawn*()</span></code> 函数将在创建新进程后立即返回，且返回值为进程号。</p>
<p class="availability"><a class="reference internal" href="intro.html#availability"><span class="std std-ref">可用性</span></a>: Unix, Windows。</p>
</dd></dl>

<dl class="py data">
<dt id="os.P_WAIT">
<code class="sig-prename descclassname">os.</code><code class="sig-name descname">P_WAIT</code><a class="headerlink" href="#os.P_WAIT" title="永久链接至目标">¶</a></dt>
<dd><p><a class="reference internal" href="#os.spawnl" title="os.spawnl"><code class="xref py py-func docutils literal notranslate"><span class="pre">spawn*</span></code></a> 系列函数的 <em>mode</em> 参数的可取值。如果将 <em>mode</em> 指定为该值，则 <code class="xref py py-func docutils literal notranslate"><span class="pre">spawn*()</span></code> 函数将在新进程运行完毕后返回，运行成功则返回进程的退出代码，被信号终止则返回 <code class="docutils literal notranslate"><span class="pre">-signal</span></code>。</p>
<p class="availability"><a class="reference internal" href="intro.html#availability"><span class="std std-ref">可用性</span></a>: Unix, Windows。</p>
</dd></dl>

<dl class="py data">
<dt id="os.P_DETACH">
<code class="sig-prename descclassname">os.</code><code class="sig-name descname">P_DETACH</code><a class="headerlink" href="#os.P_DETACH" title="永久链接至目标">¶</a></dt>
<dt id="os.P_OVERLAY">
<code class="sig-prename descclassname">os.</code><code class="sig-name descname">P_OVERLAY</code><a class="headerlink" href="#os.P_OVERLAY" title="永久链接至目标">¶</a></dt>
<dd><p><a class="reference internal" href="#os.spawnl" title="os.spawnl"><code class="xref py py-func docutils literal notranslate"><span class="pre">spawn*</span></code></a> 系列函数的 <em>mode</em> 参数的可取值。它们比上面列出的值可移植性差。<a class="reference internal" href="#os.P_DETACH" title="os.P_DETACH"><code class="xref py py-const docutils literal notranslate"><span class="pre">P_DETACH</span></code></a> 与 <a class="reference internal" href="#os.P_NOWAIT" title="os.P_NOWAIT"><code class="xref py py-const docutils literal notranslate"><span class="pre">P_NOWAIT</span></code></a> 相似，但是新进程会与父进程的控制台脱离。使用 <a class="reference internal" href="#os.P_OVERLAY" title="os.P_OVERLAY"><code class="xref py py-const docutils literal notranslate"><span class="pre">P_OVERLAY</span></code></a> 则会替换当前进程，<a class="reference internal" href="#os.spawnl" title="os.spawnl"><code class="xref py py-func docutils literal notranslate"><span class="pre">spawn*</span></code></a> 函数将不会返回。</p>
<p class="availability"><a class="reference internal" href="intro.html#availability"><span class="std std-ref">可用性</span></a>: Windows。</p>
</dd></dl>

<dl class="py function">
<dt id="os.startfile">
<code class="sig-prename descclassname">os.</code><code class="sig-name descname">startfile</code><span class="sig-paren">(</span><em class="sig-param">path</em><span class="optional">[</span>, <em class="sig-param">operation</em><span class="optional">]</span><span class="optional">[</span>, <em class="sig-param">arguments</em><span class="optional">]</span><span class="optional">[</span>, <em class="sig-param">cwd</em><span class="optional">]</span><span class="optional">[</span>, <em class="sig-param">show_cmd</em><span class="optional">]</span><span class="sig-paren">)</span><a class="headerlink" href="#os.startfile" title="永久链接至目标">¶</a></dt>
<dd><p>使用已关联的应用程序打开文件。</p>
<p>当 <em>operation</em> 未指定或指定为 <code class="docutils literal notranslate"><span class="pre">'open'</span></code> 时，这类似于在 Windows 资源管理器中双击文件，或在交互式命令行中将文件名作为 <strong class="program">start</strong> 命令的参数：通过扩展名相关联的应用程序（如果有）打开文件。</p>
<p>当指定另一个 <em>operation</em> 时，它必须是一个“命令动词” (&quot;command verb&quot;)，该词指定对文件执行的操作。Microsoft 文档中的常用动词有 <code class="docutils literal notranslate"><span class="pre">'print'</span></code> 和 <code class="docutils literal notranslate"><span class="pre">'edit'</span></code> （用于文件），以及 <code class="docutils literal notranslate"><span class="pre">'explore'</span></code> 和 <code class="docutils literal notranslate"><span class="pre">'find'</span></code> （用于目录）。</p>
<p>在启动某个应用程序时，<em>arguments</em> 将作为一个字符串传入。若是打开某个文档，此参数可能没什么效果。</p>
<p>默认工作目录是继承而来的，但可以通过 <em>cwd</em> 参数进行覆盖。且应为绝对路径。相对路径 <em>path</em> 将据此参数进行解析。</p>
<p><em>show_cmd</em> 可用于覆盖默认的窗口样式。是否生效则取决于被启动的应用程序。应为 Win32 函数 <code class="xref c c-func docutils literal notranslate"><span class="pre">ShellExecute()</span></code> 所支持的整数值。</p>
<p>在关联的应用程序启动后，<a class="reference internal" href="#os.startfile" title="os.startfile"><code class="xref py py-func docutils literal notranslate"><span class="pre">startfile()</span></code></a> 就会立即返回。 没有提供等待应用程序关闭的选项，也没有办法获得应用程序的退出状态。 <em>path</em> 形参是基于当前目录或 <em>cwd</em> 的相对路径。 如果要使用绝对路径，请确保第一个字符不为斜杠 (<code class="docutils literal notranslate"><span class="pre">'/'</span></code>) 。 请用 <a class="reference internal" href="pathlib.html#module-pathlib" title="pathlib: Object-oriented filesystem paths"><code class="xref py py-mod docutils literal notranslate"><span class="pre">pathlib</span></code></a> 或 <a class="reference internal" href="os.path.html#os.path.normpath" title="os.path.normpath"><code class="xref py py-func docutils literal notranslate"><span class="pre">os.path.normpath()</span></code></a> 函数来保证路径已按照 Win32 的要求进行了正确的编码。</p>
<p>为了减少解释器的启动开销，直到第一次调用本函数后，才解析 Win32 <code class="xref c c-func docutils literal notranslate"><span class="pre">ShellExecute()</span></code> 函数。如果无法解析该函数​​，则抛出 <a class="reference internal" href="exceptions.html#NotImplementedError" title="NotImplementedError"><code class="xref py py-exc docutils literal notranslate"><span class="pre">NotImplementedError</span></code></a> 异常。</p>
<p class="audit-hook">引发一个 <a class="reference internal" href="sys.html#auditing"><span class="std std-ref">审计事件</span></a> <code class="docutils literal notranslate"><span class="pre">os.startfile</span></code>，附带参数 <code class="docutils literal notranslate"><span class="pre">path</span></code>、<code class="docutils literal notranslate"><span class="pre">operation</span></code>。</p>
<p class="audit-hook">引发一条 <a class="reference internal" href="sys.html#auditing"><span class="std std-ref">审计事件</span></a> <code class="docutils literal notranslate"><span class="pre">os.startfile/2</span></code>，附带参数为 <code class="docutils literal notranslate"><span class="pre">path</span></code>、<code class="docutils literal notranslate"><span class="pre">operation</span></code>、<code class="docutils literal notranslate"><span class="pre">arguments</span></code>、<code class="docutils literal notranslate"><span class="pre">cwd</span></code>、<code class="docutils literal notranslate"><span class="pre">show_cmd</span></code>。</p>
<p class="availability"><a class="reference internal" href="intro.html#availability"><span class="std std-ref">可用性</span></a>: Windows。</p>
<div class="versionchanged">
<p><span class="versionmodified changed">在 3.10 版更改: </span>加入了 <em>arguments</em>、<em>cwd</em> 和 <em>show_cmd</em> 参数，以及 <code class="docutils literal notranslate"><span class="pre">os.startfile/2</span></code> 审计事件。</p>
</div>
</dd></dl>

<dl class="py function">
<dt id="os.system">
<code class="sig-prename descclassname">os.</code><code class="sig-name descname">system</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">command</span></em><span class="sig-paren">)</span><a class="headerlink" href="#os.system" title="永久链接至目标">¶</a></dt>
<dd><p>在子外壳程序中执行此命令（一个字符串）。 这是通过调用标准 C 函数 <code class="xref c c-func docutils literal notranslate"><span class="pre">system()</span></code> 来实现的，并受到同样的限制。 对 <a class="reference internal" href="sys.html#sys.stdin" title="sys.stdin"><code class="xref py py-data docutils literal notranslate"><span class="pre">sys.stdin</span></code></a> 的更改等不会反映在所执行命令的环境中。 如果 <em>command</em> 生成了任何输出，它将被发送到解释器的标准输出流。 C 标准没有指明这个 C 函数返回值的含义，因此这个 Python 函数的返回值取决于具体系统。</p>
<p>在 Unix 上，返回值为进程的退出状态，以针对 <a class="reference internal" href="#os.wait" title="os.wait"><code class="xref py py-func docutils literal notranslate"><span class="pre">wait()</span></code></a> 而指定的格式进行编码。</p>
<p>在 Windows 上，返回值是运行 <em>command</em> 后系统 Shell 返回的值。该 Shell 由 Windows 环境变量 <span class="target" id="index-99"></span><code class="xref std std-envvar docutils literal notranslate"><span class="pre">COMSPEC</span></code>: 给出：通常是 <strong class="program">cmd.exe</strong>，它会返回命令的退出状态。在使用非原生 Shell 的系统上，请查阅 Shell 的文档。</p>
<p><a class="reference internal" href="subprocess.html#module-subprocess" title="subprocess: Subprocess management."><code class="xref py py-mod docutils literal notranslate"><span class="pre">subprocess</span></code></a> 模块提供了更强大的工具来生成新进程并跟踪执行结果，使用该模块比使用本函数更好。参阅 <a class="reference internal" href="subprocess.html#module-subprocess" title="subprocess: Subprocess management."><code class="xref py py-mod docutils literal notranslate"><span class="pre">subprocess</span></code></a> 文档中的 <a class="reference internal" href="subprocess.html#subprocess-replacements"><span class="std std-ref">使用 subprocess 模块替换旧函数</span></a> 部分以获取有用的帮助。</p>
<p>在 Unix 上，<a class="reference internal" href="#os.waitstatus_to_exitcode" title="os.waitstatus_to_exitcode"><code class="xref py py-func docutils literal notranslate"><span class="pre">waitstatus_to_exitcode()</span></code></a> 可以将返回值（即退出状态）转换为退出码。在 Windows 上，返回值就是退出码。</p>
<p class="audit-hook">引发一个 <a class="reference internal" href="sys.html#auditing"><span class="std std-ref">审计事件</span></a> <code class="docutils literal notranslate"><span class="pre">os.system</span></code>，附带参数 <code class="docutils literal notranslate"><span class="pre">command</span></code>。</p>
<p class="availability"><a class="reference internal" href="intro.html#availability"><span class="std std-ref">可用性</span></a>: Unix, Windows。</p>
</dd></dl>

<dl class="py function">
<dt id="os.times">
<code class="sig-prename descclassname">os.</code><code class="sig-name descname">times</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#os.times" title="永久链接至目标">¶</a></dt>
<dd><p>返回当前的全局进程时间。返回值是一个有 5 个属性的对象：</p>
<ul class="simple">
<li><p><code class="xref py py-attr docutils literal notranslate"><span class="pre">user</span></code> - 用户时间</p></li>
<li><p><code class="xref py py-attr docutils literal notranslate"><span class="pre">system</span></code> - 系统时间</p></li>
<li><p><code class="xref py py-attr docutils literal notranslate"><span class="pre">children_user</span></code> - 所有子进程的用户时间</p></li>
<li><p><code class="xref py py-attr docutils literal notranslate"><span class="pre">children_system</span></code> - 所有子进程的系统时间</p></li>
<li><p><code class="xref py py-attr docutils literal notranslate"><span class="pre">elapsed</span></code> - 从过去的固定时间点起，经过的真实时间</p></li>
</ul>
<p>为了向后兼容，该对象的行为也类似于五元组，按照 <code class="xref py py-attr docutils literal notranslate"><span class="pre">user</span></code>，<code class="xref py py-attr docutils literal notranslate"><span class="pre">system</span></code>，<code class="xref py py-attr docutils literal notranslate"><span class="pre">children_user</span></code>，<code class="xref py py-attr docutils literal notranslate"><span class="pre">children_system</span></code> 和 <code class="xref py py-attr docutils literal notranslate"><span class="pre">elapsed</span></code> 顺序组成。</p>
<p>See the Unix manual page
<em class="manpage"><a class="manpage reference external" href="https://manpages.debian.org/times(2)">times(2)</a></em> and <a class="reference external" href="https://www.freebsd.org/cgi/man.cgi?time(3)">times(3)</a> manual page on Unix or <a class="reference external" href="https://docs.microsoft.com/windows/win32/api/processthreadsapi/nf-processthreadsapi-getprocesstimes">the GetProcessTimes MSDN</a>
on Windows. On Windows, only <code class="xref py py-attr docutils literal notranslate"><span class="pre">user</span></code> and <code class="xref py py-attr docutils literal notranslate"><span class="pre">system</span></code> are known; the other attributes are zero.</p>
<p class="availability"><a class="reference internal" href="intro.html#availability"><span class="std std-ref">可用性</span></a>: Unix, Windows。</p>
<div class="versionchanged">
<p><span class="versionmodified changed">在 3.3 版更改: </span>返回结果的类型由元组变成一个类似元组的对象，同时具有命名的属性。</p>
</div>
</dd></dl>

<dl class="py function">
<dt id="os.wait">
<code class="sig-prename descclassname">os.</code><code class="sig-name descname">wait</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#os.wait" title="永久链接至目标">¶</a></dt>
<dd><p>等待子进程执行完毕，返回一个元组，包含其 pid 和退出状态指示：一个 16 位数字，其低字节是终止该进程的信号编号，高字节是退出状态码（信号编号为零的情况下），如果生成了核心文件，则低字节的高位会置位。</p>
<p>可以使用 <a class="reference internal" href="#os.waitstatus_to_exitcode" title="os.waitstatus_to_exitcode"><code class="xref py py-func docutils literal notranslate"><span class="pre">waitstatus_to_exitcode()</span></code></a> 来将退出状态转换为退出码。</p>
<p class="availability"><a class="reference internal" href="intro.html#availability"><span class="std std-ref">可用性</span></a>: Unix。</p>
<div class="admonition seealso">
<p class="admonition-title">参见</p>
<p><a class="reference internal" href="#os.waitpid" title="os.waitpid"><code class="xref py py-func docutils literal notranslate"><span class="pre">waitpid()</span></code></a> 可以等待特定的子进程执行完毕，且支持更多选项。</p>
</div>
</dd></dl>

<dl class="py function">
<dt id="os.waitid">
<code class="sig-prename descclassname">os.</code><code class="sig-name descname">waitid</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">idtype</span></em>, <em class="sig-param"><span class="n">id</span></em>, <em class="sig-param"><span class="n">options</span></em><span class="sig-paren">)</span><a class="headerlink" href="#os.waitid" title="永久链接至目标">¶</a></dt>
<dd><p>等待一个或多个子进程执行完毕。<em>idtype</em> 可以是 <a class="reference internal" href="#os.P_PID" title="os.P_PID"><code class="xref py py-data docutils literal notranslate"><span class="pre">P_PID</span></code></a>, <a class="reference internal" href="#os.P_PGID" title="os.P_PGID"><code class="xref py py-data docutils literal notranslate"><span class="pre">P_PGID</span></code></a>, <a class="reference internal" href="#os.P_ALL" title="os.P_ALL"><code class="xref py py-data docutils literal notranslate"><span class="pre">P_ALL</span></code></a>, 或 <a class="reference internal" href="#os.P_PIDFD" title="os.P_PIDFD"><code class="xref py py-data docutils literal notranslate"><span class="pre">P_PIDFD</span></code></a> （Linux 可用）。<em>id</em> 指定要等待的 pid。<em>options</em> 是由 <a class="reference internal" href="#os.WEXITED" title="os.WEXITED"><code class="xref py py-data docutils literal notranslate"><span class="pre">WEXITED</span></code></a>、<a class="reference internal" href="#os.WSTOPPED" title="os.WSTOPPED"><code class="xref py py-data docutils literal notranslate"><span class="pre">WSTOPPED</span></code></a> 或 <a class="reference internal" href="#os.WCONTINUED" title="os.WCONTINUED"><code class="xref py py-data docutils literal notranslate"><span class="pre">WCONTINUED</span></code></a> 中的一个或多个进行或运算构造的，且额外可以与 <a class="reference internal" href="#os.WNOHANG" title="os.WNOHANG"><code class="xref py py-data docutils literal notranslate"><span class="pre">WNOHANG</span></code></a> 或 <a class="reference internal" href="#os.WNOWAIT" title="os.WNOWAIT"><code class="xref py py-data docutils literal notranslate"><span class="pre">WNOWAIT</span></code></a> 进行或运算。返回值是一个对象，对应着 <code class="xref c c-type docutils literal notranslate"><span class="pre">siginfo_t</span></code> 结构体中的数据，即： <code class="xref py py-attr docutils literal notranslate"><span class="pre">si_pid</span></code>, <code class="xref py py-attr docutils literal notranslate"><span class="pre">si_uid</span></code>, <code class="xref py py-attr docutils literal notranslate"><span class="pre">si_signo</span></code>, <code class="xref py py-attr docutils literal notranslate"><span class="pre">si_status</span></code>, <code class="xref py py-attr docutils literal notranslate"><span class="pre">si_code</span></code> 或 <code class="docutils literal notranslate"><span class="pre">None</span></code> （如果指定了 <a class="reference internal" href="#os.WNOHANG" title="os.WNOHANG"><code class="xref py py-data docutils literal notranslate"><span class="pre">WNOHANG</span></code></a> 且没有子进程处于等待状态）。</p>
<p class="availability"><a class="reference internal" href="intro.html#availability"><span class="std std-ref">可用性</span></a>: Unix。</p>
<div class="versionadded">
<p><span class="versionmodified added">3.3 新版功能.</span></p>
</div>
</dd></dl>

<dl class="py data">
<dt id="os.P_PID">
<code class="sig-prename descclassname">os.</code><code class="sig-name descname">P_PID</code><a class="headerlink" href="#os.P_PID" title="永久链接至目标">¶</a></dt>
<dt id="os.P_PGID">
<code class="sig-prename descclassname">os.</code><code class="sig-name descname">P_PGID</code><a class="headerlink" href="#os.P_PGID" title="永久链接至目标">¶</a></dt>
<dt id="os.P_ALL">
<code class="sig-prename descclassname">os.</code><code class="sig-name descname">P_ALL</code><a class="headerlink" href="#os.P_ALL" title="永久链接至目标">¶</a></dt>
<dd><p><a class="reference internal" href="#os.waitid" title="os.waitid"><code class="xref py py-func docutils literal notranslate"><span class="pre">waitid()</span></code></a> 的 <em>idtype</em> 参数的可取值。它们影响 <em>id</em> 的解释方式。</p>
<p class="availability"><a class="reference internal" href="intro.html#availability"><span class="std std-ref">可用性</span></a>: Unix。</p>
<div class="versionadded">
<p><span class="versionmodified added">3.3 新版功能.</span></p>
</div>
</dd></dl>

<dl class="py data">
<dt id="os.P_PIDFD">
<code class="sig-prename descclassname">os.</code><code class="sig-name descname">P_PIDFD</code><a class="headerlink" href="#os.P_PIDFD" title="永久链接至目标">¶</a></dt>
<dd><p>这是仅 Linux 上存在的一种 <em>idtype</em>，它表示 <em>id</em> 是指向一个进程的文件描述符。</p>
<p class="availability"><a class="reference internal" href="intro.html#availability"><span class="std std-ref">可用性</span></a>: Linux 5.4+</p>
<div class="versionadded">
<p><span class="versionmodified added">3.9 新版功能.</span></p>
</div>
</dd></dl>

<dl class="py data">
<dt id="os.WEXITED">
<code class="sig-prename descclassname">os.</code><code class="sig-name descname">WEXITED</code><a class="headerlink" href="#os.WEXITED" title="永久链接至目标">¶</a></dt>
<dt id="os.WSTOPPED">
<code class="sig-prename descclassname">os.</code><code class="sig-name descname">WSTOPPED</code><a class="headerlink" href="#os.WSTOPPED" title="永久链接至目标">¶</a></dt>
<dt id="os.WNOWAIT">
<code class="sig-prename descclassname">os.</code><code class="sig-name descname">WNOWAIT</code><a class="headerlink" href="#os.WNOWAIT" title="永久链接至目标">¶</a></dt>
<dd><p>用于 <a class="reference internal" href="#os.waitid" title="os.waitid"><code class="xref py py-func docutils literal notranslate"><span class="pre">waitid()</span></code></a> 的 <em>options</em> 参数的标志位，指定要等待的子进程信号。</p>
<p class="availability"><a class="reference internal" href="intro.html#availability"><span class="std std-ref">可用性</span></a>: Unix。</p>
<div class="versionadded">
<p><span class="versionmodified added">3.3 新版功能.</span></p>
</div>
</dd></dl>

<dl class="py data">
<dt id="os.CLD_EXITED">
<code class="sig-prename descclassname">os.</code><code class="sig-name descname">CLD_EXITED</code><a class="headerlink" href="#os.CLD_EXITED" title="永久链接至目标">¶</a></dt>
<dt id="os.CLD_KILLED">
<code class="sig-prename descclassname">os.</code><code class="sig-name descname">CLD_KILLED</code><a class="headerlink" href="#os.CLD_KILLED" title="永久链接至目标">¶</a></dt>
<dt id="os.CLD_DUMPED">
<code class="sig-prename descclassname">os.</code><code class="sig-name descname">CLD_DUMPED</code><a class="headerlink" href="#os.CLD_DUMPED" title="永久链接至目标">¶</a></dt>
<dt id="os.CLD_TRAPPED">
<code class="sig-prename descclassname">os.</code><code class="sig-name descname">CLD_TRAPPED</code><a class="headerlink" href="#os.CLD_TRAPPED" title="永久链接至目标">¶</a></dt>
<dt id="os.CLD_STOPPED">
<code class="sig-prename descclassname">os.</code><code class="sig-name descname">CLD_STOPPED</code><a class="headerlink" href="#os.CLD_STOPPED" title="永久链接至目标">¶</a></dt>
<dt id="os.CLD_CONTINUED">
<code class="sig-prename descclassname">os.</code><code class="sig-name descname">CLD_CONTINUED</code><a class="headerlink" href="#os.CLD_CONTINUED" title="永久链接至目标">¶</a></dt>
<dd><p><a class="reference internal" href="#os.waitid" title="os.waitid"><code class="xref py py-func docutils literal notranslate"><span class="pre">waitid()</span></code></a> 返回的结果中，<code class="xref py py-attr docutils literal notranslate"><span class="pre">si_code</span></code> 的可取值。</p>
<p class="availability"><a class="reference internal" href="intro.html#availability"><span class="std std-ref">可用性</span></a>: Unix。</p>
<div class="versionadded">
<p><span class="versionmodified added">3.3 新版功能.</span></p>
</div>
<div class="versionchanged">
<p><span class="versionmodified changed">在 3.9 版更改: </span>添加了 <a class="reference internal" href="#os.CLD_KILLED" title="os.CLD_KILLED"><code class="xref py py-data docutils literal notranslate"><span class="pre">CLD_KILLED</span></code></a> 和 <a class="reference internal" href="#os.CLD_STOPPED" title="os.CLD_STOPPED"><code class="xref py py-data docutils literal notranslate"><span class="pre">CLD_STOPPED</span></code></a> 值。</p>
</div>
</dd></dl>

<dl class="py function">
<dt id="os.waitpid">
<code class="sig-prename descclassname">os.</code><code class="sig-name descname">waitpid</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">pid</span></em>, <em class="sig-param"><span class="n">options</span></em><span class="sig-paren">)</span><a class="headerlink" href="#os.waitpid" title="永久链接至目标">¶</a></dt>
<dd><p>本函数的细节在 Unix 和 Windows 上有不同之处。</p>
<p>在 Unix 上：等待进程号为 <em>pid</em> 的子进程执行完毕，返回一个元组，内含其进程 ID 和退出状态指示（编码与 <a class="reference internal" href="#os.wait" title="os.wait"><code class="xref py py-func docutils literal notranslate"><span class="pre">wait()</span></code></a> 相同）。调用的语义受整数 <em>options</em> 的影响，常规操作下该值应为 <code class="docutils literal notranslate"><span class="pre">0</span></code>。</p>
<p>如果 <em>pid</em> 大于 <code class="docutils literal notranslate"><span class="pre">0</span></code>，则 <a class="reference internal" href="#os.waitpid" title="os.waitpid"><code class="xref py py-func docutils literal notranslate"><span class="pre">waitpid()</span></code></a> 会获取该指定进程的状态信息。如果 <em>pid</em> 为 <code class="docutils literal notranslate"><span class="pre">0</span></code>，则获取当前进程所在进程组中的所有子进程的状态。如果 <em>pid</em> 为 <code class="docutils literal notranslate"><span class="pre">-1</span></code>，则获取当前进程的子进程状态。如果 <em>pid</em> 小于 <code class="docutils literal notranslate"><span class="pre">-1</span></code>，则获取进程组 <code class="docutils literal notranslate"><span class="pre">-pid</span></code> （ <em>pid</em> 的绝对值）中所有进程的状态。</p>
<p>当系统调用返回 -1 时，将抛出带有错误码的 <a class="reference internal" href="exceptions.html#OSError" title="OSError"><code class="xref py py-exc docutils literal notranslate"><span class="pre">OSError</span></code></a> 异常。</p>
<p>在 Windows 上：等待句柄为 <em>pid</em> 的进程执行完毕，返回一个元组，内含 <em>pid</em> 以及左移 8 位后的退出状态码（移位简化了跨平台使用本函数）。小于或等于 <code class="docutils literal notranslate"><span class="pre">0</span></code> 的 <em>pid</em> 在 Windows 上没有特殊含义，且会抛出异常。整数值 <em>options</em> 无效。<em>pid</em> 可以指向任何 ID 已知的进程，不一定是子进程。调用 <a class="reference internal" href="#os.spawnl" title="os.spawnl"><code class="xref py py-func docutils literal notranslate"><span class="pre">spawn*</span></code></a> 函数时传入 <a class="reference internal" href="#os.P_NOWAIT" title="os.P_NOWAIT"><code class="xref py py-const docutils literal notranslate"><span class="pre">P_NOWAIT</span></code></a> 将返回合适的进程句柄。</p>
<p>可以使用 <a class="reference internal" href="#os.waitstatus_to_exitcode" title="os.waitstatus_to_exitcode"><code class="xref py py-func docutils literal notranslate"><span class="pre">waitstatus_to_exitcode()</span></code></a> 来将退出状态转换为退出码。</p>
<div class="versionchanged">
<p><span class="versionmodified changed">在 3.5 版更改: </span>如果系统调用被中断，但信号处理程序没有触发异常，此函数现在会重试系统调用，而不是触发 <a class="reference internal" href="exceptions.html#InterruptedError" title="InterruptedError"><code class="xref py py-exc docutils literal notranslate"><span class="pre">InterruptedError</span></code></a> 异常 (原因详见 <span class="target" id="index-100"></span><a class="pep reference external" href="https://www.python.org/dev/peps/pep-0475"><strong>PEP 475</strong></a>)。</p>
</div>
</dd></dl>

<dl class="py function">
<dt id="os.wait3">
<code class="sig-prename descclassname">os.</code><code class="sig-name descname">wait3</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">options</span></em><span class="sig-paren">)</span><a class="headerlink" href="#os.wait3" title="永久链接至目标">¶</a></dt>
<dd><p>与 <a class="reference internal" href="#os.waitpid" title="os.waitpid"><code class="xref py py-func docutils literal notranslate"><span class="pre">waitpid()</span></code></a> 相似，差别在于没有进程 ID 参数，且返回一个 3 元组，其中包括子进程 ID，退出状态指示和资源使用信息。关于资源使用信息的详情，请参考 <a class="reference internal" href="resource.html#module-resource" title="resource: An interface to provide resource usage information on the current process. (Unix)"><code class="xref py py-mod docutils literal notranslate"><span class="pre">resource</span></code></a>.<a class="reference internal" href="resource.html#resource.getrusage" title="resource.getrusage"><code class="xref py py-func docutils literal notranslate"><span class="pre">getrusage()</span></code></a>。option 参数与传入 <a class="reference internal" href="#os.waitpid" title="os.waitpid"><code class="xref py py-func docutils literal notranslate"><span class="pre">waitpid()</span></code></a> 和 <a class="reference internal" href="#os.wait4" title="os.wait4"><code class="xref py py-func docutils literal notranslate"><span class="pre">wait4()</span></code></a> 的相同。</p>
<p>可以使用 <a class="reference internal" href="#os.waitstatus_to_exitcode" title="os.waitstatus_to_exitcode"><code class="xref py py-func docutils literal notranslate"><span class="pre">waitstatus_to_exitcode()</span></code></a> 来将退出状态转换为退出码。</p>
<p class="availability"><a class="reference internal" href="intro.html#availability"><span class="std std-ref">可用性</span></a>: Unix。</p>
</dd></dl>

<dl class="py function">
<dt id="os.wait4">
<code class="sig-prename descclassname">os.</code><code class="sig-name descname">wait4</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">pid</span></em>, <em class="sig-param"><span class="n">options</span></em><span class="sig-paren">)</span><a class="headerlink" href="#os.wait4" title="永久链接至目标">¶</a></dt>
<dd><p>与 <a class="reference internal" href="#os.waitpid" title="os.waitpid"><code class="xref py py-func docutils literal notranslate"><span class="pre">waitpid()</span></code></a> 相似，差别在本方法返回一个 3 元组，其中包括子进程 ID，退出状态指示和资源使用信息。关于资源使用信息的详情，请参考 <a class="reference internal" href="resource.html#module-resource" title="resource: An interface to provide resource usage information on the current process. (Unix)"><code class="xref py py-mod docutils literal notranslate"><span class="pre">resource</span></code></a>.<a class="reference internal" href="resource.html#resource.getrusage" title="resource.getrusage"><code class="xref py py-func docutils literal notranslate"><span class="pre">getrusage()</span></code></a>。<a class="reference internal" href="#os.wait4" title="os.wait4"><code class="xref py py-func docutils literal notranslate"><span class="pre">wait4()</span></code></a> 的参数与 <a class="reference internal" href="#os.waitpid" title="os.waitpid"><code class="xref py py-func docutils literal notranslate"><span class="pre">waitpid()</span></code></a> 的参数相同。</p>
<p>可以使用 <a class="reference internal" href="#os.waitstatus_to_exitcode" title="os.waitstatus_to_exitcode"><code class="xref py py-func docutils literal notranslate"><span class="pre">waitstatus_to_exitcode()</span></code></a> 来将退出状态转换为退出码。</p>
<p class="availability"><a class="reference internal" href="intro.html#availability"><span class="std std-ref">可用性</span></a>: Unix。</p>
</dd></dl>

<dl class="py function">
<dt id="os.waitstatus_to_exitcode">
<code class="sig-prename descclassname">os.</code><code class="sig-name descname">waitstatus_to_exitcode</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">status</span></em><span class="sig-paren">)</span><a class="headerlink" href="#os.waitstatus_to_exitcode" title="永久链接至目标">¶</a></dt>
<dd><p>将等待状态转换为退出码。</p>
<p>在 Unix 上：</p>
<ul class="simple">
<li><p>如果进程正常退出（当 <code class="docutils literal notranslate"><span class="pre">WIFEXITED(status)</span></code> 为真值），则返回进程退出状态 (返回 <code class="docutils literal notranslate"><span class="pre">WEXITSTATUS(status)</span></code>): 结果值大于等于 0。</p></li>
<li><p>如果进程被信号终止（当 <code class="docutils literal notranslate"><span class="pre">WIFSIGNALED(status)</span></code> 为真值），则返回 <code class="docutils literal notranslate"><span class="pre">-signum</span></code> 其中 <em>signum</em> 为导致进程终止的信号数值 (返回 <code class="docutils literal notranslate"><span class="pre">-WTERMSIG(status)</span></code>): 结果值小于 0。</p></li>
<li><p>否则将抛出 <a class="reference internal" href="exceptions.html#ValueError" title="ValueError"><code class="xref py py-exc docutils literal notranslate"><span class="pre">ValueError</span></code></a> 异常。</p></li>
</ul>
<p>在 Windows 上，返回 <em>status</em> 右移 8 位的结果。</p>
<p>在 Unix 上，如果进程正被追踪或 <a class="reference internal" href="#os.waitpid" title="os.waitpid"><code class="xref py py-func docutils literal notranslate"><span class="pre">waitpid()</span></code></a> 附带 <a class="reference internal" href="#os.WUNTRACED" title="os.WUNTRACED"><code class="xref py py-data docutils literal notranslate"><span class="pre">WUNTRACED</span></code></a> 选项被调用，则调用者必须先检查 <code class="docutils literal notranslate"><span class="pre">WIFSTOPPED(status)</span></code> 是否为真值。 如果 <code class="docutils literal notranslate"><span class="pre">WIFSTOPPED(status)</span></code> 为真值则此函数不可被调用。</p>
<div class="admonition seealso">
<p class="admonition-title">参见</p>
<p><a class="reference internal" href="#os.WIFEXITED" title="os.WIFEXITED"><code class="xref py py-func docutils literal notranslate"><span class="pre">WIFEXITED()</span></code></a>, <a class="reference internal" href="#os.WEXITSTATUS" title="os.WEXITSTATUS"><code class="xref py py-func docutils literal notranslate"><span class="pre">WEXITSTATUS()</span></code></a>, <a class="reference internal" href="#os.WIFSIGNALED" title="os.WIFSIGNALED"><code class="xref py py-func docutils literal notranslate"><span class="pre">WIFSIGNALED()</span></code></a>, <a class="reference internal" href="#os.WTERMSIG" title="os.WTERMSIG"><code class="xref py py-func docutils literal notranslate"><span class="pre">WTERMSIG()</span></code></a>, <a class="reference internal" href="#os.WIFSTOPPED" title="os.WIFSTOPPED"><code class="xref py py-func docutils literal notranslate"><span class="pre">WIFSTOPPED()</span></code></a>, <a class="reference internal" href="#os.WSTOPSIG" title="os.WSTOPSIG"><code class="xref py py-func docutils literal notranslate"><span class="pre">WSTOPSIG()</span></code></a> 函数。</p>
</div>
<div class="versionadded">
<p><span class="versionmodified added">3.9 新版功能.</span></p>
</div>
</dd></dl>

<dl class="py data">
<dt id="os.WNOHANG">
<code class="sig-prename descclassname">os.</code><code class="sig-name descname">WNOHANG</code><a class="headerlink" href="#os.WNOHANG" title="永久链接至目标">¶</a></dt>
<dd><p>用于 <a class="reference internal" href="#os.waitpid" title="os.waitpid"><code class="xref py py-func docutils literal notranslate"><span class="pre">waitpid()</span></code></a> 的选项，如果没有立即可用的子进程状态，则立即返回。在这种情况下，函数返回 <code class="docutils literal notranslate"><span class="pre">(0,</span> <span class="pre">0)</span></code>。</p>
<p class="availability"><a class="reference internal" href="intro.html#availability"><span class="std std-ref">可用性</span></a>: Unix。</p>
</dd></dl>

<dl class="py data">
<dt id="os.WCONTINUED">
<code class="sig-prename descclassname">os.</code><code class="sig-name descname">WCONTINUED</code><a class="headerlink" href="#os.WCONTINUED" title="永久链接至目标">¶</a></dt>
<dd><p>被任务控制 (job control) 停止的子进程，如果上次报告状态后已恢复运行，则此选项将报告这些子进程。</p>
<p class="availability"><a class="reference internal" href="intro.html#availability"><span class="std std-ref">可用性</span></a>: 部分 Unix 系统。</p>
</dd></dl>

<dl class="py data">
<dt id="os.WUNTRACED">
<code class="sig-prename descclassname">os.</code><code class="sig-name descname">WUNTRACED</code><a class="headerlink" href="#os.WUNTRACED" title="永久链接至目标">¶</a></dt>
<dd><p>已停止的子进程，如果自停止以来尚未报告其当前状态，则此选项将报告这些子进程。</p>
<p class="availability"><a class="reference internal" href="intro.html#availability"><span class="std std-ref">可用性</span></a>: Unix。</p>
</dd></dl>

<p>下列函数采用进程状态码作为参数，状态码由 <a class="reference internal" href="#os.system" title="os.system"><code class="xref py py-func docutils literal notranslate"><span class="pre">system()</span></code></a>、<a class="reference internal" href="#os.wait" title="os.wait"><code class="xref py py-func docutils literal notranslate"><span class="pre">wait()</span></code></a> 或 <a class="reference internal" href="#os.waitpid" title="os.waitpid"><code class="xref py py-func docutils literal notranslate"><span class="pre">waitpid()</span></code></a> 返回。它们可用于确定进程上发生的操作。</p>
<dl class="py function">
<dt id="os.WCOREDUMP">
<code class="sig-prename descclassname">os.</code><code class="sig-name descname">WCOREDUMP</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">status</span></em><span class="sig-paren">)</span><a class="headerlink" href="#os.WCOREDUMP" title="永久链接至目标">¶</a></dt>
<dd><p>如果为该进程生成了核心转储，返回 <code class="docutils literal notranslate"><span class="pre">True</span></code>，否则返回 <code class="docutils literal notranslate"><span class="pre">False</span></code>。</p>
<p>此函数应当仅在 <a class="reference internal" href="#os.WIFSIGNALED" title="os.WIFSIGNALED"><code class="xref py py-func docutils literal notranslate"><span class="pre">WIFSIGNALED()</span></code></a> 为真值时使用。</p>
<p class="availability"><a class="reference internal" href="intro.html#availability"><span class="std std-ref">可用性</span></a>: Unix。</p>
</dd></dl>

<dl class="py function">
<dt id="os.WIFCONTINUED">
<code class="sig-prename descclassname">os.</code><code class="sig-name descname">WIFCONTINUED</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">status</span></em><span class="sig-paren">)</span><a class="headerlink" href="#os.WIFCONTINUED" title="永久链接至目标">¶</a></dt>
<dd><p>如果一个已停止的子进程通过传送 <a class="reference internal" href="signal.html#signal.SIGCONT" title="signal.SIGCONT"><code class="xref py py-data docutils literal notranslate"><span class="pre">SIGCONT</span></code></a> 获得恢复（如果该进程是从任务控制停止后再继续的）则返回 <code class="docutils literal notranslate"><span class="pre">True</span></code>，否则返回 <code class="docutils literal notranslate"><span class="pre">False</span></code>。</p>
<p>参见 <a class="reference internal" href="#os.WCONTINUED" title="os.WCONTINUED"><code class="xref py py-data docutils literal notranslate"><span class="pre">WCONTINUED</span></code></a> 选项。</p>
<p class="availability"><a class="reference internal" href="intro.html#availability"><span class="std std-ref">可用性</span></a>: Unix。</p>
</dd></dl>

<dl class="py function">
<dt id="os.WIFSTOPPED">
<code class="sig-prename descclassname">os.</code><code class="sig-name descname">WIFSTOPPED</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">status</span></em><span class="sig-paren">)</span><a class="headerlink" href="#os.WIFSTOPPED" title="永久链接至目标">¶</a></dt>
<dd><p>如果进程是通过传送一个信号来停止的则返回 <code class="docutils literal notranslate"><span class="pre">True</span></code>，否则返回 <code class="docutils literal notranslate"><span class="pre">False</span></code>。</p>
<p><a class="reference internal" href="#os.WIFSTOPPED" title="os.WIFSTOPPED"><code class="xref py py-func docutils literal notranslate"><span class="pre">WIFSTOPPED()</span></code></a> 只有在当 <a class="reference internal" href="#os.waitpid" title="os.waitpid"><code class="xref py py-func docutils literal notranslate"><span class="pre">waitpid()</span></code></a> 调用是通过使用 <a class="reference internal" href="#os.WUNTRACED" title="os.WUNTRACED"><code class="xref py py-data docutils literal notranslate"><span class="pre">WUNTRACED</span></code></a> 选项来完成或者当该进程正被追踪时 (参见 <em class="manpage"><a class="manpage reference external" href="https://manpages.debian.org/ptrace(2)">ptrace(2)</a></em>) 才返回 <code class="docutils literal notranslate"><span class="pre">True</span></code>。</p>
<p class="availability"><a class="reference internal" href="intro.html#availability"><span class="std std-ref">可用性</span></a>: Unix。</p>
</dd></dl>

<dl class="py function">
<dt id="os.WIFSIGNALED">
<code class="sig-prename descclassname">os.</code><code class="sig-name descname">WIFSIGNALED</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">status</span></em><span class="sig-paren">)</span><a class="headerlink" href="#os.WIFSIGNALED" title="永久链接至目标">¶</a></dt>
<dd><p>如果进程是通过一个信号来终止的则返回 <code class="docutils literal notranslate"><span class="pre">True</span></code> ，否则返回 <code class="docutils literal notranslate"><span class="pre">False</span></code>。</p>
<p class="availability"><a class="reference internal" href="intro.html#availability"><span class="std std-ref">可用性</span></a>: Unix。</p>
</dd></dl>

<dl class="py function">
<dt id="os.WIFEXITED">
<code class="sig-prename descclassname">os.</code><code class="sig-name descname">WIFEXITED</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">status</span></em><span class="sig-paren">)</span><a class="headerlink" href="#os.WIFEXITED" title="永久链接至目标">¶</a></dt>
<dd><p>如果进程正常终止退出则返回 <code class="docutils literal notranslate"><span class="pre">True</span></code>，也就是说通过调用 <code class="docutils literal notranslate"><span class="pre">exit()</span></code> 或 <code class="docutils literal notranslate"><span class="pre">_exit()</span></code>，或者通过从 <code class="docutils literal notranslate"><span class="pre">main()</span></code> 返回；在其他情况下则返回 <code class="docutils literal notranslate"><span class="pre">False</span></code>。</p>
<p class="availability"><a class="reference internal" href="intro.html#availability"><span class="std std-ref">可用性</span></a>: Unix。</p>
</dd></dl>

<dl class="py function">
<dt id="os.WEXITSTATUS">
<code class="sig-prename descclassname">os.</code><code class="sig-name descname">WEXITSTATUS</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">status</span></em><span class="sig-paren">)</span><a class="headerlink" href="#os.WEXITSTATUS" title="永久链接至目标">¶</a></dt>
<dd><p>返回进程退出状态。</p>
<p>此函数应当仅在 <a class="reference internal" href="#os.WIFEXITED" title="os.WIFEXITED"><code class="xref py py-func docutils literal notranslate"><span class="pre">WIFEXITED()</span></code></a> 为真值时使用。</p>
<p class="availability"><a class="reference internal" href="intro.html#availability"><span class="std std-ref">可用性</span></a>: Unix。</p>
</dd></dl>

<dl class="py function">
<dt id="os.WSTOPSIG">
<code class="sig-prename descclassname">os.</code><code class="sig-name descname">WSTOPSIG</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">status</span></em><span class="sig-paren">)</span><a class="headerlink" href="#os.WSTOPSIG" title="永久链接至目标">¶</a></dt>
<dd><p>返回导致进程停止的信号。</p>
<p>此函数应当仅在 <a class="reference internal" href="#os.WIFSTOPPED" title="os.WIFSTOPPED"><code class="xref py py-func docutils literal notranslate"><span class="pre">WIFSTOPPED()</span></code></a> 为真值时使用。</p>
<p class="availability"><a class="reference internal" href="intro.html#availability"><span class="std std-ref">可用性</span></a>: Unix。</p>
</dd></dl>

<dl class="py function">
<dt id="os.WTERMSIG">
<code class="sig-prename descclassname">os.</code><code class="sig-name descname">WTERMSIG</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">status</span></em><span class="sig-paren">)</span><a class="headerlink" href="#os.WTERMSIG" title="永久链接至目标">¶</a></dt>
<dd><p>返回导致进程终止的信号的编号。</p>
<p>此函数应当仅在 <a class="reference internal" href="#os.WIFSIGNALED" title="os.WIFSIGNALED"><code class="xref py py-func docutils literal notranslate"><span class="pre">WIFSIGNALED()</span></code></a> 为真值时使用。</p>
<p class="availability"><a class="reference internal" href="intro.html#availability"><span class="std std-ref">可用性</span></a>: Unix。</p>
</dd></dl>

</section>
<section id="interface-to-the-scheduler">
<h2>调度器接口<a class="headerlink" href="#interface-to-the-scheduler" title="永久链接至标题">¶</a></h2>
<p>这些函数控制操作系统如何为进程分配 CPU 时间。 它们仅在某些 Unix 平台上可用。 更多细节信息请查阅你所用 Unix 的指南页面。</p>
<div class="versionadded">
<p><span class="versionmodified added">3.3 新版功能.</span></p>
</div>
<p>以下调度策略如果被操作系统支持就会对外公开。</p>
<dl class="py data">
<dt id="os.SCHED_OTHER">
<code class="sig-prename descclassname">os.</code><code class="sig-name descname">SCHED_OTHER</code><a class="headerlink" href="#os.SCHED_OTHER" title="永久链接至目标">¶</a></dt>
<dd><p>默认调度策略。</p>
</dd></dl>

<dl class="py data">
<dt id="os.SCHED_BATCH">
<code class="sig-prename descclassname">os.</code><code class="sig-name descname">SCHED_BATCH</code><a class="headerlink" href="#os.SCHED_BATCH" title="永久链接至目标">¶</a></dt>
<dd><p>用于 CPU 密集型进程的调度策略，它会尽量为计算机中的其余任务保留交互性。</p>
</dd></dl>

<dl class="py data">
<dt id="os.SCHED_IDLE">
<code class="sig-prename descclassname">os.</code><code class="sig-name descname">SCHED_IDLE</code><a class="headerlink" href="#os.SCHED_IDLE" title="永久链接至目标">¶</a></dt>
<dd><p>用于极低优先级的后台任务的调度策略。</p>
</dd></dl>

<dl class="py data">
<dt id="os.SCHED_SPORADIC">
<code class="sig-prename descclassname">os.</code><code class="sig-name descname">SCHED_SPORADIC</code><a class="headerlink" href="#os.SCHED_SPORADIC" title="永久链接至目标">¶</a></dt>
<dd><p>用于偶发型服务程序的调度策略。</p>
</dd></dl>

<dl class="py data">
<dt id="os.SCHED_FIFO">
<code class="sig-prename descclassname">os.</code><code class="sig-name descname">SCHED_FIFO</code><a class="headerlink" href="#os.SCHED_FIFO" title="永久链接至目标">¶</a></dt>
<dd><p>先进先出的调度策略。</p>
</dd></dl>

<dl class="py data">
<dt id="os.SCHED_RR">
<code class="sig-prename descclassname">os.</code><code class="sig-name descname">SCHED_RR</code><a class="headerlink" href="#os.SCHED_RR" title="永久链接至目标">¶</a></dt>
<dd><p>循环式的调度策略。</p>
</dd></dl>

<dl class="py data">
<dt id="os.SCHED_RESET_ON_FORK">
<code class="sig-prename descclassname">os.</code><code class="sig-name descname">SCHED_RESET_ON_FORK</code><a class="headerlink" href="#os.SCHED_RESET_ON_FORK" title="永久链接至目标">¶</a></dt>
<dd><p>此旗标可与任何其他调度策略进行 OR 运算。 当带有此旗标的进程设置分叉时，其子进程的调度策略和优先级会被重置为默认值。</p>
</dd></dl>

<dl class="py class">
<dt id="os.sched_param">
<em class="property">class </em><code class="sig-prename descclassname">os.</code><code class="sig-name descname">sched_param</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">sched_priority</span></em><span class="sig-paren">)</span><a class="headerlink" href="#os.sched_param" title="永久链接至目标">¶</a></dt>
<dd><p>这个类表示在 <a class="reference internal" href="#os.sched_setparam" title="os.sched_setparam"><code class="xref py py-func docutils literal notranslate"><span class="pre">sched_setparam()</span></code></a>, <a class="reference internal" href="#os.sched_setscheduler" title="os.sched_setscheduler"><code class="xref py py-func docutils literal notranslate"><span class="pre">sched_setscheduler()</span></code></a> 和 <a class="reference internal" href="#os.sched_getparam" title="os.sched_getparam"><code class="xref py py-func docutils literal notranslate"><span class="pre">sched_getparam()</span></code></a> 中使用的可修改调度形参。 它属于不可变对象。</p>
<p>目前它只有一个可能的形参：</p>
<dl class="py attribute">
<dt id="os.sched_param.sched_priority">
<code class="sig-name descname">sched_priority</code><a class="headerlink" href="#os.sched_param.sched_priority" title="永久链接至目标">¶</a></dt>
<dd><p>一个调度策略的调度优先级。</p>
</dd></dl>

</dd></dl>

<dl class="py function">
<dt id="os.sched_get_priority_min">
<code class="sig-prename descclassname">os.</code><code class="sig-name descname">sched_get_priority_min</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">policy</span></em><span class="sig-paren">)</span><a class="headerlink" href="#os.sched_get_priority_min" title="永久链接至目标">¶</a></dt>
<dd><p>获取 <em>policy</em> 的最低优先级数值。 <em>policy</em> 是以上调度策略常量之一。</p>
</dd></dl>

<dl class="py function">
<dt id="os.sched_get_priority_max">
<code class="sig-prename descclassname">os.</code><code class="sig-name descname">sched_get_priority_max</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">policy</span></em><span class="sig-paren">)</span><a class="headerlink" href="#os.sched_get_priority_max" title="永久链接至目标">¶</a></dt>
<dd><p>获取 <em>policy</em> 的最高优先级数值。 <em>policy</em> 是以上调度策略常量之一。</p>
</dd></dl>

<dl class="py function">
<dt id="os.sched_setscheduler">
<code class="sig-prename descclassname">os.</code><code class="sig-name descname">sched_setscheduler</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">pid</span></em>, <em class="sig-param"><span class="n">policy</span></em>, <em class="sig-param"><span class="n">param</span></em><span class="sig-paren">)</span><a class="headerlink" href="#os.sched_setscheduler" title="永久链接至目标">¶</a></dt>
<dd><p>设置 PID 为 <em>pid</em> 的进程的调度策略。<em>pid</em> 为 0 指的是调用本方法的进程。<em>policy</em> 是以上调度策略常量之一。<em>param</em> 是一个 <a class="reference internal" href="#os.sched_param" title="os.sched_param"><code class="xref py py-class docutils literal notranslate"><span class="pre">sched_param</span></code></a> 实例。</p>
</dd></dl>

<dl class="py function">
<dt id="os.sched_getscheduler">
<code class="sig-prename descclassname">os.</code><code class="sig-name descname">sched_getscheduler</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">pid</span></em><span class="sig-paren">)</span><a class="headerlink" href="#os.sched_getscheduler" title="永久链接至目标">¶</a></dt>
<dd><p>返回 PID 为 <em>pid</em> 的进程的调度策略。<em>pid</em> 为 0 指的是调用本方法的进程。返回的结果是以上调度策略常量之一。</p>
</dd></dl>

<dl class="py function">
<dt id="os.sched_setparam">
<code class="sig-prename descclassname">os.</code><code class="sig-name descname">sched_setparam</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">pid</span></em>, <em class="sig-param"><span class="n">param</span></em><span class="sig-paren">)</span><a class="headerlink" href="#os.sched_setparam" title="永久链接至目标">¶</a></dt>
<dd><p>设置 PID 为 <em>pid</em> 的进程的调度参数。 <em>pid</em> 为 0 表示调用方过程。  <em>param</em> 是一个 <a class="reference internal" href="#os.sched_param" title="os.sched_param"><code class="xref py py-class docutils literal notranslate"><span class="pre">sched_param</span></code></a> 实例。</p>
</dd></dl>

<dl class="py function">
<dt id="os.sched_getparam">
<code class="sig-prename descclassname">os.</code><code class="sig-name descname">sched_getparam</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">pid</span></em><span class="sig-paren">)</span><a class="headerlink" href="#os.sched_getparam" title="永久链接至目标">¶</a></dt>
<dd><p>返回 PID 为 <em>pid</em> 的进程的调度参数为一个 <a class="reference internal" href="#os.sched_param" title="os.sched_param"><code class="xref py py-class docutils literal notranslate"><span class="pre">sched_param</span></code></a> 实例。<em>pid</em> 为 0 指的是调用本方法的进程。</p>
</dd></dl>

<dl class="py function">
<dt id="os.sched_rr_get_interval">
<code class="sig-prename descclassname">os.</code><code class="sig-name descname">sched_rr_get_interval</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">pid</span></em><span class="sig-paren">)</span><a class="headerlink" href="#os.sched_rr_get_interval" title="永久链接至目标">¶</a></dt>
<dd><p>返回 PID 为 <em>pid</em> 的进程在时间片轮转调度下的时间片长度（单位为秒）。<em>pid</em> 为 0 指的是调用本方法的进程。</p>
</dd></dl>

<dl class="py function">
<dt id="os.sched_yield">
<code class="sig-prename descclassname">os.</code><code class="sig-name descname">sched_yield</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#os.sched_yield" title="永久链接至目标">¶</a></dt>
<dd><p>自愿放弃 CPU。</p>
</dd></dl>

<dl class="py function">
<dt id="os.sched_setaffinity">
<code class="sig-prename descclassname">os.</code><code class="sig-name descname">sched_setaffinity</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">pid</span></em>, <em class="sig-param"><span class="n">mask</span></em><span class="sig-paren">)</span><a class="headerlink" href="#os.sched_setaffinity" title="永久链接至目标">¶</a></dt>
<dd><p>将 PID 为 <em>pid</em> 的进程（为零则为当前进程）限制到一组 CPU 上。<em>mask</em> 是整数的可迭代对象，表示应将进程限制在其中的一组 CPU。</p>
</dd></dl>

<dl class="py function">
<dt id="os.sched_getaffinity">
<code class="sig-prename descclassname">os.</code><code class="sig-name descname">sched_getaffinity</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">pid</span></em><span class="sig-paren">)</span><a class="headerlink" href="#os.sched_getaffinity" title="永久链接至目标">¶</a></dt>
<dd><p>返回 PID 为 <em>pid</em> 的进程（为零则为当前进程）被限制到的那一组 CPU。</p>
</dd></dl>

</section>
<section id="miscellaneous-system-information">
<span id="os-path"></span><h2>其他系统信息<a class="headerlink" href="#miscellaneous-system-information" title="永久链接至标题">¶</a></h2>
<dl class="py function">
<dt id="os.confstr">
<code class="sig-prename descclassname">os.</code><code class="sig-name descname">confstr</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">name</span></em><span class="sig-paren">)</span><a class="headerlink" href="#os.confstr" title="永久链接至目标">¶</a></dt>
<dd><p>返回字符串格式的系统配置信息。<em>name</em> 指定要查找的配置名称，它可以是字符串，是一个系统已定义的名称，这些名称定义在不同标准（POSIX，Unix 95，Unix 98 等）中。一些平台还定义了额外的其他名称。当前操作系统已定义的名称在 <code class="docutils literal notranslate"><span class="pre">confstr_names</span></code> 字典的键中给出。对于未包含在该映射中的配置名称，也可以传递一个整数作为 <em>name</em>。</p>
<p>如果 <em>name</em> 指定的配置值未定义，返回 <code class="docutils literal notranslate"><span class="pre">None</span></code>。</p>
<p>如果 <em>name</em> 是一个字符串且不是已定义的名称，将抛出 <a class="reference internal" href="exceptions.html#ValueError" title="ValueError"><code class="xref py py-exc docutils literal notranslate"><span class="pre">ValueError</span></code></a> 异常。如果当前系统不支持 <em>name</em> 指定的配置名称，即使该名称存在于 <code class="docutils literal notranslate"><span class="pre">confstr_names</span></code>，也会抛出 <a class="reference internal" href="exceptions.html#OSError" title="OSError"><code class="xref py py-exc docutils literal notranslate"><span class="pre">OSError</span></code></a> 异常，错误码为 <a class="reference internal" href="errno.html#errno.EINVAL" title="errno.EINVAL"><code class="xref py py-const docutils literal notranslate"><span class="pre">errno.EINVAL</span></code></a>。</p>
<p class="availability"><a class="reference internal" href="intro.html#availability"><span class="std std-ref">可用性</span></a>: Unix。</p>
</dd></dl>

<dl class="py data">
<dt id="os.confstr_names">
<code class="sig-prename descclassname">os.</code><code class="sig-name descname">confstr_names</code><a class="headerlink" href="#os.confstr_names" title="永久链接至目标">¶</a></dt>
<dd><p>字典，表示映射关系，为 <a class="reference internal" href="#os.confstr" title="os.confstr"><code class="xref py py-func docutils literal notranslate"><span class="pre">confstr()</span></code></a> 可接受名称与操作系统为这些名称定义的整数值之间的映射。这可用于判断系统已定义了哪些名称。</p>
<p class="availability"><a class="reference internal" href="intro.html#availability"><span class="std std-ref">可用性</span></a>: Unix。</p>
</dd></dl>

<dl class="py function">
<dt id="os.cpu_count">
<code class="sig-prename descclassname">os.</code><code class="sig-name descname">cpu_count</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#os.cpu_count" title="永久链接至目标">¶</a></dt>
<dd><p>返回系统的 CPU 数量。不确定则返回 <code class="docutils literal notranslate"><span class="pre">None</span></code>。</p>
<p>该数量不同于当前进程可以使用的CPU数量。可用的CPU数量可以由 <code class="docutils literal notranslate"><span class="pre">len(os.sched_getaffinity(0))</span></code> 方法获得。</p>
<div class="versionadded">
<p><span class="versionmodified added">3.4 新版功能.</span></p>
</div>
</dd></dl>

<dl class="py function">
<dt id="os.getloadavg">
<code class="sig-prename descclassname">os.</code><code class="sig-name descname">getloadavg</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#os.getloadavg" title="永久链接至目标">¶</a></dt>
<dd><p>返回系统运行队列中最近 1、5 和 15 分钟内的平均进程数。无法获得平均负载则抛出 <a class="reference internal" href="exceptions.html#OSError" title="OSError"><code class="xref py py-exc docutils literal notranslate"><span class="pre">OSError</span></code></a> 异常。</p>
<p class="availability"><a class="reference internal" href="intro.html#availability"><span class="std std-ref">可用性</span></a>: Unix。</p>
</dd></dl>

<dl class="py function">
<dt id="os.sysconf">
<code class="sig-prename descclassname">os.</code><code class="sig-name descname">sysconf</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">name</span></em><span class="sig-paren">)</span><a class="headerlink" href="#os.sysconf" title="永久链接至目标">¶</a></dt>
<dd><p>返回整数格式的系统配置信息。如果 <em>name</em> 指定的配置值未定义，返回 <code class="docutils literal notranslate"><span class="pre">-1</span></code>。对 <a class="reference internal" href="#os.confstr" title="os.confstr"><code class="xref py py-func docutils literal notranslate"><span class="pre">confstr()</span></code></a> 的 <em>name</em> 参数的注释在此处也适用。当前已知的配置名称在 <code class="docutils literal notranslate"><span class="pre">sysconf_names</span></code> 字典中提供。</p>
<p class="availability"><a class="reference internal" href="intro.html#availability"><span class="std std-ref">可用性</span></a>: Unix。</p>
</dd></dl>

<dl class="py data">
<dt id="os.sysconf_names">
<code class="sig-prename descclassname">os.</code><code class="sig-name descname">sysconf_names</code><a class="headerlink" href="#os.sysconf_names" title="永久链接至目标">¶</a></dt>
<dd><p>字典，表示映射关系，为 <a class="reference internal" href="#os.sysconf" title="os.sysconf"><code class="xref py py-func docutils literal notranslate"><span class="pre">sysconf()</span></code></a> 可接受名称与操作系统为这些名称定义的整数值之间的映射。这可用于判断系统已定义了哪些名称。</p>
<p class="availability"><a class="reference internal" href="intro.html#availability"><span class="std std-ref">可用性</span></a>: Unix。</p>
</dd></dl>

<p>以下数据值用于支持对路径本身的操作。所有平台都有定义。</p>
<p>对路径的高级操作在 <a class="reference internal" href="os.path.html#module-os.path" title="os.path: Operations on pathnames."><code class="xref py py-mod docutils literal notranslate"><span class="pre">os.path</span></code></a> 模块中定义。</p>
<span class="target" id="index-44"></span><dl class="py data">
<dt id="os.curdir">
<code class="sig-prename descclassname">os.</code><code class="sig-name descname">curdir</code><a class="headerlink" href="#os.curdir" title="永久链接至目标">¶</a></dt>
<dd><p>操作系统用来表示当前目录的常量字符串。在 Windows 和 POSIX 上是 <code class="docutils literal notranslate"><span class="pre">'.'</span></code>。在 <a class="reference internal" href="os.path.html#module-os.path" title="os.path: Operations on pathnames."><code class="xref py py-mod docutils literal notranslate"><span class="pre">os.path</span></code></a> 中也可用。</p>
</dd></dl>

<span class="target" id="index-45"></span><dl class="py data">
<dt id="os.pardir">
<code class="sig-prename descclassname">os.</code><code class="sig-name descname">pardir</code><a class="headerlink" href="#os.pardir" title="永久链接至目标">¶</a></dt>
<dd><p>操作系统用来表示父目录的常量字符串。在 Windows 和 POSIX 上是 <code class="docutils literal notranslate"><span class="pre">'..'</span></code>。在 <a class="reference internal" href="os.path.html#module-os.path" title="os.path: Operations on pathnames."><code class="xref py py-mod docutils literal notranslate"><span class="pre">os.path</span></code></a> 中也可用。</p>
</dd></dl>

<span class="target" id="index-46"></span><span class="target" id="index-47"></span><dl class="py data">
<dt id="os.sep">
<code class="sig-prename descclassname">os.</code><code class="sig-name descname">sep</code><a class="headerlink" href="#os.sep" title="永久链接至目标">¶</a></dt>
<dd><p>操作系统用来分隔路径不同部分的字符。在 POSIX 上是 <code class="docutils literal notranslate"><span class="pre">'/'</span></code>，在 Windows 上是是 <code class="docutils literal notranslate"><span class="pre">'\\'</span></code>。注意，仅了解它不足以能解析或连接路径，请使用 <a class="reference internal" href="os.path.html#os.path.split" title="os.path.split"><code class="xref py py-func docutils literal notranslate"><span class="pre">os.path.split()</span></code></a> 和 <a class="reference internal" href="os.path.html#os.path.join" title="os.path.join"><code class="xref py py-func docutils literal notranslate"><span class="pre">os.path.join()</span></code></a>，但它有时是有用的。在 <a class="reference internal" href="os.path.html#module-os.path" title="os.path: Operations on pathnames."><code class="xref py py-mod docutils literal notranslate"><span class="pre">os.path</span></code></a> 中也可用。</p>
</dd></dl>

<span class="target" id="index-48"></span><dl class="py data">
<dt id="os.altsep">
<code class="sig-prename descclassname">os.</code><code class="sig-name descname">altsep</code><a class="headerlink" href="#os.altsep" title="永久链接至目标">¶</a></dt>
<dd><p>操作系统用来分隔路径不同部分的替代字符。如果仅存在一个分隔符，则为 <code class="docutils literal notranslate"><span class="pre">None</span></code>。在 <code class="docutils literal notranslate"><span class="pre">sep</span></code> 是反斜杠的 Windows 系统上，该值被设为 <code class="docutils literal notranslate"><span class="pre">'/'</span></code>。在 <a class="reference internal" href="os.path.html#module-os.path" title="os.path: Operations on pathnames."><code class="xref py py-mod docutils literal notranslate"><span class="pre">os.path</span></code></a> 中也可用。</p>
</dd></dl>

<span class="target" id="index-49"></span><dl class="py data">
<dt id="os.extsep">
<code class="sig-prename descclassname">os.</code><code class="sig-name descname">extsep</code><a class="headerlink" href="#os.extsep" title="永久链接至目标">¶</a></dt>
<dd><p>分隔基本文件名与扩展名的字符，如 <code class="file docutils literal notranslate"><span class="pre">os.py</span></code> 中的 <code class="docutils literal notranslate"><span class="pre">'.'</span></code>。在 <a class="reference internal" href="os.path.html#module-os.path" title="os.path: Operations on pathnames."><code class="xref py py-mod docutils literal notranslate"><span class="pre">os.path</span></code></a> 中也可用。</p>
</dd></dl>

<span class="target" id="index-50"></span><dl class="py data">
<dt id="os.pathsep">
<code class="sig-prename descclassname">os.</code><code class="sig-name descname">pathsep</code><a class="headerlink" href="#os.pathsep" title="永久链接至目标">¶</a></dt>
<dd><p>操作系统通常用于分隔搜索路径（如 <span class="target" id="index-101"></span><code class="xref std std-envvar docutils literal notranslate"><span class="pre">PATH</span></code>）中不同部分的字符，如 POSIX 上是 <code class="docutils literal notranslate"><span class="pre">':'</span></code>，Windows 上是 <code class="docutils literal notranslate"><span class="pre">';'</span></code>。在 <a class="reference internal" href="os.path.html#module-os.path" title="os.path: Operations on pathnames."><code class="xref py py-mod docutils literal notranslate"><span class="pre">os.path</span></code></a> 中也可用。</p>
</dd></dl>

<dl class="py data">
<dt id="os.defpath">
<code class="sig-prename descclassname">os.</code><code class="sig-name descname">defpath</code><a class="headerlink" href="#os.defpath" title="永久链接至目标">¶</a></dt>
<dd><p>在环境变量没有 <code class="docutils literal notranslate"><span class="pre">'PATH'</span></code> 键的情况下，<a class="reference internal" href="#os.execl" title="os.execl"><code class="xref py py-func docutils literal notranslate"><span class="pre">exec*p*</span></code></a> and <a class="reference internal" href="#os.spawnl" title="os.spawnl"><code class="xref py py-func docutils literal notranslate"><span class="pre">spawn*p*</span></code></a> 使用的默认搜索路径。在 <a class="reference internal" href="os.path.html#module-os.path" title="os.path: Operations on pathnames."><code class="xref py py-mod docutils literal notranslate"><span class="pre">os.path</span></code></a> 中也可用。</p>
</dd></dl>

<dl class="py data">
<dt id="os.linesep">
<code class="sig-prename descclassname">os.</code><code class="sig-name descname">linesep</code><a class="headerlink" href="#os.linesep" title="永久链接至目标">¶</a></dt>
<dd><p>当前平台用于分隔（或终止）行的字符串。它可以是单个字符，如 POSIX 上是 <code class="docutils literal notranslate"><span class="pre">'\n'</span></code>，也可以是多个字符，如 Windows 上是 <code class="docutils literal notranslate"><span class="pre">'\r\n'</span></code>。在写入以文本模式（默认模式）打开的文件时，请不要使用 <em>os.linesep</em> 作为行终止符，请在所有平台上都使用一个 <code class="docutils literal notranslate"><span class="pre">'\n'</span></code> 代替。</p>
</dd></dl>

<dl class="py data">
<dt id="os.devnull">
<code class="sig-prename descclassname">os.</code><code class="sig-name descname">devnull</code><a class="headerlink" href="#os.devnull" title="永久链接至目标">¶</a></dt>
<dd><p>空设备的文件路径。如 POSIX 上为 <code class="docutils literal notranslate"><span class="pre">'/dev/null'</span></code>，Windows 上为 <code class="docutils literal notranslate"><span class="pre">'nul'</span></code>。在 <a class="reference internal" href="os.path.html#module-os.path" title="os.path: Operations on pathnames."><code class="xref py py-mod docutils literal notranslate"><span class="pre">os.path</span></code></a> 中也可用。</p>
</dd></dl>

<dl class="py data">
<dt id="os.RTLD_LAZY">
<code class="sig-prename descclassname">os.</code><code class="sig-name descname">RTLD_LAZY</code><a class="headerlink" href="#os.RTLD_LAZY" title="永久链接至目标">¶</a></dt>
<dt id="os.RTLD_NOW">
<code class="sig-prename descclassname">os.</code><code class="sig-name descname">RTLD_NOW</code><a class="headerlink" href="#os.RTLD_NOW" title="永久链接至目标">¶</a></dt>
<dt id="os.RTLD_GLOBAL">
<code class="sig-prename descclassname">os.</code><code class="sig-name descname">RTLD_GLOBAL</code><a class="headerlink" href="#os.RTLD_GLOBAL" title="永久链接至目标">¶</a></dt>
<dt id="os.RTLD_LOCAL">
<code class="sig-prename descclassname">os.</code><code class="sig-name descname">RTLD_LOCAL</code><a class="headerlink" href="#os.RTLD_LOCAL" title="永久链接至目标">¶</a></dt>
<dt id="os.RTLD_NODELETE">
<code class="sig-prename descclassname">os.</code><code class="sig-name descname">RTLD_NODELETE</code><a class="headerlink" href="#os.RTLD_NODELETE" title="永久链接至目标">¶</a></dt>
<dt id="os.RTLD_NOLOAD">
<code class="sig-prename descclassname">os.</code><code class="sig-name descname">RTLD_NOLOAD</code><a class="headerlink" href="#os.RTLD_NOLOAD" title="永久链接至目标">¶</a></dt>
<dt id="os.RTLD_DEEPBIND">
<code class="sig-prename descclassname">os.</code><code class="sig-name descname">RTLD_DEEPBIND</code><a class="headerlink" href="#os.RTLD_DEEPBIND" title="永久链接至目标">¶</a></dt>
<dd><p><a class="reference internal" href="sys.html#sys.setdlopenflags" title="sys.setdlopenflags"><code class="xref py py-func docutils literal notranslate"><span class="pre">setdlopenflags()</span></code></a> 和 <a class="reference internal" href="sys.html#sys.getdlopenflags" title="sys.getdlopenflags"><code class="xref py py-func docutils literal notranslate"><span class="pre">getdlopenflags()</span></code></a> 函数所使用的标志。请参阅 Unix 手册页 <em class="manpage"><a class="manpage reference external" href="https://manpages.debian.org/dlopen(3)">dlopen(3)</a></em> 获取不同标志的含义。</p>
<div class="versionadded">
<p><span class="versionmodified added">3.3 新版功能.</span></p>
</div>
</dd></dl>

</section>
<section id="random-numbers">
<h2>随机数<a class="headerlink" href="#random-numbers" title="永久链接至标题">¶</a></h2>
<dl class="py function">
<dt id="os.getrandom">
<code class="sig-prename descclassname">os.</code><code class="sig-name descname">getrandom</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">size</span></em>, <em class="sig-param"><span class="n">flags</span><span class="o">=</span><span class="default_value">0</span></em><span class="sig-paren">)</span><a class="headerlink" href="#os.getrandom" title="永久链接至目标">¶</a></dt>
<dd><p>获得最多为 <em>size</em> 的随机字节。本函数返回的字节数可能少于请求的字节数。</p>
<p>这些字节可用于为用户空间的随机数生成器提供种子，或用于加密目的。</p>
<p><code class="docutils literal notranslate"><span class="pre">getrandom()</span></code> 依赖于从设备驱动程序和其他环境噪声源收集的熵。不必要地读取大量数据将对使用 <code class="docutils literal notranslate"><span class="pre">/dev/random</span></code> 和 <code class="docutils literal notranslate"><span class="pre">/dev/urandom</span></code> 设备的其他用户产生负面影响。</p>
<p>flags 参数是一个位掩码，可以是零个或多个下列值以或运算组合： <a class="reference internal" href="#os.GRND_RANDOM" title="os.GRND_RANDOM"><code class="xref py py-data docutils literal notranslate"><span class="pre">os.GRND_RANDOM</span></code></a> 和 <a class="reference internal" href="#os.GRND_NONBLOCK" title="os.GRND_NONBLOCK"><code class="xref py py-data docutils literal notranslate"><span class="pre">GRND_NONBLOCK</span></code></a>。</p>
<p>另请参阅 <a class="reference external" href="http://man7.org/linux/man-pages/man2/getrandom.2.html">Linux getrandom() 手册页</a> 。</p>
<p class="availability"><a class="reference internal" href="intro.html#availability"><span class="std std-ref">可用性</span></a>：Linux 3.17 或更高版本。</p>
<div class="versionadded">
<p><span class="versionmodified added">3.6 新版功能.</span></p>
</div>
</dd></dl>

<dl class="py function">
<dt id="os.urandom">
<code class="sig-prename descclassname">os.</code><code class="sig-name descname">urandom</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">size</span></em><span class="sig-paren">)</span><a class="headerlink" href="#os.urandom" title="永久链接至目标">¶</a></dt>
<dd><p>返回大小为 <em>size</em> 的字节串，它是适合加密使用的随机字节。</p>
<p>本函数从系统指定的随机源获取随机字节。对于加密应用程序，返回的数据应有足够的不可预测性，尽管其确切的品质取决于操作系统的实现。</p>
<p>在 Linux 上，如果 <code class="docutils literal notranslate"><span class="pre">getrandom()</span></code> 系统调用可用，它将以阻塞模式使用：阻塞直到系统的 urandom 熵池初始化完毕（内核收集了 128 位熵）。原理请参阅 <span class="target" id="index-102"></span><a class="pep reference external" href="https://www.python.org/dev/peps/pep-0524"><strong>PEP 524</strong></a>。在 Linux 上，<a class="reference internal" href="#os.getrandom" title="os.getrandom"><code class="xref py py-func docutils literal notranslate"><span class="pre">getrandom()</span></code></a> 可以以非阻塞模式（使用 <a class="reference internal" href="#os.GRND_NONBLOCK" title="os.GRND_NONBLOCK"><code class="xref py py-data docutils literal notranslate"><span class="pre">GRND_NONBLOCK</span></code></a> 标志）获取随机字节，或者轮询直到系统的 urandom 熵池初始化完毕。</p>
<p>在类 Unix 系统上，随机字节是从 <code class="docutils literal notranslate"><span class="pre">/dev/urandom</span></code> 设备读取的。如果 <code class="docutils literal notranslate"><span class="pre">/dev/urandom</span></code> 设备不可用或不可读，则抛出 <a class="reference internal" href="exceptions.html#NotImplementedError" title="NotImplementedError"><code class="xref py py-exc docutils literal notranslate"><span class="pre">NotImplementedError</span></code></a> 异常。</p>
<p>在 Windows 上将使用 <code class="docutils literal notranslate"><span class="pre">CryptGenRandom()</span></code>。</p>
<div class="admonition seealso">
<p class="admonition-title">参见</p>
<p><a class="reference internal" href="secrets.html#module-secrets" title="secrets: Generate secure random numbers for managing secrets."><code class="xref py py-mod docutils literal notranslate"><span class="pre">secrets</span></code></a> 模块提供了更高级的功能。所在平台会提供随机数生成器，有关其易于使用的接口，请参阅 <a class="reference internal" href="random.html#random.SystemRandom" title="random.SystemRandom"><code class="xref py py-class docutils literal notranslate"><span class="pre">random.SystemRandom</span></code></a>。</p>
</div>
<div class="versionchanged">
<p><span class="versionmodified changed">在 3.6.0 版更改: </span>在 Linux 上，<code class="docutils literal notranslate"><span class="pre">getrandom()</span></code> 现在以阻塞模式使用，以提高安全性。</p>
</div>
<div class="versionchanged">
<p><span class="versionmodified changed">在 3.5.2 版更改: </span>在 Linux 上，如果 <code class="docutils literal notranslate"><span class="pre">getrandom()</span></code> 系统调用阻塞（urandom 熵池尚未初始化完毕），则退回一步读取 <code class="docutils literal notranslate"><span class="pre">/dev/urandom</span></code>。</p>
</div>
<div class="versionchanged">
<p><span class="versionmodified changed">在 3.5 版更改: </span>在 Linux 3.17 和更高版本上，现在使用 <code class="docutils literal notranslate"><span class="pre">getrandom()</span></code> 系统调用（如果可用）。在 OpenBSD 5.6 和更高版本上，现在使用 <code class="docutils literal notranslate"><span class="pre">getentropy()</span></code> C 函数。这些函数避免了使用内部文件描述符。</p>
</div>
</dd></dl>

<dl class="py data">
<dt id="os.GRND_NONBLOCK">
<code class="sig-prename descclassname">os.</code><code class="sig-name descname">GRND_NONBLOCK</code><a class="headerlink" href="#os.GRND_NONBLOCK" title="永久链接至目标">¶</a></dt>
<dd><p>默认情况下，从 <code class="docutils literal notranslate"><span class="pre">/dev/random</span></code> 读取时，如果没有可用的随机字节，则 <a class="reference internal" href="#os.getrandom" title="os.getrandom"><code class="xref py py-func docutils literal notranslate"><span class="pre">getrandom()</span></code></a> 会阻塞；从 <code class="docutils literal notranslate"><span class="pre">/dev/urandom</span></code> 读取时，如果熵池尚未初始化，则会阻塞。</p>
<p>如果设置了 <a class="reference internal" href="#os.GRND_NONBLOCK" title="os.GRND_NONBLOCK"><code class="xref py py-data docutils literal notranslate"><span class="pre">GRND_NONBLOCK</span></code></a> 标志，则这些情况下 <a class="reference internal" href="#os.getrandom" title="os.getrandom"><code class="xref py py-func docutils literal notranslate"><span class="pre">getrandom()</span></code></a> 不会阻塞，而是立即抛出 <a class="reference internal" href="exceptions.html#BlockingIOError" title="BlockingIOError"><code class="xref py py-exc docutils literal notranslate"><span class="pre">BlockingIOError</span></code></a> 异常。</p>
<div class="versionadded">
<p><span class="versionmodified added">3.6 新版功能.</span></p>
</div>
</dd></dl>

<dl class="py data">
<dt id="os.GRND_RANDOM">
<code class="sig-prename descclassname">os.</code><code class="sig-name descname">GRND_RANDOM</code><a class="headerlink" href="#os.GRND_RANDOM" title="永久链接至目标">¶</a></dt>
<dd><p>如果设置了此标志位，那么将从 <code class="docutils literal notranslate"><span class="pre">/dev/random</span></code> 池而不是 <code class="docutils literal notranslate"><span class="pre">/dev/urandom</span></code> 池中提取随机字节。</p>
<div class="versionadded">
<p><span class="versionmodified added">3.6 新版功能.</span></p>
</div>
</dd></dl>

</section>
</section>


            <div class="clearer"></div>
          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
  <h3><a href="../contents.html">目录</a></h3>
  <ul>
<li><a class="reference internal" href="#"><code class="xref py py-mod docutils literal notranslate"><span class="pre">os</span></code> --- 多种操作系统接口</a><ul>
<li><a class="reference internal" href="#file-names-command-line-arguments-and-environment-variables">文件名，命令行参数，以及环境变量。</a></li>
<li><a class="reference internal" href="#python-utf-8-mode">Python UTF-8 模式</a></li>
<li><a class="reference internal" href="#process-parameters">进程参数</a></li>
<li><a class="reference internal" href="#file-object-creation">创建文件对象</a></li>
<li><a class="reference internal" href="#file-descriptor-operations">文件描述符操作</a><ul>
<li><a class="reference internal" href="#querying-the-size-of-a-terminal">查询终端的尺寸</a></li>
<li><a class="reference internal" href="#inheritance-of-file-descriptors">文件描述符的继承</a></li>
</ul>
</li>
<li><a class="reference internal" href="#files-and-directories">文件和目录</a><ul>
<li><a class="reference internal" href="#linux-extended-attributes">Linux 扩展属性</a></li>
</ul>
</li>
<li><a class="reference internal" href="#process-management">进程管理</a></li>
<li><a class="reference internal" href="#interface-to-the-scheduler">调度器接口</a></li>
<li><a class="reference internal" href="#miscellaneous-system-information">其他系统信息</a></li>
<li><a class="reference internal" href="#random-numbers">随机数</a></li>
</ul>
</li>
</ul>

  <h4>上一个主题</h4>
  <p class="topless"><a href="allos.html"
                        title="上一章">通用操作系统服务</a></p>
  <h4>下一个主题</h4>
  <p class="topless"><a href="io.html"
                        title="下一章"><code class="xref py py-mod docutils literal notranslate"><span class="pre">io</span></code> --- 处理流的核心工具</a></p>
  <div role="note" aria-label="source link">
    <h3>当前页面</h3>
    <ul class="this-page-menu">
      <li><a href="../bugs.html">提交 Bug</a></li>
      <li>
        <a href="https://github.com/python/cpython/blob/3.10/Doc/library/os.rst"
            rel="nofollow">显示源码
        </a>
      </li>
    </ul>
  </div>
        </div>
      </div>
      <div class="clearer"></div>
    </div>  
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>导航</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="总目录"
             >索引</a></li>
        <li class="right" >
          <a href="../py-modindex.html" title="Python 模块索引"
             >模块</a> |</li>
        <li class="right" >
          <a href="io.html" title="io --- 处理流的核心工具"
             >下一页</a> |</li>
        <li class="right" >
          <a href="allos.html" title="通用操作系统服务"
             >上一页</a> |</li>

          <li><img src="../_static/py.svg" alt="python logo" style="vertical-align: middle; margin-top: -1px"/></li>
          <li><a href="https://www.python.org/">Python</a> &#187;</li>
          <li class="switchers">
            <div class="language_switcher_placeholder"></div>
            <div class="version_switcher_placeholder"></div>
          </li>
          <li>
              
          </li>
    <li id="cpython-language-and-version">
      <a href="../index.html">3.10.5 Documentation</a> &#187;
    </li>

          <li class="nav-item nav-item-1"><a href="index.html" >Python 标准库</a> &#187;</li>
          <li class="nav-item nav-item-2"><a href="allos.html" >通用操作系统服务</a> &#187;</li>
        <li class="nav-item nav-item-this"><a href=""><code class="xref py py-mod docutils literal notranslate"><span class="pre">os</span></code> --- 多种操作系统接口</a></li>
                <li class="right">
                    

    <div class="inline-search" role="search">
        <form class="inline-search" action="../search.html" method="get">
          <input placeholder="快速搜索" aria-label="快速搜索" type="text" name="q" />
          <input type="submit" value="转向" />
          <input type="hidden" name="check_keywords" value="yes" />
          <input type="hidden" name="area" value="default" />
        </form>
    </div>
                     |
                </li>
            
      </ul>
    </div>  
    <div class="footer">
    &copy; <a href="../copyright.html">版权所有</a> 2001-2022, Python Software Foundation.
    <br />
    This page is licensed under the Python Software Foundation License Version 2.
    <br />
    Examples, recipes, and other code in the documentation are additionally licensed under the Zero Clause BSD License.
    <br />
    See <a href="/license.html">History and License</a> for more information.<br />
    <br />

    The Python Software Foundation is a non-profit corporation.
<a href="https://www.python.org/psf/donations/">Please donate.</a>
<br />
    <br />

    最后更新于 7月 24, 2022.
    <a href="/bugs.html">Found a bug</a>?
    <br />

    Created using <a href="https://www.sphinx-doc.org/">Sphinx</a> 3.4.3.
    </div>

  </body>
</html>